var rt=Object.defineProperty;var ut=(e,s,i)=>s in e?rt(e,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[s]=i;var G=(e,s,i)=>(ut(e,typeof s!="symbol"?s+"":s,i),i);import{d as V,r as $,o as l,c as o,a as _,b as t,F as T,e as P,t as k,f as c,w as p,v as y,g as N,h as E,i as h,j as L,n as q,k as I,l as j,p as W,m as H,q as x,s as ct,u as nt,x as ht,y as pt,z as mt,A as gt,B as ft}from"./vendor.0ba2f458.js";const yt=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))g(u);new MutationObserver(u=>{for(const m of u)if(m.type==="childList")for(const d of m.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&g(d)}).observe(document,{childList:!0,subtree:!0});function i(u){const m={};return u.integrity&&(m.integrity=u.integrity),u.referrerpolicy&&(m.referrerPolicy=u.referrerpolicy),u.crossorigin==="use-credentials"?m.credentials="include":u.crossorigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function g(u){if(u.ep)return;u.ep=!0;const m=i(u);fetch(u.href,m)}};yt();var S=(e,s)=>{for(const[i,g]of s)e[i]=g;return e};const vt=V({name:"app"}),$t={id:"app"};function _t(e,s,i,g,u,m){const d=$("router-view");return l(),o("div",$t,[_(d)])}var bt=S(vt,[["render",_t]]);const kt=V({data:()=>({widgets:null}),async created(){const e=await fetch("/api/page/index");if(e.status!==200){this.$router.push({name:"login"});return}const s=await e.json();this.widgets=s.widgets}}),wt={key:0,id:"app"},Ct={id:"top",ref:"top"},Vt={id:"main",ref:"main"},St={class:"table is-striped is-fullwidth"},Ut=t("thead",null,[t("tr",null,[t("th",null,"Widget"),t("th",null,"Hint")])],-1),It=["href"];function Tt(e,s,i,g,u,m){const d=$("navbar");return e.widgets?(l(),o("div",wt,[t("div",Ct,[_(d)],512),t("div",Vt,[t("table",St,[Ut,t("tbody",null,[(l(!0),o(T,null,P(e.widgets,(n,v)=>(l(),o("tr",{key:v},[t("td",null,[t("a",{href:n.url,target:"blank"},k(n.title),9,It)]),t("td",null,k(n.hint),1)]))),128))])])],512)])):c("",!0)}var Pt=S(kt,[["render",Tt]]);const At=V({data:()=>({user:"",pass:"",error:"",success:""}),async mounted(){const s=new URLSearchParams(window.location.search).get("t");if(s){this.success="",this.error="";const i=await fetch("/api/_handle-token",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({token:s})});i.status===200?(await i.json()).type==="registration-verified"&&(this.success="Registration complete"):this.error="Unknown error"}},methods:{async submit(){this.success="",this.error="";const e=await fetch("/api/auth",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({user:this.user,pass:this.pass})});e.status===200?this.$router.push({name:"index"}):e.status===401?this.error=(await e.json()).reason:this.error="Unknown error"}}}),Mt={class:"center-screen"},Dt=t("h1",{class:"title is-6"},"Hyottoko.club",-1),Et={key:0,class:"field has-background-success-light has-text-success-dark"},Lt={key:1,class:"field has-background-danger-light has-text-danger-dark"},jt={class:"field"},Rt={class:"control has-icons-left"},Ot=t("span",{class:"icon is-small is-left"},[t("i",{class:"fa fa-user"})],-1),Nt={class:"field"},Ft={class:"control has-icons-left"},Jt=t("span",{class:"icon is-small is-left"},[t("i",{class:"fa fa-lock"})],-1),Bt={class:"field"},zt={class:"field"},qt=h("Register an account"),Wt=h(" | "),Ht=h("Forgot password?");function Kt(e,s,i,g,u,m){const d=$("router-link");return l(),o("div",Mt,[Dt,t("form",null,[e.success?(l(),o("div",Et,k(e.success),1)):c("",!0),e.error?(l(),o("div",Lt,k(e.error),1)):c("",!0),t("div",jt,[t("div",Rt,[p(t("input",{class:"input is-small",type:"text",placeholder:"User","onUpdate:modelValue":s[0]||(s[0]=n=>e.user=n),onKeyup:s[1]||(s[1]=n=>e.error="")},null,544),[[y,e.user]]),Ot])]),t("div",Nt,[t("div",Ft,[p(t("input",{class:"input is-small",type:"password",placeholder:"Password","onUpdate:modelValue":s[2]||(s[2]=n=>e.pass=n),onKeyup:[s[3]||(s[3]=n=>e.error=""),s[4]||(s[4]=N((...n)=>e.submit&&e.submit(...n),["enter"]))]},null,544),[[y,e.pass]]),Jt])]),t("div",Bt,[t("span",{class:"button is-small is-primary",onClick:s[5]||(s[5]=(...n)=>e.submit&&e.submit(...n))},"Login")]),t("div",zt,[_(d,{to:{name:"register"}},{default:E(()=>[qt]),_:1}),Wt,_(d,{to:{name:"forgot-password"}},{default:E(()=>[Ht]),_:1})])])])}var Gt=S(At,[["render",Kt]]);const Yt=1001,lt=4e3;class Xt{constructor(s,i){G(this,"handle",null);G(this,"reconnectTimeout",null);G(this,"sendBuffer",[]);this.addr=s,this.protocols=i,this.onopen=()=>{},this.onclose=()=>{},this.onmessage=()=>{}}send(s){this.handle?this.handle.send(s):this.sendBuffer.push(s)}connect(){let s=new WebSocket(this.addr,this.protocols);s.onopen=i=>{for(this.reconnectTimeout&&clearTimeout(this.reconnectTimeout),this.handle=s;this.sendBuffer.length>0;)this.handle.send(this.sendBuffer.shift());this.onopen(i)},s.onmessage=i=>{this.onmessage(i)},s.onclose=i=>{this.handle=null,i.code===lt||i.code===Yt||(this.reconnectTimeout=setTimeout(()=>{this.connect()},1e3)),this.onclose(i)}}disconnect(){this.handle&&this.handle.close(lt)}}const Qt=(...e)=>console.log("[WsClient.js]",...e);class Y extends Xt{constructor(s,i){super(s,i);this._on={},this.onopen=g=>{this._dispatch("socket","open",g)},this.onmessage=g=>{if(this._dispatch("socket","message",g),this._on.message){const u=this._parseMessageData(g.data);u.event&&this._dispatch("message",u.event,u.data)}},this.onclose=g=>{this._dispatch("socket","close",g)}}onSocket(s,i){this.addEventListener("socket",s,i)}onMessage(s,i){this.addEventListener("message",s,i)}addEventListener(s,i,g){const u=Array.isArray(i)?i:[i];this._on[s]=this._on[s]||{};for(const m of u)this._on[s][m]=this._on[s][m]||[],this._on[s][m].push(g)}_parseMessageData(s){try{const i=JSON.parse(s);if(i.event)return{event:i.event,data:i.data||null}}catch{}return{event:null,data:null}}_dispatch(s,i,...g){const m=(this._on[s]||{})[i]||[];if(m.length!==0){Qt(`ws dispatch ${s} ${i}`);for(const d of m)d(...g)}}}const tt=async(e,s,i)=>new Promise((g,u)=>{const m=new window.XMLHttpRequest;m.open(e,s,!0),m.withCredentials=!0;for(const d in i.headers||{})m.setRequestHeader(d,i.headers[d]);m.addEventListener("load",function(d){g({status:this.status,text:this.responseText,json:async()=>JSON.parse(this.responseText)})}),m.addEventListener("error",function(d){u(new Error("xhr error"))}),m.upload&&i.onUploadProgress&&m.upload.addEventListener("progress",function(d){i.onUploadProgress&&i.onUploadProgress(d)}),m.send(i.body)});var et={request:tt,get:(e,s)=>tt("get",e,s),post:(e,s)=>tt("post",e,s)};const Zt=V({data:()=>({unchangedJson:"{}",changedJson:"{}",settings:null,defaultSettings:null,ws:null,drawUrl:"",favoriteSelection:{hovered:"",items:[],pagination:{page:1,perPage:20}}}),async created(){this.ws=new Y(this.$conf.wsBase+"/drawcast",this.$me.token),this.ws.onMessage("init",async e=>{this.settings=e.settings,this.defaultSettings=e.defaultSettings,this.unchangedJson=JSON.stringify(e.settings),this.drawUrl=e.drawUrl;const s=await et.get("/api/drawcast/all-images/",{});this.favoriteSelection.items=await s.json()}),this.ws.connect()},watch:{settings:{deep:!0,handler(e){this.changedJson=JSON.stringify(e)}}},computed:{changed(){return this.unchangedJson!==this.changedJson},receiveUrl(){return`${location.protocol}//${location.host}/widget/drawcast_receive/${this.$me.widgetToken}/`},favoriteSelectionTotalPages(){return Math.floor(this.favoriteSelection.items.length/this.favoriteSelection.pagination.perPage)+(this.favoriteSelection.items.length%this.favoriteSelection.pagination.perPage==0?0:1)},currentFavoriteSelectionItems(){const e=(this.favoriteSelection.pagination.page-1)*this.favoriteSelection.pagination.perPage;return this.favoriteSelection.items.slice(e,e+this.favoriteSelection.pagination.perPage)}},methods:{toggleFavorite(e){this.settings.favorites.includes(e)?this.settings.favorites=this.settings.favorites.filter(s=>s!==e):this.settings.favorites.push(e)},soundUploaded(e){this.settings.notificationSound={filename:e.originalname,file:e.filename,volume:100}},sendSave(){this.sendMsg({event:"save",settings:{canvasWidth:parseInt(this.settings.canvasWidth,10)||720,canvasHeight:parseInt(this.settings.canvasHeight,10)||405,submitButtonText:this.settings.submitButtonText,submitConfirm:this.settings.submitConfirm,customDescription:this.settings.customDescription,palette:this.settings.palette,displayDuration:parseInt(this.settings.displayDuration,10)||5e3,displayLatestForever:this.settings.displayLatestForever,displayLatestAutomatically:this.settings.displayLatestAutomatically,notificationSound:this.settings.notificationSound,favorites:this.settings.favorites}})},sendMsg(e){this.ws.send(JSON.stringify(e))}},unmounted(){this.ws&&this.ws.disconnect()}}),xt={id:"app"},te={id:"top",ref:"top"},ee={id:"actionbar",class:"p-1"},se=["disabled"],ne=["href"],le=["href"],oe={id:"main",ref:"main"},ie={key:0,class:"table is-striped",ref:"table"},ae=t("tr",null,[t("td",{colspan:"3"},"General")],-1),de=t("td",null,[t("code",null,"settings.canvasWidth")],-1),re=t("td",null,[h(" Width of the drawing area."),t("br"),h(" Caution: changing this will clear the area for currenty connected users. ")],-1),ue=t("td",null,[t("code",null,"settings.canvasHeight")],-1),ce=t("td",null,[h(" Height of the drawing area."),t("br"),h(" Caution: changing this will clear the area for currenty connected users. ")],-1),he=t("td",null,[t("code",null,"settings.displayDuration")],-1),pe=t("td",null," The duration in Milliseconds that each drawing will be shown ",-1),me=t("td",null,[t("code",null,"settings.displayLatestForever")],-1),ge=t("td",null,"If checked, the latest drawing will be shown indefinately.",-1),fe=t("td",null,[t("code",null,"settings.displayLatestAutomatically")],-1),ye=t("td",null," If checked, the latest drawing will be shown in widget automatically. ",-1),ve=t("td",null,[t("code",null,"settings.submitButtonText")],-1),$e=t("td",null,null,-1),_e=t("td",null,[t("code",null,"settings.submitConfirm")],-1),be=t("td",null," Leave empty if no confirm is required by user before sending. ",-1),ke=t("td",null,[t("code",null,"settings.customDescription")],-1),we=t("td",null,"Description text below the drawing panel.",-1),Ce=t("td",null,[t("code",null,"settings.palette")],-1),Ve=["onUpdate:modelValue"],Se=t("br",null,null,-1),Ue=t("br",null,null,-1),Ie=t("td",null,[h(" Default colors appearing on the draw page."),t("br"),h(" Caution: Changing this will change selected color for currenty connected users. ")],-1),Te=t("td",null,[t("code",null,"settings.notificationSound")],-1),Pe={key:0,class:"spacerow media-holder"},Ae=t("i",{class:"fa fa-remove"},null,-1),Me=[Ae],De=t("td",null,[h(" Add a sound here that plays when new drawings arrive. "),t("br"),h(" Note: Not played in drawing window, only in widget. ")],-1),Ee=t("code",null,"settings.favorites",-1),Le={class:"preview"},je=["src"],Re=t("div",null,"Currently selected favorites:",-1),Oe={class:"favorites"},Ne=["src","onClick","onMouseover"],Fe=t("div",{class:"mt-2"},"Select favorites:",-1),Je={class:"favorites-select"},Be=["src","onClick","onMouseover"],ze=["disabled"],qe=["disabled"],We=t("td",null," The favorites will always be displayed at the beginning of the gallery in the draw widget. ",-1);function He(e,s,i,g,u,m){const d=$("navbar"),n=$("player"),v=$("volume-slider"),w=$("upload");return l(),o("div",xt,[t("div",te,[_(d),t("div",ee,[t("button",{class:"button is-small is-primary mr-1",disabled:!e.changed,onClick:s[0]||(s[0]=(...f)=>e.sendSave&&e.sendSave(...f))}," Save ",8,se),t("a",{class:"button is-small mr-1",href:e.receiveUrl,target:"_blank"},"Open widget",8,ne),t("a",{class:"button is-small",href:e.drawUrl,target:"_blank"},"Open draw",8,le)])],512),t("div",oe,[e.settings?(l(),o("table",ie,[t("tbody",null,[ae,t("tr",null,[de,t("td",null,[p(t("input",{class:"input is-small",type:"text","onUpdate:modelValue":s[1]||(s[1]=f=>e.settings.canvasWidth=f)},null,512),[[y,e.settings.canvasWidth]])]),re]),t("tr",null,[ue,t("td",null,[p(t("input",{class:"input is-small",type:"text","onUpdate:modelValue":s[2]||(s[2]=f=>e.settings.canvasHeight=f)},null,512),[[y,e.settings.canvasHeight]])]),ce]),t("tr",null,[he,t("td",null,[p(t("input",{class:"input is-small",type:"text","onUpdate:modelValue":s[3]||(s[3]=f=>e.settings.displayDuration=f)},null,512),[[y,e.settings.displayDuration]])]),pe]),t("tr",null,[me,t("td",null,[p(t("input",{type:"checkbox","onUpdate:modelValue":s[4]||(s[4]=f=>e.settings.displayLatestForever=f)},null,512),[[L,e.settings.displayLatestForever]])]),ge]),t("tr",null,[fe,t("td",null,[p(t("input",{type:"checkbox","onUpdate:modelValue":s[5]||(s[5]=f=>e.settings.displayLatestAutomatically=f)},null,512),[[L,e.settings.displayLatestAutomatically]])]),ye]),t("tr",null,[ve,t("td",null,[p(t("input",{class:"input is-small",type:"text","onUpdate:modelValue":s[6]||(s[6]=f=>e.settings.submitButtonText=f)},null,512),[[y,e.settings.submitButtonText]])]),$e]),t("tr",null,[_e,t("td",null,[p(t("input",{class:"input is-small",type:"text","onUpdate:modelValue":s[7]||(s[7]=f=>e.settings.submitConfirm=f)},null,512),[[y,e.settings.submitConfirm]])]),be]),t("tr",null,[ke,t("td",null,[p(t("textarea",{class:"textarea","onUpdate:modelValue":s[8]||(s[8]=f=>e.settings.customDescription=f)},null,512),[[y,e.settings.customDescription]])]),we]),t("tr",null,[Ce,t("td",null,[(l(!0),o(T,null,P(e.settings.palette,(f,U)=>(l(),o("label",{class:"square",key:U},[p(t("input",{type:"color","onUpdate:modelValue":a=>e.settings.palette[U]=a},null,8,Ve),[[y,e.settings.palette[U]]]),t("span",{class:"square-inner",style:q({backgroundColor:f})},null,4)]))),128)),Se,Ue,t("button",{class:"button is-small",onClick:s[9]||(s[9]=f=>e.settings.palette=e.defaultSettings.palette)}," Reset to default palette ")]),Ie]),t("tr",null,[Te,t("td",null,[e.settings.notificationSound?(l(),o("div",Pe,[_(n,{src:e.settings.notificationSound.file,name:e.settings.notificationSound.filename,volume:e.settings.notificationSound.volume,class:"button is-small"},null,8,["src","name","volume"]),_(v,{modelValue:e.settings.notificationSound.volume,"onUpdate:modelValue":s[10]||(s[10]=f=>e.settings.notificationSound.volume=f)},null,8,["modelValue"]),t("button",{class:"button is-small",onClick:s[11]||(s[11]=f=>e.settings.notificationSound=null)},Me)])):c("",!0),_(w,{onUploaded:e.soundUploaded,accept:"audio/*",label:"Upload Audio"},null,8,["onUploaded"])]),De]),t("tr",null,[t("td",null,[Ee,t("div",Le,[e.favoriteSelection.hovered?(l(),o("img",{key:0,src:e.favoriteSelection.hovered},null,8,je)):c("",!0)])]),t("td",null,[Re,t("div",Oe,[(l(!0),o(T,null,P(e.settings.favorites,(f,U)=>(l(),o("img",{src:f,key:U,width:"50",height:"50",onClick:a=>e.toggleFavorite(f),onMouseover:a=>e.favoriteSelection.hovered=f,onMouseleave:s[12]||(s[12]=a=>e.favoriteSelection.hovered=""),class:"thumbnail is-favorited mr-1"},null,40,Ne))),128))]),Fe,t("div",Je,[(l(!0),o(T,null,P(e.currentFavoriteSelectionItems,(f,U)=>(l(),o("img",{src:f,key:U,width:"50",height:"50",onClick:a=>e.toggleFavorite(f),onMouseover:a=>e.favoriteSelection.hovered=f,onMouseleave:s[13]||(s[13]=a=>e.favoriteSelection.hovered=""),class:I(["thumbnail mr-1",{"is-favorited":e.settings.favorites.includes(f)}])},null,42,Be))),128))]),t("span",{class:"button is-small",onClick:s[14]||(s[14]=f=>e.favoriteSelection.pagination.page=e.favoriteSelection.pagination.page-1),disabled:e.favoriteSelection.pagination.page>1?null:!0},"Prev",8,ze),t("span",{class:"button is-small",onClick:s[15]||(s[15]=f=>e.favoriteSelection.pagination.page=e.favoriteSelection.pagination.page+1),disabled:e.favoriteSelection.pagination.page<e.favoriteSelectionTotalPages?null:!0},"Next",8,qe)]),We])])],512)):c("",!0)],512)])}var Ke=S(Zt,[["render",He]]);const Ge=V({data:()=>({unchangedJson:"[]",changedJson:"[]",variables:[]}),computed:{changed(){return this.unchangedJson!==this.changedJson}},methods:{remove(e){this.variables=this.variables.filter((s,i)=>i!==e)},onAdd(){this.variables.push({name:"",value:""})},setChanged(){this.changedJson=JSON.stringify({variables:this.variables})},setUnchanged(){this.unchangedJson=JSON.stringify({variables:this.variables}),this.changedJson=this.unchangedJson},async sendSave(){await fetch("/save-variables",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({variables:this.variables})}),this.setUnchanged()}},watch:{variables:{deep:!0,handler(){this.setChanged()}}},async mounted(){const e=await fetch("/api/page/variables");if(e.status!==200){this.$router.push({name:"login"});return}const s=await e.json();this.variables=s.variables,this.setUnchanged()}}),Ye={id:"app"},Xe={id:"top",ref:"top"},Qe={id:"actionbar",class:"p-1"},Ze=["disabled"],xe={id:"main"},ts={class:"mb-4"},es=t("h1",{class:"title mb-2"},"Global Variables",-1),ss=t("div",{class:"help"},[h(" Variables can be used from commands with "),t("code",null,"$var(variable_name)"),h(". In addition to the global variables defined here, commands can define their own local variables which have precedence over the global ones. ")],-1),ns={class:"table is-striped"},ls=t("thead",null,[t("tr",null,[t("th",null,"Name"),t("th",null,"Value"),t("th")])],-1),os=["onUpdate:modelValue"],is=["onUpdate:modelValue"],as=t("i",{class:"fa fa-trash"},null,-1);function ds(e,s,i,g,u,m){const d=$("navbar"),n=$("doubleclick-button");return l(),o("div",Ye,[t("div",Xe,[_(d),t("div",Qe,[t("button",{class:"button is-small",onClick:s[0]||(s[0]=(...v)=>e.onAdd&&e.onAdd(...v))},"Add"),t("button",{class:"button is-small is-primary",disabled:!e.changed,onClick:s[1]||(s[1]=(...v)=>e.sendSave&&e.sendSave(...v))}," Save ",8,Ze)])],512),t("div",xe,[t("div",ts,[es,ss,t("table",ns,[ls,t("tbody",null,[(l(!0),o(T,null,P(e.variables,(v,w)=>(l(),o("tr",{key:w},[t("td",null,[p(t("input",{type:"text",class:"input is-small","onUpdate:modelValue":f=>v.name=f},null,8,os),[[y,v.name]])]),t("td",null,[p(t("input",{type:"text",class:"input is-small","onUpdate:modelValue":f=>v.value=f},null,8,is),[[y,v.value]])]),t("td",null,[_(n,{class:"button is-small mr-1",message:"Are you sure?",timeout:1e3,onDoubleclick:f=>e.remove(w)},{default:E(()=>[as]),_:2},1032,["onDoubleclick"])])]))),128))])])])])])}var rs=S(Ge,[["render",ds]]);const us=V({data:()=>({user:"",pass:"",email:"",error:"",success:!1}),computed:{canRegister(){return this.user&&this.pass&&this.email&&!this.error}},methods:{async onRequestVerificationEmail(){this.success=!1,this.error="";const e=await fetch("/api/user/_resend_verification_mail",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:this.email})});if(e.status===200)this.success=!0;else try{this.error=(await e.json()).reason}catch{this.error="Unknown error"}},async submit(){this.success=!1,this.error="";const e=await fetch("/api/user/_register",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({user:this.user,pass:this.pass,email:this.email})});if(e.status===200)this.success=!0;else try{this.error=(await e.json()).reason}catch{this.error="Unknown error"}}}}),cs={class:"center-screen"},hs=t("h1",{class:"title is-6"},"Hyottoko.club",-1),ps={key:0,class:"field has-background-success-light has-text-success-dark"},ms=h(" Account registered. Please check your mail. Click "),gs=h("here"),fs=h(" to login. "),ys={key:1},vs={key:0,class:"field has-background-danger-light has-text-danger-dark"},$s={key:0},_s=h(" A user with this email is already registered. "),bs=t("br",null,null,-1),ks=h("Request a password reset."),ws={key:1},Cs=h(" A user with this email is already registered. "),Vs=t("br",null,null,-1),Ss={key:2},Us={key:3},Is={key:4},Ts={class:"field"},Ps={class:"control has-icons-left"},As=t("span",{class:"icon is-small is-left"},[t("i",{class:"fa fa-user"})],-1),Ms={class:"field"},Ds={class:"control has-icons-left"},Es=t("span",{class:"icon is-small is-left"},[t("i",{class:"fa fa-envelope"})],-1),Ls={class:"field"},js={class:"control has-icons-left"},Rs=t("span",{class:"icon is-small is-left"},[t("i",{class:"fa fa-lock"})],-1),Os={class:"field"},Ns=["disabled"];function Fs(e,s,i,g,u,m){const d=$("router-link");return l(),o("div",cs,[hs,e.success?(l(),o("div",ps,[ms,_(d,{to:{name:"login"}},{default:E(()=>[gs]),_:1}),fs])):(l(),o("div",ys,[e.error?(l(),o("div",vs,[e.error==="verified_mail_already_exists"?(l(),o("div",$s,[_s,bs,_(d,{to:{name:"forgot-password"}},{default:E(()=>[ks]),_:1})])):e.error==="unverified_mail_already_exists"?(l(),o("div",ws,[Cs,Vs,t("span",{class:"button is-small",onClick:s[0]||(s[0]=(...n)=>e.onRequestVerificationEmail&&e.onRequestVerificationEmail(...n))},"Resend verification email")])):e.error==="verified_name_already_exists"?(l(),o("div",Ss," A user with this name is already registered. ")):e.error==="unverified_name_already_exists"?(l(),o("div",Us," A user with this name is already registered. ")):(l(),o("span",Is,k(e.error),1))])):c("",!0),t("div",Ts,[t("div",Ps,[p(t("input",{class:"input is-small",type:"text",placeholder:"User","onUpdate:modelValue":[s[1]||(s[1]=n=>e.user=n),s[2]||(s[2]=n=>e.error="")]},null,512),[[y,e.user]]),As])]),t("div",Ms,[t("div",Ds,[p(t("input",{class:"input is-small",type:"email",placeholder:"Email","onUpdate:modelValue":[s[3]||(s[3]=n=>e.email=n),s[4]||(s[4]=n=>e.error="")]},null,512),[[y,e.email]]),Es])]),t("div",Ls,[t("div",js,[p(t("input",{class:"input is-small",type:"password",placeholder:"Password","onUpdate:modelValue":[s[5]||(s[5]=n=>e.pass=n),s[6]||(s[6]=n=>e.error="")],onKeyup:s[7]||(s[7]=N((...n)=>e.submit&&e.submit(...n),["enter"]))},null,544),[[y,e.pass]]),Rs])]),t("div",Os,[t("button",{class:"button is-small is-primary",disabled:e.canRegister?null:!0,onClick:s[8]||(s[8]=(...n)=>e.submit&&e.submit(...n))}," Register ",8,Ns)])]))])}var Js=S(us,[["render",Fs]]);const Bs=V({data:()=>({unchangedJson:"[]",changedJson:"[]",user:{id:0,name:"",email:"",pass:"",groups:[]},twitch_channels:[]}),computed:{isAdmin(){return this.user.groups.includes("admin")},changed(){return this.unchangedJson!==this.changedJson},accessTokenLink(){if(!this.user.tmi_identity_client_id)return;const e=["analytics:read:extensions","analytics:read:games","bits:read","channel:edit:commercial","channel:manage:broadcast","channel:manage:extensions","channel:manage:redemptions","channel:manage:videos","channel:read:editors","channel:read:hype_train","channel:read:redemptions","channel:read:stream_key","channel:read:subscriptions","clips:edit","moderation:read","user:edit","user:edit:follows","user:read:blocked_users","user:manage:blocked_users","user:read:broadcast","user:read:email"],s=document.location,i=`${s.protocol}//${s.host}/twitch/redirect_uri`;return`https://id.twitch.tv/oauth2/authorize?response_type=token&client_id=${this.user.tmi_identity_client_id}&redirect_uri=${i}&scope=${e.join("+")}`}},methods:{setChanged(){this.changedJson=JSON.stringify({user:this.user,twitch_channels:this.twitch_channels})},setUnchanged(){this.unchangedJson=JSON.stringify({user:this.user,twitch_channels:this.twitch_channels}),this.changedJson=this.unchangedJson},rmchannel(e){this.twitch_channels=this.twitch_channels.filter((s,i)=>i!==e)},addchannel(){this.twitch_channels.push({channel_id:"",channel_name:"",access_token:""})},async loadid(e){this.twitch_channels[e].channel_id=await this.getUserIdByName(this.twitch_channels[e].channel_name)},async getUserIdByName(e){const s={name:e,client_id:this.user.tmi_identity_client_id||null,client_secret:this.user.tmi_identity_client_secret||null},i=await fetch("/twitch/user-id-by-name",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(s)});try{return(await i.json()).id}catch{return""}},async sendSave(){await fetch("/api/save-settings",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({user:this.user,twitch_channels:this.twitch_channels})}),this.setUnchanged()}},watch:{user:{deep:!0,handler(){this.setChanged()}},twitch_channels:{deep:!0,handler(){this.setChanged()}}},async mounted(){const e=await fetch("/api/page/settings");if(e.status!==200){this.$router.push({name:"login"});return}const s=await e.json();this.user=s.user,this.twitch_channels=s.twitchChannels,this.setUnchanged()}}),zs={id:"app"},qs={id:"top",ref:"top"},Ws={id:"actionbar",class:"p-1"},Hs=["disabled"],Ks={id:"main"},Gs={class:"mb-4"},Ys=t("h1",{class:"title mb-2"},"User",-1),Xs={class:"table is-striped"},Qs=t("td",null,"Name:",-1),Zs=t("td",null,"Email:",-1),xs=t("td",null,"Password:",-1),tn={key:0,class:"mb-4"},en=t("h1",{class:"title mb-2"},"Twitch-Bot",-1),sn=t("p",null,[h(" Please refer to "),t("a",{href:"https://dev.twitch.tv/docs/irc/#building-the-bot",target:"_blank"},"building the bot"),h(". ")],-1),nn={class:"table is-striped"},ln=t("td",null,"Bot name:",-1),on=t("td",null,"Bot oauth (pass):",-1),an=t("td",null,"Bot client_id:",-1),dn=t("td",null,"Bot client_secret:",-1),rn={class:"mb-4"},un=t("h1",{class:"title mb-2"},"Twitch Channels",-1),cn=h(" List of twitch channels where the bot will connect to. "),hn={key:0},pn={key:0,class:"table is-striped"},mn=t("thead",null,[t("tr",null,[t("td",null,"Channel name"),t("td",null,"Channel id*"),t("td",null,"Access Token*"),t("td")])],-1),gn=["onUpdate:modelValue"],fn=["onUpdate:modelValue"],yn=["onClick"],vn=["onUpdate:modelValue"],$n=["onClick"],_n=t("i",{class:"fa fa-remove"},null,-1),bn=[_n],kn={key:1,class:"content"},wn=t("p",null," Channel Id* and Access Token*: You may not need the client id or access token. No public feature currently uses them. ",-1),Cn={key:0},Vn={key:1,class:"list"},Sn=t("li",{class:"list-item"},"Login to twitch as the channel owner",-1),Un={class:"list-item"},In=h(" Click "),Tn=["href"],Pn=h(" to authorize the bot with the channel "),An=t("li",{class:"list-item"}," If authorized, you get redirected back to hyottoko.club, and the access token will display ",-1),Mn={key:2};function Dn(e,s,i,g,u,m){const d=$("navbar");return l(),o("div",zs,[t("div",qs,[_(d),t("div",Ws,[t("button",{class:"button is-small is-primary",disabled:!e.changed,onClick:s[0]||(s[0]=(...n)=>e.sendSave&&e.sendSave(...n))}," Save ",8,Hs)])],512),t("div",Ks,[t("div",Gs,[Ys,t("table",Xs,[t("tbody",null,[t("tr",null,[Qs,t("td",null,k(e.user.name),1)]),t("tr",null,[Zs,t("td",null,[p(t("input",{type:"email","onUpdate:modelValue":s[1]||(s[1]=n=>e.user.email=n)},null,512),[[y,e.user.email]])])]),t("tr",null,[xs,t("td",null,[p(t("input",{type:"password","onUpdate:modelValue":s[2]||(s[2]=n=>e.user.pass=n)},null,512),[[y,e.user.pass]])])])])])]),e.isAdmin?(l(),o("div",tn,[en,sn,t("table",nn,[t("tbody",null,[t("tr",null,[ln,t("td",null,[p(t("input",{class:"input is-small",type:"text","onUpdate:modelValue":s[3]||(s[3]=n=>e.user.tmi_identity_username=n)},null,512),[[y,e.user.tmi_identity_username]])])]),t("tr",null,[on,t("td",null,[p(t("input",{class:"input is-small",type:"password","onUpdate:modelValue":s[4]||(s[4]=n=>e.user.tmi_identity_password=n)},null,512),[[y,e.user.tmi_identity_password]])])]),t("tr",null,[an,t("td",null,[p(t("input",{class:"input is-small",type:"text","onUpdate:modelValue":s[5]||(s[5]=n=>e.user.tmi_identity_client_id=n)},null,512),[[y,e.user.tmi_identity_client_id]])])]),t("tr",null,[dn,t("td",null,[p(t("input",{class:"input is-small",type:"password","onUpdate:modelValue":s[6]||(s[6]=n=>e.user.tmi_identity_client_secret=n)},null,512),[[y,e.user.tmi_identity_client_secret]])])])])])])):c("",!0),t("div",rn,[un,t("p",null,[cn,e.twitch_channels.length===0?(l(),o("span",hn," Currently no channels are configured. ")):c("",!0)]),e.twitch_channels.length>0?(l(),o("table",pn,[mn,t("tbody",null,[(l(!0),o(T,null,P(e.twitch_channels,(n,v)=>(l(),o("tr",{key:n.channel_name},[t("td",null,[p(t("input",{class:"input is-small",type:"text","onUpdate:modelValue":w=>n.channel_name=w},null,8,gn),[[y,n.channel_name]])]),t("td",null,[n.channel_id?p((l(),o("input",{key:0,class:"input is-small",type:"text","onUpdate:modelValue":w=>n.channel_id=w},null,8,fn)),[[y,n.channel_id]]):c("",!0),n.channel_id?c("",!0):(l(),o("button",{key:1,class:"button is-small",onClick:w=>e.loadid(v)}," Load id ",8,yn))]),t("td",null,[p(t("input",{class:"input is-small",type:"password","onUpdate:modelValue":w=>n.access_token=w},null,8,vn),[[y,n.access_token]])]),t("td",null,[t("button",{class:"button is-small",onClick:w=>e.rmchannel(v)},bn,8,$n)])]))),128))])])):c("",!0),t("button",{class:"button is-small",onClick:s[7]||(s[7]=n=>e.addchannel())}," Add channel ")]),e.twitch_channels.length>0?(l(),o("div",kn,[wn,e.accessTokenLink?(l(),o("p",Cn,"To get an access token, do the following:")):c("",!0),e.accessTokenLink?(l(),o("ol",Vn,[Sn,t("li",Un,[In,t("a",{href:e.accessTokenLink,target:"_blank"},"here",8,Tn),Pn]),An])):e.isAdmin?(l(),o("p",Mn,' To configure an access token, please configure the "Bot client_id" above. ')):c("",!0)])):c("",!0)])])}var En=S(Bs,[["render",Dn]]);const Ln=V({data:()=>({playerVisible:!1,playlist:[],settings:{volume:100,hideVideoImage:{file:"",filename:""},showProgressBar:!1,customCss:""},filter:{tag:""},ws:null,resrinput:"",srinput:"",inited:!1,tab:"playlist",importPlaylist:""}),computed:{tags(){const e=[];return this.playlist.forEach(s=>{s.tags.forEach(i=>{const g=e.findIndex(u=>u.value===i);g===-1?e.push({value:i,count:1}):e[g].count++})}),e},player(){return this.$refs.youtube||{stop:()=>{},play:()=>{},pause:()=>{},unpause:()=>{},setVolume:()=>{},setLoop:()=>{},playing:()=>{}}},filteredPlaylist(){return this.filter.tag===""?this.playlist:this.playlist.filter(e=>e.tags.includes(this.filter.tag))},item(){return this.filteredPlaylist[0]},hasItems(){return this.filteredPlaylist.length!==0},playerstyle(){return this.playerVisible?"":"width:0;height:0;padding:0;margin-bottom:0;"},togglePlayerButtonText(){return this.playerVisible?"Hide Player":"Show Player"},importPlaylistUrl(){return`${location.protocol}//${location.host}/sr/import`},exportPlaylistUrl(){return`${location.protocol}//${location.host}/sr/export`},widgetUrl(){return`${location.protocol}//${location.host}/widget/sr/${this.$me.widgetToken}/`}},methods:{sendSettings(){this.sendCtrl("settings",[this.settings])},onTagUpdated(e){this.updateTag(e[0],e[1])},onPlaylistCtrl(e){this.sendCtrl(e[0],e[1])},applyFilter(e){this.sendCtrl("filter",[{tag:e}])},async doImportPlaylist(){(await et.post(this.importPlaylistUrl,{headers:{Accept:"application/json","Content-Type":"application/json"},body:this.importPlaylist})).status===200?(this.tab="playlist",this.$toasted.success("Import successful")):this.$toasted.error("Import failed")},togglePlayer(){this.playerVisible=!this.playerVisible,this.playerVisible?this.player.playing()||this.play():this.player.stop()},resr(){this.resrinput!==""&&this.sendCtrl("resr",[this.resrinput])},sr(){this.srinput!==""&&this.sendCtrl("sr",[this.srinput])},sendCtrl(e,s){this.sendMsg({event:"ctrl",ctrl:e,args:s})},ended(){this.sendMsg({event:"ended"})},sendMsg(e){this.ws.send(JSON.stringify(e))},play(){this.adjustVolume(this.settings.volume),this.playerVisible&&this.hasItems&&(this.player.play(this.item.yt),this.sendMsg({event:"play",id:this.item.id}))},unpause(){this.hasItems&&(this.player.unpause(),this.sendMsg({event:"unpause",id:this.item.id}))},pause(){this.playerVisible&&this.hasItems&&(this.player.pause(),this.sendMsg({event:"pause"}))},adjustVolume(e){this.player.setVolume(e)},updateTag(e,s){e!==s&&(this.sendCtrl("updatetag",[e,s]),this.tagEditIdx=-1)}},async mounted(){this.$nextTick(()=>{this.ws=new Y(this.$conf.wsBase+"/sr",this.$me.token),this.ws.onMessage("settings",e=>{this.settings=e.settings}),this.ws.onMessage(["pause"],e=>{this.player.playing()&&this.pause()}),this.ws.onMessage(["unpause"],e=>{this.player.playing()||this.unpause()}),this.ws.onMessage(["loop"],e=>{this.player.setLoop(!0)}),this.ws.onMessage(["noloop"],e=>{this.player.setLoop(!1)}),this.ws.onMessage(["onEnded","prev","skip","remove","clear","move","tags"],e=>{this.settings=e.settings;const s=this.filteredPlaylist.length>0?this.filteredPlaylist[0].id:null;this.filter=e.filter,this.playlist=e.playlist;const i=this.filteredPlaylist.length>0?this.filteredPlaylist[0].id:null;s!==i&&this.play()}),this.ws.onMessage(["filter"],e=>{this.settings=e.settings;const s=this.filteredPlaylist.length>0?this.filteredPlaylist[0].id:null;this.filter=e.filter,this.playlist=e.playlist,this.filteredPlaylist.find(i=>i.id===s)||this.play()}),this.ws.onMessage(["dislike","like","video","playIdx","resetStats","shuffle"],e=>{this.settings=e.settings,this.filter=e.filter,this.playlist=e.playlist}),this.ws.onMessage(["add","init"],e=>{this.settings=e.settings,this.filter=e.filter,this.playlist=e.playlist,!this.inited&&!this.player.playing()&&this.play(),this.inited=!0}),this.ws.connect(),this.play()})},unmounted(){this.ws&&this.ws.disconnect()}}),M=e=>(W("data-v-df15de46"),e=e(),H(),e),jn={id:"app"},Rn={id:"top",ref:"top"},On={id:"actionbar",class:"p-1"},Nn=["disabled"],Fn=M(()=>t("i",{class:"fa fa-eraser mr-1"},null,-1)),Jn=M(()=>t("span",{class:"txt"}," Reset stats",-1)),Bn=[Fn,Jn],zn=["disabled"],qn=M(()=>t("i",{class:"fa fa-eject mr-1"},null,-1)),Wn=M(()=>t("span",{class:"txt"}," Clear",-1)),Hn=[qn,Wn],Kn=["disabled"],Gn=M(()=>t("i",{class:"fa fa-random mr-1"},null,-1)),Yn=M(()=>t("span",{class:"txt"}," Shuffle",-1)),Xn=[Gn,Yn],Qn=["disabled","title"],Zn=M(()=>t("i",{class:"fa fa-tv mr-1"},null,-1)),xn={class:"txt"},tl={class:"field has-addons mr-1"},el={class:"control"},sl=["disabled"],nl={class:"control"},ll=["disabled"],ol=M(()=>t("i",{class:"fa fa-search mr-1"},null,-1)),il=h(" from playlist "),al=[ol,il],dl={class:"field has-addons mr-1"},rl={class:"control"},ul=["disabled"],cl={class:"control"},hl=["disabled"],pl=M(()=>t("i",{class:"fa fa-plus mr-1"},null,-1)),ml=h(" from YouTube "),gl=[pl,ml],fl=["disabled","href"],yl={id:"main",ref:"main"},vl={style:{width:"640px","max-width":"100%"}},$l={class:"tabs"},_l=M(()=>t("a",null,"Playlist",-1)),bl=[_l],kl=M(()=>t("a",null,"Settings",-1)),wl=[kl],Cl=M(()=>t("a",null,"Help",-1)),Vl=[Cl],Sl=M(()=>t("a",null,"Tags",-1)),Ul=[Sl],Il=M(()=>t("a",null,"Import/Export",-1)),Tl=[Il],Pl={key:0},Al={class:"mb-1"},Ml=["href"],Dl=M(()=>t("i",{class:"fa fa-download mr-1"},null,-1)),El=h(" Export playlist"),Ll=[Dl,El],jl=M(()=>t("i",{class:"fa fa-upload mr-1"},null,-1)),Rl=h(" Import playlist "),Ol=[jl,Rl],Nl={key:1,id:"help"},Fl={key:2,id:"tags"},Jl={key:4,id:"playlist",class:"table-container"};function Bl(e,s,i,g,u,m){const d=$("navbar"),n=$("youtube"),v=$("help"),w=$("tags-editor"),f=$("song-request-settings"),U=$("playlist-editor");return l(),o("div",jn,[t("div",Rn,[_(d),t("div",On,[t("button",{class:"button is-small mr-1",disabled:e.inited?null:!0,onClick:s[0]||(s[0]=a=>e.sendCtrl("resetStats",[])),title:"Reset stats"},Bn,8,Nn),t("button",{class:"button is-small mr-1",disabled:e.inited?null:!0,onClick:s[1]||(s[1]=a=>e.sendCtrl("clear",[])),title:"Clear"},Hn,8,zn),t("button",{class:"button is-small mr-1",disabled:e.inited?null:!0,onClick:s[2]||(s[2]=a=>e.sendCtrl("shuffle",[])),title:"Shuffle"},Xn,8,Kn),t("button",{class:"button is-small mr-1",disabled:e.inited?null:!0,onClick:s[3]||(s[3]=(...a)=>e.togglePlayer&&e.togglePlayer(...a)),title:e.togglePlayerButtonText},[Zn,t("span",xn,k(e.togglePlayerButtonText),1)],8,Qn),t("div",tl,[t("div",el,[p(t("input",{class:"input is-small",disabled:e.inited?null:!0,"onUpdate:modelValue":s[4]||(s[4]=a=>e.resrinput=a),onKeyup:s[5]||(s[5]=N((...a)=>e.resr&&e.resr(...a),["enter"]))},null,40,sl),[[y,e.resrinput]])]),t("div",nl,[t("button",{class:"button is-small",disabled:e.inited?null:!0,onClick:s[6]||(s[6]=(...a)=>e.resr&&e.resr(...a))},al,8,ll)])]),t("div",dl,[t("div",rl,[p(t("input",{class:"input is-small",disabled:e.inited?null:!0,"onUpdate:modelValue":s[7]||(s[7]=a=>e.srinput=a),onKeyup:s[8]||(s[8]=N((...a)=>e.sr&&e.sr(...a),["enter"]))},null,40,ul),[[y,e.srinput]])]),t("div",cl,[t("button",{class:"button is-small",disabled:e.inited?null:!0,onClick:s[9]||(s[9]=(...a)=>e.sr&&e.sr(...a))},gl,8,hl)])]),t("a",{class:"button is-small mr-1",disabled:e.inited?null:!0,href:e.widgetUrl,target:"_blank"},"Open SR widget",8,fl)])],512),t("div",yl,[t("div",vl,[t("div",{id:"player",class:"video-16-9",style:q(e.playerstyle)},[_(n,{ref:"youtube",onEnded:e.ended,visible:e.playerVisible},null,8,["onEnded","visible"])],4)]),t("div",$l,[t("ul",null,[t("li",{class:I({"is-active":e.tab==="playlist"}),onClick:s[10]||(s[10]=a=>e.tab="playlist")},bl,2),t("li",{class:I({"is-active":e.tab==="settings"}),onClick:s[11]||(s[11]=a=>e.tab="settings")},wl,2),t("li",{class:I({"is-active":e.tab==="help"}),onClick:s[12]||(s[12]=a=>e.tab="help")},Vl,2),t("li",{class:I({"is-active":e.tab==="tags"}),onClick:s[13]||(s[13]=a=>e.tab="tags")},Ul,2),t("li",{class:I({"is-active":e.tab==="import"}),onClick:s[14]||(s[14]=a=>e.tab="import")},Tl,2)])]),e.inited&&e.tab==="import"?(l(),o("div",Pl,[t("div",Al,[t("a",{class:"button is-small mr-1",href:e.exportPlaylistUrl,target:"_blank"},Ll,8,Ml),t("button",{class:"button is-small",onClick:s[15]||(s[15]=(...a)=>e.doImportPlaylist&&e.doImportPlaylist(...a))},Ol)]),p(t("textarea",{class:"textarea mb-1","onUpdate:modelValue":s[16]||(s[16]=a=>e.importPlaylist=a)},null,512),[[y,e.importPlaylist]])])):c("",!0),e.inited&&e.tab==="help"?(l(),o("div",Nl,[_(v)])):c("",!0),e.inited&&e.tab==="tags"?(l(),o("div",Fl,[_(w,{tags:e.tags,onUpdateTag:e.onTagUpdated},null,8,["tags","onUpdateTag"])])):c("",!0),e.inited&&e.tab==="settings"?(l(),j(f,{key:3,id:"settings",modelValue:e.settings,"onUpdate:modelValue":[s[17]||(s[17]=a=>e.settings=a),e.sendSettings]},null,8,["modelValue","onUpdate:modelValue"])):c("",!0),e.inited&&e.tab==="playlist"?(l(),o("div",Jl,[_(U,{playlist:e.playlist,filter:e.filter,onStopPlayer:s[18]||(s[18]=a=>e.player.stop()),onFilterChange:e.applyFilter,onCtrl:e.onPlaylistCtrl},null,8,["playlist","filter","onFilterChange","onCtrl"])])):c("",!0)],512)])}var zl=S(Ln,[["render",Bl],["__scopeId","data-v-df15de46"]]);const J=e=>({type:e,data:{command:"",minInterval:0,minLines:0}}),ot=()=>"",it=()=>({sound:{filename:"",file:"",volume:100},image:{filename:"",file:""},minDurationMs:"1s"}),ql=()=>({steps:3,interval:"1s",intro:"Starting countdown...",outro:"Done!"}),Wl=e=>{switch(e){case"text":return{triggers:[J("command")],action:"text",restrict_to:[],variables:[],variableChanges:[],data:{text:[ot()]}};case"media":return{triggers:[J("command")],action:"media",restrict_to:[],variables:[],variableChanges:[],data:it()};case"countdown":return{triggers:[J("command")],action:"countdown",restrict_to:[],variables:[],variableChanges:[],data:ql()};case"jisho_org_lookup":return{triggers:[J("command")],action:"jisho_org_lookup",restrict_to:[],variables:[],variableChanges:[],data:{}};case"madochan_createword":return{triggers:[J("command")],action:"madochan_createword",restrict_to:[],variables:[],variableChanges:[],data:{model:"100epochs800lenhashingbidirectional.h5",weirdness:1}};case"chatters":return{triggers:[J("command")],action:"chatters",restrict_to:[],variables:[],variableChanges:[],data:{}};default:return null}};var K={newTrigger:J,newText:ot,newMedia:it,newCmd:Wl};const Hl=1,X=1e3*Hl,Q=60*X,Z=60*Q,st=24*Z,at=e=>{if(e==="")throw new Error("unable to parse duration");const s=`${e}`.trim();if(!s)throw new Error("unable to parse duration");if(s.match(/^\d+$/))return parseInt(s,10);const i=s.match(/^(?:(\d+)d)?\s?(?:(\d+)h)?\s?(?:(\d+)m)?\s?(?:(\d+)s)?\s?(?:(\d+)ms)?$/);if(!i)throw new Error("unable to parse duration");const g=i[1]?parseInt(i[1],10):0,u=i[2]?parseInt(i[2],10):0,m=i[3]?parseInt(i[3],10):0,d=i[4]?parseInt(i[4],10):0,n=i[5]?parseInt(i[5],10):0;return d*X+m*Q+u*Z+g*st+n},Kl=e=>{try{return at(e)}catch{return 0}},Gl=e=>{let s=e;const i=Math.floor(s/st);s=s%st;const g=Math.floor(s/Z);s=s%Z;const u=Math.floor(s/Q);s=s%Q;const m=Math.floor(s/X);s=s%X;const d=s,n=["ms","s","m","h","d"],v=[d,m,u,g,i];let w=0;for(;w<v.length&&v[w]===0;)w++;let f=v.length-1;for(;f>=0&&v[f]===0;)f--;const U=[];for(let a=w;a<=f;a++)U.unshift(`${v[a]}${n[a]}`);return U.join(" ")};function Yl(e,s,i){if(i>=e.length)for(var g=i-e.length+1;g--;)e.push(void 0);return e.splice(i,0,e.splice(s,1)[0]),e}const Xl=(e,s)=>{const i=[{regex:/\$args\(\)/g,replacer:(m,d)=>s},{regex:/\$args\((\d+)\)/g,replacer:(m,d)=>s},{regex:/\$var\(([^)]+)\)/g,replacer:(m,d)=>s},{regex:/\$user\.name/g,replacer:()=>s},{regex:/\$([a-z][a-z0-9]*)(?!\()/g,replacer:(m,d)=>m},{regex:/\$customapi\(([^$\)]*)\)\[\'([A-Za-z0-9_ -]+)\'\]/g,replacer:(m,d,n)=>s},{regex:/\$customapi\(([^$\)]*)\)/g,replacer:(m,d)=>s},{regex:/\$urlencode\(([^$\)]*)\)/g,replacer:(m,d)=>s},{regex:/\$calc\((\d+)([*/+-])(\d+)\)/g,replacer:(m,d,n,v)=>s}];let g=e,u;do{u=g;for(let m of i)g=g.replace(m.regex,m.replacer)}while(u!==g);return g},Ql=(e,s=",",i=-1)=>{const g=e.split(s);return i===-1||g.length<=i?g:[...g.slice(0,i-1),g.slice(i-1).join(s)]},Zl=e=>{let s=e.length;for(;s>0;){let i=Math.floor(Math.random()*s);s--;let g=e[s];e[s]=e[i],e[i]=g}return e};var F={arrayMove:Yl,humanDuration:Gl,parseHumanDuration:Kl,mustParseHumanDuration:at,doDummyReplacements:Xl,split:Ql,shuffle:Zl};const xl=V({data:()=>({commands:[],settings:{volume:100},globalVariables:[],ws:null,editIdx:null,editCommand:null,inited:!1,tab:"commands"}),computed:{baseVolume(){return this.settings.volume},widgetUrl(){return`${location.protocol}//${location.host}/widget/media/${this.$me.widgetToken}/`}},methods:{permissionsStr(e){if(!e.restrict_to||e.restrict_to.length===0)return"Everyone";const s=[];return e.restrict_to.includes("broadcaster")&&s.push("Broadcaster"),e.restrict_to.includes("mod")&&s.push("Moderators"),e.restrict_to.includes("sub")&&s.push("Subscribers"),s.join(", ")},add(e){const s=K.newCmd(e);!s||(this.editIdx=this.commands.length,this.editCommand=s)},remove(e){this.commands=this.commands.filter((s,i)=>i!==e),this.sendSave()},edit(e){this.editIdx=e,this.editCommand=this.commands[e]},duplicate(e){this.editIdx=this.commands.length,this.editCommand=JSON.parse(JSON.stringify(this.commands[e]))},editedCommand(e){this.commands[this.editIdx]=e,this.sendSave(),this.editIdx=null,this.editCommand=null},onVolumeChange(){this.sendSave()},sendSave(){this.sendMsg({event:"save",commands:this.commands,settings:this.settings})},sendMsg(e){this.ws.send(JSON.stringify(e))},dragEnd(e){this.commands=F.arrayMove(this.commands,e.oldIndex,e.newIndex),this.sendSave()}},async mounted(){this.ws=new Y(this.$conf.wsBase+"/general",this.$me.token),this.ws.onMessage("init",e=>{this.commands=e.commands,this.settings=e.settings,this.globalVariables=e.globalVariables,this.inited=!0}),this.ws.connect()},unmounted(){this.ws&&this.ws.disconnect()}}),R=e=>(W("data-v-781bb45e"),e=e(),H(),e),to={id:"app"},eo={id:"top",ref:"top"},so={id:"actionbar",class:"p-1"},no=["disabled"],lo=["disabled"],oo=["disabled"],io=["disabled"],ao=["disabled"],ro=["disabled"],uo=["href"],co={id:"main",ref:"main"},ho={class:"tabs"},po=R(()=>t("a",null,"Commands",-1)),mo=[po],go=R(()=>t("a",null,"Settings",-1)),fo=[go],yo={key:1},vo={key:0,class:"table-container"},$o={class:"table is-striped",ref:"table"},_o=R(()=>t("thead",null,[t("tr",null,[t("th"),t("th"),t("th",null,"Trigger"),t("th",null,"Response"),t("th",null,"Type"),t("th",null,"Permissions"),t("th"),t("th")])],-1)),bo=R(()=>t("td",{class:"pt-4 handle"},[t("i",{class:"fa fa-arrows"})],-1)),ko={class:"pl-0 pr-0"},wo=["onClick"],Co=R(()=>t("i",{class:"fa fa-pencil"},null,-1)),Vo=[Co],So={class:"col-triggers"},Uo={key:0},Io={key:0},To=R(()=>t("span",{class:"is-small"},"Timer: ",-1)),Po={key:0},Ao={key:1},Mo={key:2},Do={key:3},Eo={key:0},Lo={key:0,class:"spacerow media-holder media-holder-inline"},jo={key:1,class:"fa fa-plus is-justify-content-center mr-2 ml-2"},Ro={key:2,class:"ml-2"},Oo=h("for at least "),No={key:3,class:"ml-2"},Fo=h("for "),Jo={key:5},Bo={key:0},zo=R(()=>t("span",null,"\u2192",-1)),qo=h(" \u2715 "),Wo=R(()=>t("span",null,"\u2192",-1)),Ho={key:1},Ko={key:1},Go={key:2},Yo=h(" Media("),Xo={key:0},Qo={key:1},Zo={key:2},xo=h(") "),ti={key:3},ei={class:"pl-0 pr-0"},si=R(()=>t("i",{class:"fa fa-trash"},null,-1)),ni=["onClick"],li=R(()=>t("i",{class:"fa fa-clone"},null,-1)),oi=[li],ii={key:1},ai={key:2},di={key:0,class:"table is-striped",ref:"table"},ri=R(()=>t("td",null,[t("code",null,"settings.volume")],-1)),ui=R(()=>t("td",null,"Base volume for all media playing from commands",-1));function ci(e,s,i,g,u,m){const d=$("navbar"),n=$("command-edit"),v=$("duration"),w=$("responsive-image"),f=$("player"),U=$("doubleclick-button"),a=$("draggable"),C=$("volume-slider");return l(),o("div",to,[t("div",eo,[_(d),t("div",so,[t("button",{class:"button is-small mr-1",disabled:e.inited?null:!0,onClick:s[0]||(s[0]=r=>e.add("text")),title:"Send a message to chat"}," Add text ",8,no),t("button",{class:"button is-small mr-1",onClick:s[1]||(s[1]=r=>e.add("media")),disabled:e.inited?null:!0,title:"Display an image and/or play a sound"}," Add media ",8,lo),t("button",{class:"button is-small mr-1",onClick:s[2]||(s[2]=r=>e.add("countdown")),disabled:e.inited?null:!0,title:"Add a countdown or messages spaced by time intervals"}," Add countdown ",8,oo),t("button",{class:"button is-small mr-1",onClick:s[3]||(s[3]=r=>e.add("jisho_org_lookup")),disabled:e.inited?null:!0,title:"Lookup a word via jisho.org"}," Add jisho_org_lookup ",8,io),t("button",{class:"button is-small mr-1",onClick:s[4]||(s[4]=r=>e.add("madochan_createword")),disabled:e.inited?null:!0,title:"Create a word with madochan"}," Add madochan ",8,ao),t("button",{class:"button is-small mr-1",onClick:s[5]||(s[5]=r=>e.add("chatters")),disabled:e.inited?null:!0,title:"Displays users who chatted during the stream"}," Add chatters ",8,ro),t("a",{class:"button is-small",href:e.widgetUrl,target:"_blank"},"Open Media widget",8,uo)])],512),t("div",co,[e.editCommand?(l(),j(n,{key:0,globalVariables:e.globalVariables,modelValue:e.editCommand,mode:e.editIdx>=e.commands.length?"create":"edit",baseVolume:e.baseVolume,"onUpdate:modelValue":e.editedCommand,onCancel:s[6]||(s[6]=r=>e.editCommand=null)},null,8,["globalVariables","modelValue","mode","baseVolume","onUpdate:modelValue"])):c("",!0),t("div",ho,[t("ul",null,[t("li",{class:I({"is-active":e.tab==="commands"}),onClick:s[7]||(s[7]=r=>e.tab="commands")},mo,2),t("li",{class:I({"is-active":e.tab==="settings"}),onClick:s[8]||(s[8]=r=>e.tab="settings")},fo,2)])]),e.inited&&e.tab==="commands"?(l(),o("div",yo,[e.commands.length>0?(l(),o("div",vo,[t("table",$o,[_o,_(a,{modelValue:e.commands,onEnd:e.dragEnd,tag:"tbody",handle:".handle","item-key":"id"},{item:E(({element:r,index:z})=>[t("tr",null,[bo,t("td",ko,[t("button",{class:"button is-small",onClick:A=>e.edit(z)},Vo,8,wo)]),t("td",So,[(l(!0),o(T,null,P(r.triggers,(A,D)=>(l(),o("div",{key:D,class:"spacerow"},[t("div",null,[r.triggers[D].type==="command"?(l(),o("code",Uo,k(r.triggers[D].data.command),1)):c("",!0)]),r.triggers[D].type==="timer"?(l(),o("div",Io,[To,t("code",null,[h(k(r.triggers[D].data.minLines)+" lines, ",1),_(v,{value:r.triggers[D].data.minInterval},null,8,["value"])])])):c("",!0)]))),128))]),t("td",null,[r.action==="jisho_org_lookup"?(l(),o("div",Po," Outputs the translation for the searched word. ")):c("",!0),r.action==="madochan_createword"?(l(),o("div",Ao," Creates a word for a definition. ")):c("",!0),r.action==="chatters"?(l(),o("div",Mo," Outputs the people who chatted during the stream. ")):c("",!0),r.action==="text"?(l(),o("div",Do,[(l(!0),o(T,null,P(r.data.text,(A,D)=>(l(),o(T,{key:D},[t("code",null,k(r.data.text[D]),1),D<r.data.text.length-1?(l(),o("span",Eo,"or")):c("",!0)],64))),128))])):c("",!0),r.action==="media"?(l(),o("div",{key:4,class:I(r.action)},[r.data.image.file||r.data.sound.file?(l(),o("div",Lo,[r.data.image.file?(l(),j(w,{key:0,src:r.data.image.file,title:r.data.image.filename,width:"100px",height:"50px",style:{display:"inline-block"}},null,8,["src","title"])):c("",!0),r.data.image.file&&r.data.sound.file?(l(),o("i",jo)):c("",!0),_(f,{src:r.data.sound.file,name:r.data.sound.filename,volume:r.data.sound.volume,baseVolume:e.baseVolume,class:"button is-small is-justify-content-center"},null,8,["src","name","volume","baseVolume"]),r.data.image.file&&r.data.sound.file?(l(),o("span",Ro,[Oo,_(v,{value:r.data.minDurationMs},null,8,["value"])])):r.data.image.file?(l(),o("span",No,[Fo,_(v,{value:r.data.minDurationMs},null,8,["value"])])):c("",!0)])):c("",!0)],2)):c("",!0),r.action==="countdown"?(l(),o("div",Jo,[(r.data.type||"auto")==="auto"?(l(),o("div",Bo,[t("code",null,k(r.data.intro),1),zo,t("code",null,k(r.data.steps),1),qo,_(v,{value:r.data.interval},null,8,["value"]),Wo,t("code",null,k(r.data.outro),1)])):(l(),o("div",Ho,[(l(!0),o(T,null,P(r.data.actions,(A,D)=>(l(),o(T,{key:D},[A.type==="delay"?(l(),j(v,{key:0,value:A.value},null,8,["value"])):c("",!0),A.type==="text"?(l(),o("code",Ko,k(A.value),1)):c("",!0),A.type==="media"?(l(),o("code",Go,[Yo,A.value.image.file?(l(),o("span",Xo,k(A.value.image.filename),1)):c("",!0),A.value.image.file&&A.value.sound.file?(l(),o("span",Qo,"+")):c("",!0),A.value.sound.file?(l(),o("span",Zo,k(A.value.sound.filename),1)):c("",!0),xo])):c("",!0),D<r.data.actions.length-1?(l(),o("span",ti,"\u2192")):c("",!0)],64))),128))]))])):c("",!0)]),t("td",null,k(r.action),1),t("td",null,k(e.permissionsStr(r)),1),t("td",ei,[_(U,{class:"button is-small mr-1",message:"Are you sure?",timeout:1e3,onDoubleclick:A=>e.remove(z)},{default:E(()=>[si]),_:2},1032,["onDoubleclick"]),t("button",{class:"button is-small",onClick:A=>e.duplicate(z)},oi,8,ni)])])]),_:1},8,["modelValue","onEnd"])],512)])):(l(),o("div",ii,"No commands set up"))])):c("",!0),e.inited&&e.tab==="settings"?(l(),o("div",ai,[e.settings?(l(),o("table",di,[t("tbody",null,[t("tr",null,[ri,t("td",null,[_(C,{modelValue:e.settings.volume,"onUpdate:modelValue":[s[9]||(s[9]=r=>e.settings.volume=r),e.onVolumeChange]},null,8,["modelValue","onUpdate:modelValue"])]),ui])])],512)):c("",!0)])):c("",!0)],512)])}var hi=S(xl,[["render",ci],["__scopeId","data-v-781bb45e"]]);const pi=V({data:()=>({unchangedJson:"{}",changedJson:"{}",settings:null,defaultSettings:null,ws:null}),watch:{settings:{deep:!0,handler(e){this.changedJson=JSON.stringify(e)}}},computed:{changed(){return this.unchangedJson!==this.changedJson},widgetUrl(){return`${location.protocol}//${location.host}/widget/speech-to-text/${this.$me.widgetToken}/`}},methods:{sendSave(){this.sendMsg({event:"save",settings:this.settings})},sendMsg(e){this.ws.send(JSON.stringify(e))}},async mounted(){this.ws=new Y(this.$conf.wsBase+"/speech-to-text",this.$me.token),this.ws.onMessage("init",e=>{this.settings=e.settings,this.defaultSettings=e.defaultSettings,this.unchangedJson=JSON.stringify(e.settings)}),this.ws.connect()},unmounted(){this.ws&&this.ws.disconnect()}}),mi={id:"app"},gi={id:"top",ref:"top"},fi={id:"actionbar",class:"p-1"},yi=["disabled"],vi=["href"],$i={id:"main",ref:"main"},_i={key:0,class:"table is-striped",ref:"table"},bi=t("tr",null,[t("td",{colspan:"3"},"General")],-1),ki=t("td",null,[t("code",null,"settings.style.bgColor")],-1),wi=["disabled"],Ci=t("i",{class:"fa fa-remove"},null,-1),Vi=[Ci],Si=t("td",null,[t("code",null,"settings.style.vAlign")],-1),Ui={class:"select is-small"},Ii=t("option",{value:"top"},"top",-1),Ti=t("option",{value:"bottom"},"bottom",-1),Pi=[Ii,Ti],Ai=["disabled"],Mi=t("i",{class:"fa fa-remove"},null,-1),Di=[Mi],Ei=t("tr",null,[t("td",{colspan:"3"},"Recognition")],-1),Li=t("td",null,[t("code",null,"settings.recognition.lang")],-1),ji=["disabled"],Ri=t("i",{class:"fa fa-remove"},null,-1),Oi=[Ri],Ni=t("td",null,[t("code",null,"settings.recognition.synthesize")],-1),Fi=["disabled"],Ji=t("i",{class:"fa fa-remove"},null,-1),Bi=[Ji],zi=t("td",null,[t("code",null,"settings.recognition.synthesizeLang")],-1),qi=["disabled"],Wi=t("i",{class:"fa fa-remove"},null,-1),Hi=[Wi],Ki=t("td",null,[t("code",null,"settings.recognition.display")],-1),Gi=["disabled"],Yi=t("i",{class:"fa fa-remove"},null,-1),Xi=[Yi],Qi=t("td",null,[t("code",null,"settings.styles.recognition.color")],-1),Zi=["disabled"],xi=t("i",{class:"fa fa-remove"},null,-1),ta=[xi],ea=t("td",null,[t("code",null,"settings.styles.recognition.strokeWidth")],-1),sa=["disabled"],na=t("i",{class:"fa fa-remove"},null,-1),la=[na],oa=t("td",null,[t("code",null,"settings.styles.recognition.strokeColor")],-1),ia=["disabled"],aa=t("i",{class:"fa fa-remove"},null,-1),da=[aa],ra=t("td",null,[t("code",null,"settings.styles.recognition.fontFamily")],-1),ua=["disabled"],ca=t("i",{class:"fa fa-remove"},null,-1),ha=[ca],pa=t("td",null,[t("code",null,"settings.styles.recognition.fontSize")],-1),ma=["disabled"],ga=t("i",{class:"fa fa-remove"},null,-1),fa=[ga],ya=t("td",null,[t("code",null,"settings.styles.recognition.fontWeight")],-1),va=["disabled"],$a=t("i",{class:"fa fa-remove"},null,-1),_a=[$a],ba=t("tr",null,[t("td",{colspan:"3"},"Translation")],-1),ka=t("td",null,[t("code",null,"settings.translation.enabled")],-1),wa=["disabled"],Ca=t("i",{class:"fa fa-remove"},null,-1),Va=[Ca],Sa=t("td",null,[t("code",null,"settings.translation.synthesize")],-1),Ua=["disabled"],Ia=t("i",{class:"fa fa-remove"},null,-1),Ta=[Ia],Pa=t("td",null,[t("code",null,"settings.translation.synthesizeLang")],-1),Aa=["disabled"],Ma=t("i",{class:"fa fa-remove"},null,-1),Da=[Ma],Ea=t("td",null,[t("code",null,"settings.translation.langSrc")],-1),La=["disabled"],ja=t("i",{class:"fa fa-remove"},null,-1),Ra=[ja],Oa=t("td",null,[t("code",null,"settings.translation.langDst")],-1),Na=["disabled"],Fa=t("i",{class:"fa fa-remove"},null,-1),Ja=[Fa],Ba=t("td",null,[t("code",null,"settings.styles.translation.color")],-1),za=["disabled"],qa=t("i",{class:"fa fa-remove"},null,-1),Wa=[qa],Ha=t("td",null,[t("code",null,"settings.styles.translation.strokeWidth")],-1),Ka=["disabled"],Ga=t("i",{class:"fa fa-remove"},null,-1),Ya=[Ga],Xa=t("td",null,[t("code",null,"settings.styles.translation.strokeColor")],-1),Qa=["disabled"],Za=t("i",{class:"fa fa-remove"},null,-1),xa=[Za],td=t("td",null,[t("code",null,"settings.styles.translation.fontFamily")],-1),ed=["disabled"],sd=t("i",{class:"fa fa-remove"},null,-1),nd=[sd],ld=t("td",null,[t("code",null,"settings.styles.translation.fontSize")],-1),od=["disabled"],id=t("i",{class:"fa fa-remove"},null,-1),ad=[id],dd=t("td",null,[t("code",null,"settings.styles.translation.fontWeight")],-1),rd=["disabled"],ud=t("i",{class:"fa fa-remove"},null,-1),cd=[ud],hd=t("tr",null,[t("td",{colspan:"3"},"Debug")],-1),pd=t("td",null,[t("code",null,"settings.status.enabled")],-1),md=["disabled"],gd=t("i",{class:"fa fa-remove"},null,-1),fd=[gd];function yd(e,s,i,g,u,m){const d=$("navbar");return l(),o("div",mi,[t("div",gi,[_(d),t("div",fi,[t("button",{class:"button is-small is-primary mr-1",disabled:!e.changed,onClick:s[0]||(s[0]=(...n)=>e.sendSave&&e.sendSave(...n))}," Save ",8,yi),t("a",{class:"button is-small",href:e.widgetUrl,target:"_blank"},"Open widget",8,vi)])],512),t("div",$i,[e.settings?(l(),o("table",_i,[t("tbody",null,[bi,t("tr",null,[ki,t("td",null,[p(t("input",{class:"input is-small",type:"color","onUpdate:modelValue":s[1]||(s[1]=n=>e.settings.styles.bgColor=n)},null,512),[[y,e.settings.styles.bgColor]])]),t("td",null,[t("button",{class:"button is-small",disabled:e.settings.styles.bgColor===e.defaultSettings.styles.bgColor,onClick:s[2]||(s[2]=n=>e.settings.styles.bgColor=e.defaultSettings.styles.bgColor)},Vi,8,wi)])]),t("tr",null,[Si,t("td",null,[t("div",Ui,[p(t("select",{"onUpdate:modelValue":s[3]||(s[3]=n=>e.settings.styles.vAlign=n)},Pi,512),[[x,e.settings.styles.vAlign]])])]),t("td",null,[t("button",{class:"button is-small",disabled:e.settings.styles.vAlign===e.defaultSettings.styles.vAlign,onClick:s[4]||(s[4]=n=>e.settings.styles.vAlign=e.defaultSettings.styles.vAlign)},Di,8,Ai)])]),Ei,t("tr",null,[Li,t("td",null,[p(t("input",{class:"input is-small",type:"text","onUpdate:modelValue":s[5]||(s[5]=n=>e.settings.recognition.lang=n)},null,512),[[y,e.settings.recognition.lang]])]),t("td",null,[t("button",{class:"button is-small",disabled:e.settings.recognition.lang===e.defaultSettings.recognition.lang,onClick:s[6]||(s[6]=n=>e.settings.recognition.lang=e.defaultSettings.recognition.lang)},Oi,8,ji)])]),t("tr",null,[Ni,t("td",null,[p(t("input",{class:"is-small",type:"checkbox","onUpdate:modelValue":s[7]||(s[7]=n=>e.settings.recognition.synthesize=n)},null,512),[[L,e.settings.recognition.synthesize]])]),t("td",null,[t("button",{class:"button is-small",disabled:e.settings.recognition.synthesize===e.defaultSettings.recognition.synthesize,onClick:s[8]||(s[8]=n=>e.settings.translation.enabled=e.defaultSettings.translation.enabled)},Bi,8,Fi)])]),t("tr",null,[zi,t("td",null,[p(t("input",{class:"input is-small",type:"text","onUpdate:modelValue":s[9]||(s[9]=n=>e.settings.recognition.synthesizeLang=n)},null,512),[[y,e.settings.recognition.synthesizeLang]])]),t("td",null,[t("button",{class:"button is-small",disabled:e.settings.recognition.synthesizeLang===e.defaultSettings.recognition.synthesizeLang,onClick:s[10]||(s[10]=n=>e.settings.recognition.synthesizeLang=e.defaultSettings.recognition.synthesizeLang)},Hi,8,qi)])]),t("tr",null,[Ki,t("td",null,[p(t("input",{class:"is-small",type:"checkbox","onUpdate:modelValue":s[11]||(s[11]=n=>e.settings.recognition.display=n)},null,512),[[L,e.settings.recognition.display]])]),t("td",null,[t("button",{class:"button is-small",disabled:e.settings.recognition.display===e.defaultSettings.recognition.display,onClick:s[12]||(s[12]=n=>e.settings.recognition.display=e.defaultSettings.recognition.display)},Xi,8,Gi)])]),t("tr",null,[Qi,t("td",null,[p(t("input",{class:"input is-small",type:"color","onUpdate:modelValue":s[13]||(s[13]=n=>e.settings.styles.recognition.color=n)},null,512),[[y,e.settings.styles.recognition.color]])]),t("td",null,[t("button",{class:"button is-small",disabled:e.settings.styles.recognition.color===e.defaultSettings.styles.recognition.color,onClick:s[14]||(s[14]=n=>e.settings.styles.recognition.color=e.defaultSettings.styles.recognition.color)},ta,8,Zi)])]),t("tr",null,[ea,t("td",null,[p(t("input",{class:"input is-small",type:"text","onUpdate:modelValue":s[15]||(s[15]=n=>e.settings.styles.recognition.strokeWidth=n)},null,512),[[y,e.settings.styles.recognition.strokeWidth]])]),t("td",null,[t("button",{class:"button is-small",disabled:e.settings.styles.recognition.strokeWidth===e.defaultSettings.styles.recognition.strokeWidth,onClick:s[16]||(s[16]=n=>e.settings.styles.recognition.strokeWidth=e.defaultSettings.styles.recognition.strokeWidth)},la,8,sa)])]),t("tr",null,[oa,t("td",null,[p(t("input",{class:"input is-small",type:"color","onUpdate:modelValue":s[17]||(s[17]=n=>e.settings.styles.recognition.strokeColor=n)},null,512),[[y,e.settings.styles.recognition.strokeColor]])]),t("td",null,[t("button",{class:"button is-small",disabled:e.settings.styles.recognition.strokeColor===e.defaultSettings.styles.recognition.strokeColor,onClick:s[18]||(s[18]=n=>e.settings.styles.recognition.strokeColor=e.defaultSettings.styles.recognition.strokeColor)},da,8,ia)])]),t("tr",null,[ra,t("td",null,[p(t("input",{class:"input is-small",type:"text","onUpdate:modelValue":s[19]||(s[19]=n=>e.settings.styles.recognition.fontFamily=n)},null,512),[[y,e.settings.styles.recognition.fontFamily]])]),t("td",null,[t("button",{class:"button is-small",disabled:e.settings.styles.recognition.fontFamily===e.defaultSettings.styles.recognition.fontFamily,onClick:s[20]||(s[20]=n=>e.settings.styles.recognition.fontFamily=e.defaultSettings.styles.recognition.fontFamily)},ha,8,ua)])]),t("tr",null,[pa,t("td",null,[p(t("input",{class:"input is-small",type:"text","onUpdate:modelValue":s[21]||(s[21]=n=>e.settings.styles.recognition.fontSize=n)},null,512),[[y,e.settings.styles.recognition.fontSize]])]),t("td",null,[t("button",{class:"button is-small",disabled:e.settings.styles.recognition.fontSize===e.defaultSettings.styles.recognition.fontSize,onClick:s[22]||(s[22]=n=>e.settings.styles.recognition.fontSize=e.defaultSettings.styles.recognition.fontSize)},fa,8,ma)])]),t("tr",null,[ya,t("td",null,[p(t("input",{class:"input is-small",type:"text","onUpdate:modelValue":s[23]||(s[23]=n=>e.settings.styles.recognition.fontWeight=n)},null,512),[[y,e.settings.styles.recognition.fontWeight]])]),t("td",null,[t("button",{class:"button is-small",disabled:e.settings.styles.recognition.fontWeight===e.defaultSettings.styles.recognition.fontWeight,onClick:s[24]||(s[24]=n=>e.settings.styles.weight=e.defaultSettings.styles.weight)},_a,8,va)])]),ba,t("tr",null,[ka,t("td",null,[p(t("input",{class:"is-small",type:"checkbox","onUpdate:modelValue":s[25]||(s[25]=n=>e.settings.translation.enabled=n)},null,512),[[L,e.settings.translation.enabled]])]),t("td",null,[t("button",{class:"button is-small",disabled:e.settings.translation.enabled===e.defaultSettings.translation.enabled,onClick:s[26]||(s[26]=n=>e.settings.translation.enabled=e.defaultSettings.translation.enabled)},Va,8,wa)])]),t("tr",null,[Sa,t("td",null,[p(t("input",{class:"is-small",type:"checkbox","onUpdate:modelValue":s[27]||(s[27]=n=>e.settings.translation.synthesize=n)},null,512),[[L,e.settings.translation.synthesize]])]),t("td",null,[t("button",{class:"button is-small",disabled:e.settings.translation.synthesize===e.defaultSettings.translation.synthesize,onClick:s[28]||(s[28]=n=>e.settings.translation.synthesize=e.defaultSettings.translation.synthesize)},Ta,8,Ua)])]),t("tr",null,[Pa,t("td",null,[p(t("input",{class:"input is-small",type:"text","onUpdate:modelValue":s[29]||(s[29]=n=>e.settings.translation.synthesizeLang=n)},null,512),[[y,e.settings.translation.synthesizeLang]])]),t("td",null,[t("button",{class:"button is-small",disabled:e.settings.translation.synthesizeLang===e.defaultSettings.translation.synthesizeLang,onClick:s[30]||(s[30]=n=>e.settings.translation.synthesizeLang=e.defaultSettings.translation.synthesizeLang)},Da,8,Aa)])]),t("tr",null,[Ea,t("td",null,[p(t("input",{class:"input is-small",type:"text","onUpdate:modelValue":s[31]||(s[31]=n=>e.settings.translation.langSrc=n)},null,512),[[y,e.settings.translation.langSrc]])]),t("td",null,[t("button",{class:"button is-small",disabled:e.settings.translation.langSrc===e.defaultSettings.translation.langSrc,onClick:s[32]||(s[32]=n=>e.settings.translation.langSrc=e.defaultSettings.translation.langSrc)},Ra,8,La)])]),t("tr",null,[Oa,t("td",null,[p(t("input",{class:"input is-small",type:"text","onUpdate:modelValue":s[33]||(s[33]=n=>e.settings.translation.langDst=n)},null,512),[[y,e.settings.translation.langDst]])]),t("td",null,[t("button",{class:"button is-small",disabled:e.settings.translation.langDst===e.defaultSettings.translation.langDst,onClick:s[34]||(s[34]=n=>e.settings.translation.langDst=e.defaultSettings.translation.langDst)},Ja,8,Na)])]),t("tr",null,[Ba,t("td",null,[p(t("input",{class:"input is-small",type:"color","onUpdate:modelValue":s[35]||(s[35]=n=>e.settings.styles.translation.color=n)},null,512),[[y,e.settings.styles.translation.color]])]),t("td",null,[t("button",{class:"button is-small",disabled:e.settings.styles.translation.color===e.defaultSettings.styles.translation.color,onClick:s[36]||(s[36]=n=>e.settings.styles.translation.color=e.defaultSettings.styles.translation.color)},Wa,8,za)])]),t("tr",null,[Ha,t("td",null,[p(t("input",{class:"input is-small",type:"text","onUpdate:modelValue":s[37]||(s[37]=n=>e.settings.styles.translation.strokeWidth=n)},null,512),[[y,e.settings.styles.translation.strokeWidth]])]),t("td",null,[t("button",{class:"button is-small",disabled:e.settings.styles.translation.strokeWidth===e.defaultSettings.styles.translation.strokeWidth,onClick:s[38]||(s[38]=n=>e.settings.styles.translation.strokeWidth=e.defaultSettings.styles.translation.strokeWidth)},Ya,8,Ka)])]),t("tr",null,[Xa,t("td",null,[p(t("input",{class:"input is-small",type:"color","onUpdate:modelValue":s[39]||(s[39]=n=>e.settings.styles.translation.strokeColor=n)},null,512),[[y,e.settings.styles.translation.strokeColor]])]),t("td",null,[t("button",{class:"button is-small",disabled:e.settings.styles.translation.strokeColor===e.defaultSettings.styles.translation.strokeColor,onClick:s[40]||(s[40]=n=>e.settings.styles.translation.strokeColor=e.defaultSettings.styles.translation.strokeColor)},xa,8,Qa)])]),t("tr",null,[td,t("td",null,[p(t("input",{class:"input is-small",type:"text","onUpdate:modelValue":s[41]||(s[41]=n=>e.settings.styles.translation.fontFamily=n)},null,512),[[y,e.settings.styles.translation.fontFamily]])]),t("td",null,[t("button",{class:"button is-small",disabled:e.settings.styles.translation.fontFamily===e.defaultSettings.styles.translation.fontFamily,onClick:s[42]||(s[42]=n=>e.settings.styles.translation.fontFamily=e.defaultSettings.styles.translation.fontFamily)},nd,8,ed)])]),t("tr",null,[ld,t("td",null,[p(t("input",{class:"input is-small",type:"text","onUpdate:modelValue":s[43]||(s[43]=n=>e.settings.styles.translation.fontSize=n)},null,512),[[y,e.settings.styles.translation.fontSize]])]),t("td",null,[t("button",{class:"button is-small",disabled:e.settings.styles.translation.fontSize===e.defaultSettings.styles.translation.fontSize,onClick:s[44]||(s[44]=n=>e.settings.styles.translation.fontSize=e.defaultSettings.styles.translation.fontSize)},ad,8,od)])]),t("tr",null,[dd,t("td",null,[p(t("input",{class:"input is-small",type:"text","onUpdate:modelValue":s[45]||(s[45]=n=>e.settings.styles.translation.fontWeight=n)},null,512),[[y,e.settings.styles.translation.fontWeight]])]),t("td",null,[t("button",{class:"button is-small",disabled:e.settings.styles.translation.fontWeight===e.defaultSettings.styles.translation.fontWeight,onClick:s[46]||(s[46]=n=>e.settings.styles.weight=e.defaultSettings.styles.weight)},cd,8,rd)])]),hd,t("tr",null,[pd,t("td",null,[p(t("input",{class:"is-small",type:"checkbox","onUpdate:modelValue":s[47]||(s[47]=n=>e.settings.status.enabled=n)},null,512),[[L,e.settings.status.enabled]])]),t("td",null,[t("button",{class:"button is-small",disabled:e.settings.status.enabled===e.defaultSettings.status.enabled,onClick:s[48]||(s[48]=n=>e.settings.status.enabled=e.defaultSettings.status.enabled)},fd,8,md)])])])],512)):c("",!0)],512)])}var vd=S(pi,[["render",yd]]);const $d=V({data:()=>({pass:"",error:"",success:!1}),computed:{canSubmit(){return this.pass&&!this.error}},methods:{async submit(){const s=new URLSearchParams(window.location.search).get("t");this.success=!1,this.error="";const i=await fetch("/api/user/_reset_password",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({pass:this.pass,token:s})});if(i.status===200)this.success=!0;else try{this.error=(await i.json()).reason}catch{this.error="Unknown error"}}}}),_d={class:"center-screen"},bd=t("h1",{class:"title is-6"},"Hyottoko.club",-1),kd={key:0,class:"field has-background-success-light has-text-success-dark"},wd=h(" Password successfully set. Click "),Cd=h("here"),Vd=h(" to login. "),Sd={key:1},Ud={key:0,class:"field has-background-danger-light has-text-danger-dark"},Id={class:"field"},Td={class:"control has-icons-left"},Pd=t("span",{class:"icon is-small is-left"},[t("i",{class:"fa fa-lock"})],-1),Ad={class:"field"},Md=["disabled"];function Dd(e,s,i,g,u,m){const d=$("router-link");return l(),o("div",_d,[bd,e.success?(l(),o("div",kd,[wd,_(d,{to:{name:"login"}},{default:E(()=>[Cd]),_:1}),Vd])):(l(),o("div",Sd,[e.error?(l(),o("div",Ud,k(e.error),1)):c("",!0),t("div",Id,[t("div",Td,[p(t("input",{class:"input is-small",type:"password",placeholder:"New Password","onUpdate:modelValue":s[0]||(s[0]=n=>e.pass=n),onKeyup:[s[1]||(s[1]=n=>e.error=""),s[2]||(s[2]=N((...n)=>e.submit&&e.submit(...n),["enter"]))]},null,544),[[y,e.pass]]),Pd])]),t("div",Ad,[t("button",{class:"button is-small is-primary",disabled:e.canSubmit?null:!0,onClick:s[3]||(s[3]=(...n)=>e.submit&&e.submit(...n))}," Save Password ",8,Md)])]))])}var Ed=S($d,[["render",Dd]]);const Ld=V({data:()=>({email:"",error:"",success:!1}),methods:{async submit(){this.success=!1,this.error="";const e=await fetch("/api/user/_request_password_reset",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:this.email})});if(e.status===200)this.success=!0;else try{this.error=(await e.json()).reason}catch{this.error="Unknown error"}}}}),jd={class:"center-screen"},Rd=t("h1",{class:"title is-6"},"Hyottoko.club",-1),Od={key:0,class:"field has-background-success-light has-text-success-dark"},Nd=h(" Password-reset mail sent. Click "),Fd=h("here"),Jd=h(" to login. "),Bd={key:1},zd={key:0,class:"field has-background-danger-light has-text-danger-dark"},qd={class:"field"},Wd={class:"control has-icons-left"},Hd=t("span",{class:"icon is-small is-left"},[t("i",{class:"fa fa-envelope"})],-1),Kd={class:"field"};function Gd(e,s,i,g,u,m){const d=$("router-link");return l(),o("div",jd,[Rd,e.success?(l(),o("div",Od,[Nd,_(d,{to:{name:"login"}},{default:E(()=>[Fd]),_:1}),Jd])):(l(),o("form",Bd,[e.error?(l(),o("div",zd,k(e.error),1)):c("",!0),t("div",qd,[t("div",Wd,[p(t("input",{class:"input is-small",type:"email",placeholder:"Email","onUpdate:modelValue":s[0]||(s[0]=n=>e.email=n),onKeyup:s[1]||(s[1]=n=>e.error="")},null,544),[[y,e.email]]),Hd])]),t("div",Kd,[t("span",{class:"button is-small is-primary",onClick:s[2]||(s[2]=(...n)=>e.submit&&e.submit(...n))},"Request Password Reset")])]))])}var Yd=S(Ld,[["render",Gd]]);const Xd=V({name:"upload",props:{accept:String,label:String},data:()=>({uploading:!1,progress:0}),computed:{uploadPercent(){return Math.round(this.progress*100)},buttonText(){return this.uploading?`Uploading (${this.uploadPercent}%)`:this.label||"Upload File"},progressStyle(){if(!this.uploading)return{};const e=this.uploadPercent,s="rgba(0,255,0, .5)";return{background:`linear-gradient(90deg, ${s} 0%, ${s} ${e}%, transparent ${e}%)`}}},methods:{async upload(e){const s=e.target.files[0];if(!s)return;this.uploading=!0;const i=new FormData;i.append("file",s,s.name);const g=await et.post("/api/upload",{body:i,onUploadProgress:m=>{this.progress=m.loaded/m.total}});this.uploading=!1;const u=await g.json();this.$emit("uploaded",u)}}}),Qd=e=>(W("data-v-f8e36c38"),e=e(),H(),e),Zd={class:"upload"},xd=["disabled","accept"],tr={class:"button is-small"},er=Qd(()=>t("i",{class:"fa fa-upload mr-1"},null,-1));function sr(e,s,i,g,u,m){return l(),o("label",Zd,[t("input",{type:"file",disabled:e.uploading,style:{display:"none"},onChange:s[0]||(s[0]=(...d)=>e.upload&&e.upload(...d)),accept:e.accept},null,40,xd),t("span",tr,[er,h(" "+k(e.buttonText),1)]),t("span",{class:"progress",style:q(e.progressStyle)},null,4)])}var nr=S(Xd,[["render",sr],["__scopeId","data-v-f8e36c38"]]);const lr=V({props:{modelValue:{type:String,required:!0}},data:()=>({value:""}),methods:{valChange(){this.$emit("update:modelValue",this.value)}},created(){this.value=this.modelValue}});function or(e,s,i,g,u,m){return p((l(),o("textarea",{class:"textarea","onUpdate:modelValue":[s[0]||(s[0]=d=>e.value=d),s[1]||(s[1]=(...d)=>e.valChange&&e.valChange(...d))]},null,512)),[[y,e.value]])}var ir=S(lr,[["render",or]]);const ar=V({props:{modelValue:{required:!0}},emits:["update:modelValue"],data:()=>({v:"",valid:!0}),computed:{classes(){return this.valid?[]:["has-background-danger-light","has-text-danger-dark"]}},mounted(){this.v=`${this.modelValue}`},watch:{v:{handler(e){try{const s=F.doDummyReplacements(e,"0");F.mustParseHumanDuration(s),this.valid=!0}catch{this.valid=!1}this.$emit("update:modelValue",e)}},modelValue:{handler(e){this.v=`${e}`}}}});function dr(e,s,i,g,u,m){return p((l(),o("input",{class:I(["input is-small spaceinput",e.classes]),"onUpdate:modelValue":s[0]||(s[0]=d=>e.v=d)},null,2)),[[y,e.v]])}var rr=S(ar,[["render",dr]]);const ur=V({name:"player",props:{src:String,name:String,volume:{required:!0},baseVolume:{default:100}},data:()=>({audio:null,playing:!1}),created:function(){this.load(),this.$watch("src",()=>{this.load()})},computed:{cls(){return this.playing?"fa-stop":"fa-play"}},methods:{toggle(){if(this.playing)this.audio.pause(),this.audio.currentTime=0;else{const e=parseInt(`${this.baseVolume}`,10)/100,s=parseInt(`${this.volume}`,10)/100;this.audio.volume=e*s,this.audio.play()}this.playing=!this.playing},load(){this.audio&&(this.audio.pause(),this.audio=null),this.audio=new Audio("/uploads/"+this.src),this.audio.addEventListener("ended",()=>{this.playing=!1}),this.playing=!1}}});function cr(e,s,i,g,u,m){return e.src?(l(),o("span",{key:0,class:"player",onClick:s[0]||(s[0]=(...d)=>e.toggle&&e.toggle(...d))},[h(k(e.name)+" ",1),t("i",{class:I(["fa ml-1",e.cls])},null,2)])):c("",!0)}var hr=S(ur,[["render",cr]]);const pr=V({name:"slider",props:{modelValue:{type:Number,required:!0},iconLeft:String,iconRight:String,min:{type:Number,default:0},max:{type:Number,default:100}},data:()=>({curVal:100}),methods:{valChange(){this.$emit("update:modelValue",parseInt(`${this.curVal}`,10))}},created(){this.curVal=this.modelValue}}),mr={class:"columns"},gr={class:"column is-four-fifth"},fr={class:"control has-icons-left has-icons-right range slider"},yr=["min","max"],vr={class:"icon is-small is-left"},$r={class:"icon is-small is-right"},_r={class:"column is-one-fifth"};function br(e,s,i,g,u,m){return l(),o("div",mr,[t("div",gr,[t("div",fr,[p(t("input",{type:"range",class:"input is-small",min:e.min,max:e.max,"onUpdate:modelValue":[s[0]||(s[0]=d=>e.curVal=d),s[1]||(s[1]=(...d)=>e.valChange&&e.valChange(...d))]},null,8,yr),[[y,e.curVal]]),t("span",vr,[t("i",{class:I(["fa",e.iconLeft])},null,2)]),t("span",$r,[t("i",{class:I(["fa",e.iconRight])},null,2)])])]),t("div",_r,[p(t("input",{type:"number",class:"input is-small","onUpdate:modelValue":[s[2]||(s[2]=d=>e.curVal=d),s[3]||(s[3]=(...d)=>e.valChange&&e.valChange(...d))]},null,512),[[y,e.curVal]])])])}var kr=S(pr,[["render",br],["__scopeId","data-v-0799d56c"]]);const wr=V({name:"volume-slider",props:{modelValue:{required:!0}},data:()=>({volume:100}),methods:{valChange(){this.$emit("update:modelValue",this.volume)}},created(){this.volume=parseInt(this.modelValue,10)}});function Cr(e,s,i,g,u,m){const d=$("slider");return l(),j(d,{class:"volume-slider",iconLeft:"fa-volume-down",iconRight:"fa-volume-up",min:0,max:100,modelValue:e.volume,"onUpdate:modelValue":[s[0]||(s[0]=n=>e.volume=n),e.valChange]},null,8,["modelValue","onUpdate:modelValue"])}var Vr=S(wr,[["render",Cr]]);const Sr=V({name:"responsive-image",props:{src:String,title:String,height:{type:String,default:"100%"},width:{type:String,default:"100%"}},computed:{style(){return{display:"inline-block",verticalAlign:"text-bottom",backgroundImage:`url(/uploads/${encodeURIComponent(this.src)})`,backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"center",width:this.width,height:this.height}}}}),Ur=["title"];function Ir(e,s,i,g,u,m){return l(),o("div",{class:"responsive-image",style:q(e.style),title:e.title},null,12,Ur)}var Tr=S(Sr,[["render",Ir]]),Pr="/assets/hyottoko.30d2bcb9.png";const Ar=V({name:"navbar",computed:{user(){var e,s;return((s=(e=this.$me)==null?void 0:e.user)==null?void 0:s.name)||""}},data:()=>({linksStart:[{to:{name:"index"},text:"Widgets"},{to:{name:"commands"},text:"Commands"},{to:{name:"variables"},text:"Variables"},{to:{name:"sr"},text:"Song Request"},{to:{name:"speech-to-text"},text:"Speech-To-Text"},{to:{name:"drawcast"},text:"Drawcast"},{to:{name:"settings"},text:"Settings"}],burgerActive:!1}),methods:{toggleBurgerMenu(){this.burgerActive=!this.burgerActive},async onLogoutClick(){if((await(await fetch("/api/logout",{method:"POST"})).json()).success)this.$router.push({name:"login"});else throw new Error("[2021-09-25 18:36]")}}}),Mr={class:"navbar",role:"navigation","aria-label":"main navigation"},Dr={class:"navbar-brand"},Er=t("img",{src:Pr,width:"32",height:"32",alt:"hyottoko.club",class:"flip-horizontal mr-1"},null,-1),Lr={class:"greeting"},jr=t("span",{"aria-hidden":"true"},null,-1),Rr=t("span",{"aria-hidden":"true"},null,-1),Or=t("span",{"aria-hidden":"true"},null,-1),Nr=[jr,Rr,Or],Fr={class:"navbar-start"},Jr={class:"navbar-end"};function Br(e,s,i,g,u,m){const d=$("router-link");return l(),o("nav",Mr,[t("div",Dr,[_(d,{class:"navbar-item",to:{name:"index"}},{default:E(()=>[Er,t("span",Lr,"Welcome back, "+k(e.user),1)]),_:1}),t("a",{role:"button",class:I(["navbar-burger",{"is-active":e.burgerActive}]),"aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample",onClick:s[0]||(s[0]=(...n)=>e.toggleBurgerMenu&&e.toggleBurgerMenu(...n))},Nr,2)]),t("div",{id:"navbarBasicExample",class:I(["navbar-menu",{"is-active":e.burgerActive}])},[t("div",Fr,[(l(!0),o(T,null,P(e.linksStart,(n,v)=>(l(),j(d,{class:"navbar-item",key:v,to:n.to},{default:E(()=>[h(k(n.text),1)]),_:2},1032,["to"]))),128))]),t("div",Jr,[t("a",{class:"navbar-item",onClick:s[1]||(s[1]=(...n)=>e.onLogoutClick&&e.onLogoutClick(...n))},"Logout")])],2)])}var zr=S(Ar,[["render",Br]]);const qr=V({props:{value:{required:!0}},computed:{tag(){try{return F.mustParseHumanDuration(this.value),"span"}catch{return"code"}},humanReadable(){try{return F.humanDuration(F.mustParseHumanDuration(this.value))}catch{return this.value}}}}),Wr={key:0},Hr={key:1};function Kr(e,s,i,g,u,m){return e.tag==="span"?(l(),o("span",Wr,k(e.humanReadable),1)):(l(),o("code",Hr,k(e.humanReadable),1))}var Gr=S(qr,[["render",Kr]]);const Yr=V({emits:["click","doubleclick"],props:{message:{type:String,required:!0},timeout:{type:Number,required:!0}},data:()=>({time:null,timer:null}),computed:{indicatorStyle(){return this.timer===null?{}:{width:`${this.time/this.timeout*100}%`}}},methods:{onClick(e){this.timer===null?(this.$emit("click"),this.time=this.timeout,this.timer=setInterval(()=>{this.time-=10,this.time<=0&&(clearInterval(this.timer),this.timer=null,this.time=null)},10)):(this.$emit("doubleclick"),this.timer&&(clearInterval(this.timer),this.timer=null,this.time=null))}}}),Xr={key:0,class:"doubleclick-button-message mr-2 p-1 has-text-danger"};function Qr(e,s,i,g,u,m){return l(),o("button",{class:"doubleclick-button",onClick:s[0]||(s[0]=(...d)=>e.onClick&&e.onClick(...d))},[ct(e.$slots,"default",{},void 0,!0),e.timer?(l(),o("span",Xr,[h(k(e.message)+" ",1),t("span",{class:"doubleclick-button-timout-indicator",style:q(e.indicatorStyle)},null,4)])):c("",!0)])}var Zr=S(Yr,[["render",Qr],["__scopeId","data-v-72e9e0bd"]]);const B=(...e)=>console.log("[youtube.js]",...e);let dt=!1;function xr(){return dt?(B("ytapi ALREADY ready"),Promise.resolve()):new Promise(e=>{const s=document.createElement("script");s.src="https://www.youtube.com/iframe_api",document.head.append(s),window.onYouTubeIframeAPIReady=()=>{dt=!0,B("ytapi ready"),e()}})}function tu(e){return new Promise(s=>{B("create player on "+e);const i=new YT.Player(e,{playerVars:{iv_load_policy:3,modestbranding:1},events:{onReady:()=>{B("player ready"),s(i)}}})})}async function eu(e){return await xr(),await tu(e)}const su=V({name:"youtube",props:{visible:{type:Boolean,default:!0}},data:()=>({id:"",yt:null,toplay:null,tovolume:null,tryPlayInterval:null}),created(){this.id=`yt-${Math.floor(Math.random()*99+1)}-${new Date().getTime()}`},methods:{getDuration(){return this.yt?this.yt.getDuration():0},getCurrentTime(){return this.yt?this.yt.getCurrentTime():0},getProgress(){const e=this.getDuration(),s=this.getCurrentTime();return e?s/e:0},stop(){this.yt&&this.yt.stopVideo()},stopTryPlayInterval(){this.tryPlayInterval&&(clearInterval(this.tryPlayInterval),this.tryPlayInterval=null)},tryPlay(){if(this.stopTryPlayInterval(),!this.visible)return;this.yt.playVideo();let e=20;this.tryPlayInterval=setInterval(()=>{if(B("playing",this.playing(),"triesRemaining",e),--e,this.playing()||e<0){B("stopping interval"),this.stopTryPlayInterval();return}this.yt.playVideo()},250)},play(e){this.yt?(this.yt.cueVideoById(e),this.tryPlay()):this.toplay=e},pause(){this.yt&&this.yt.pauseVideo()},unpause(){this.yt&&this.tryPlay()},setVolume(e){this.yt?this.yt.setVolume(e):this.tovolume=e},setLoop(e){this.loop=e},playing(){return this.yt&&this.yt.getPlayerState()===1}},async mounted(){this.yt=await eu(this.id),this.tovolume!==null&&this.yt.setVolume(this.tovolume),this.toplay!==null&&(B("trying to play.."),this.play(this.toplay)),this.yt.addEventListener("onStateChange",e=>{e.data===YT.PlayerState.CUED?this.tryPlay():e.data===YT.PlayerState.ENDED&&(this.loop?this.tryPlay():this.$emit("ended"))})}}),nu=["id"];function lu(e,s,i,g,u,m){return l(),o("div",{id:e.id},null,8,nu)}var ou=S(su,[["render",lu]]);const iu=V({props:{modelValue:{type:Object,required:!0},mode:{type:String,required:!0},globalVariables:{type:Array,required:!0},baseVolume:{default:100}},emits:["update:modelValue","cancel"],data:()=>({item:null,newtrigger:"command",variableChangeFocusIdx:-1}),mounted(){this.item=JSON.parse(JSON.stringify(this.modelValue)),this.$nextTick(()=>{this.$el.querySelector('input[type="text"]').focus()})},watch:{modelValue:{handler(e){this.item=JSON.parse(JSON.stringify(e))}}},methods:{addtxt(){this.item.data.text.push(K.newText())},addtrigger(){this.item.triggers.push(K.newTrigger(this.newtrigger))},onAddVariableChange(){this.item.variableChanges.push({name:"",change:"set",value:""})},rmVariableChange(e){this.item.variableChanges=this.item.variableChanges.filter((s,i)=>i!==e)},onAddVariable(){this.item.variables.push({name:"",value:""})},rmVariable(e){this.item.variables=this.item.variables.filter((s,i)=>i!==e)},onSaveClick(){this.$emit("update:modelValue",this.item)},onCancelClick(){this.$emit("cancel")},onCloseClick(){this.$emit("cancel")},onOverlayClick(){this.$emit("cancel")},mediaSndUploaded(e){this.item.data.sound.filename=e.originalname,this.item.data.sound.file=e.filename},mediaImgUploaded(e){this.item.data.image.filename=e.originalname,this.item.data.image.file=e.filename},rmtxt(e){this.item.data.text=this.item.data.text.filter((s,i)=>i!==e)},rmtrigger(e){this.item.triggers=this.item.triggers.filter((s,i)=>i!==e)},autocompletableVariables(e){const s=this.item.variables.slice().map(i=>({var:i,type:"local"}));return this.globalVariables.forEach(i=>{s.find(g=>g.var.name===i.name)||s.push({var:i,type:"global"})}),s.filter(i=>i.var.name.startsWith(e)).slice(0,10)},onVarChangeInputBlur(){setTimeout(()=>{this.variableChangeFocusIdx=-1},50)}},computed:{valid(){for(const e of this.item.triggers)if(e.type==="command"){if(!e.data.command)return!1}else if(e.type==="timer"){try{F.mustParseHumanDuration(e.data.minInterval)}catch{return!1}const s=parseInt(e.data.minLines,10);if(isNaN(s))return!1}if(this.item.action==="text"){for(const e of this.item.data.text)if(e==="")return!1}return!0},title(){const e={create:"Create new ",edit:"Edit "},s={jisho_org_lookup:"jisho.org lookup",madochan_createword:"madochan",chatters:"chatters command",media:"media command",countdown:"countdown",text:"command"};return`${e[this.mode]}${s[this.item.action]}`}}}),b=e=>(W("data-v-1bf0a91c"),e=e(),H(),e),au={key:0,class:"modal is-active"},du={class:"modal-card"},ru={class:"modal-card-head"},uu={class:"modal-card-title"},cu={class:"modal-card-body"},hu={class:"table is-striped"},pu=b(()=>t("td",null,"Triggers:",-1)),mu={key:0,class:"field has-addons"},gu={class:"control has-icons-left"},fu=["onUpdate:modelValue"],yu=b(()=>t("span",{class:"icon is-small is-left"},[t("i",{class:"fa fa-comments-o"})],-1)),vu={class:"control"},$u=["disabled","onClick"],_u=b(()=>t("i",{class:"fa fa-remove"},null,-1)),bu=[_u],ku={key:1,class:"timer-trigger"},wu={class:"control"},Cu=["disabled","onClick"],Vu=b(()=>t("i",{class:"fa fa-remove"},null,-1)),Su=[Vu],Uu={class:"columns"},Iu=b(()=>t("div",{class:"column is-one-third"},[t("label",null,"Min. Lines")],-1)),Tu={class:"column is-two-third"},Pu={class:"control has-icons-left"},Au=["onUpdate:modelValue"],Mu=b(()=>t("span",{class:"icon is-small is-left"},[t("i",{class:"fa fa-comments-o"})],-1)),Du={class:"columns"},Eu=b(()=>t("div",{class:"column is-one-third"},[t("label",null,"Min. Interval")],-1)),Lu={class:"column is-two-third"},ju={class:"control has-icons-left has-icons-right"},Ru=b(()=>t("span",{class:"icon is-small is-left"},[t("i",{class:"fa fa-hourglass"})],-1)),Ou=b(()=>t("p",{class:"help"}," Command will be triggered when at least min. lines chat messages arrived AND time interval have passed. ",-1)),Nu={class:"field has-addons mr-1"},Fu={class:"control has-icons-left"},Ju={key:0,class:"select is-small"},Bu=b(()=>t("option",{value:"command"},"Command",-1)),zu=b(()=>t("option",{value:"timer"},"Timer",-1)),qu=[Bu,zu],Wu=b(()=>t("i",{class:"fa fa-plus mr-1"},null,-1)),Hu=h(" Add "),Ku=[Wu,Hu],Gu={key:0},Yu=b(()=>t("td",null,"Response:",-1)),Xu=b(()=>t("td",null,"Outputs the translation for the searched word.",-1)),Qu=[Yu,Xu],Zu={key:1},xu=b(()=>t("td",null,"Response:",-1)),tc=b(()=>t("td",null,"Creates a word for a definition.",-1)),ec=[xu,tc],sc={key:2},nc=b(()=>t("td",null,"Model:",-1)),lc={class:"control"},oc=b(()=>t("div",{class:"help"},[h(" For possible values refer to "),t("a",{href:"https://madochan.hyottoko.club/",target:"_blank"},"madochan")],-1)),ic={key:3},ac=b(()=>t("td",null,"Weirdness:",-1)),dc={class:"control"},rc=b(()=>t("div",{class:"help"},[h(" For possible values refer to "),t("a",{href:"https://madochan.hyottoko.club/",target:"_blank"},"madochan")],-1)),uc={key:4},cc=b(()=>t("td",null,"Response:",-1)),hc=b(()=>t("td",null,"Outputs the people who chatted during the stream.",-1)),pc=[cc,hc],mc={key:5},gc=b(()=>t("td",null,"Response:",-1)),fc=["onUpdate:modelValue"],yc=["disabled","onClick"],vc=b(()=>t("i",{class:"fa fa-remove"},null,-1)),$c=[vc],_c={class:"field"},bc=b(()=>t("i",{class:"fa fa-plus mr-1"},null,-1)),kc=h(" Add response "),wc=[bc,kc],Cc=b(()=>t("div",null,[t("p",{class:"help"}," If multiple responses exist, a random one will be used when the command is triggered. ")],-1)),Vc={key:6},Sc=b(()=>t("td",null,"Image:",-1)),Uc=b(()=>t("i",{class:"fa fa-remove mr-1"},null,-1)),Ic=h(" Remove "),Tc=[Uc,Ic],Pc={key:2},Ac={key:7},Mc=b(()=>t("td",null,"Sound:",-1)),Dc=b(()=>t("i",{class:"fa fa-remove mr-1"},null,-1)),Ec=h(" Remove "),Lc=[Dc,Ec],jc={key:3},Rc={key:8},Oc=b(()=>t("td",null,"Duration:",-1)),Nc={class:"control has-icons-left"},Fc=b(()=>t("span",{class:"icon is-small is-left"},[t("i",{class:"fa fa-hourglass"})],-1)),Jc={key:9},Bc=b(()=>t("td",null,"Settings",-1)),zc=b(()=>t("td",null,"Variables:",-1)),qc={key:0},Wc=b(()=>t("thead",null,[t("tr",null,[t("td",null,"Name"),t("td",null,"Value")])],-1)),Hc=["onUpdate:modelValue"],Kc=["onUpdate:modelValue"],Gc=["onClick"],Yc=b(()=>t("i",{class:"fa fa-remove"},null,-1)),Xc=[Yc],Qc=b(()=>t("div",{class:"help"},[h(" Variables can be used from the command with "),t("code",null,"$var(variable_name)"),h(". If the referenced variable is not defined here, "),t("a",{href:"/variables/",target:"_blank"},"global variables"),h(" are used. ")],-1)),Zc=b(()=>t("td",null,"Variable changes:",-1)),xc={key:0},th=b(()=>t("thead",null,[t("tr",null,[t("td",null,"Name"),t("td",null,"Change"),t("td",null,"Value"),t("td")])],-1)),eh={class:"dropdown is-active is-up"},sh={class:"dropdown-trigger"},nh=["onUpdate:modelValue","onFocus"],lh={key:0,class:"dropdown-menu",id:"dropdown-menu",role:"menu"},oh={class:"dropdown-content"},ih=["onClick"],ah=h(") "),dh={class:"select is-small"},rh=["onUpdate:modelValue"],uh=b(()=>t("option",{value:"set"},"set",-1)),ch=b(()=>t("option",{value:"increase_by"},"increase by",-1)),hh=b(()=>t("option",{value:"decrease_by"},"decrease by",-1)),ph=[uh,ch,hh],mh=["onUpdate:modelValue"],gh=["onClick"],fh=b(()=>t("i",{class:"fa fa-remove"},null,-1)),yh=[fh],vh=b(()=>t("div",{class:"help"}," Variable changes are performed when the command is executed, before anything else. ",-1)),$h=b(()=>t("td",null,"Permissions:",-1)),_h=h(" Broadcaster "),bh=h(" Moderators "),kh=h(" Subscribers "),wh={class:"modal-card-foot"},Ch=["disabled"];function Vh(e,s,i,g,u,m){const d=$("duration-input"),n=$("responsive-image"),v=$("upload"),w=$("player"),f=$("volume-slider"),U=$("countdown-edit");return e.item?(l(),o("div",au,[t("div",{class:"modal-background",onClick:s[0]||(s[0]=(...a)=>e.onOverlayClick&&e.onOverlayClick(...a))}),t("div",du,[t("header",ru,[t("p",uu,k(e.title),1),t("button",{class:"delete","aria-label":"close",onClick:s[1]||(s[1]=(...a)=>e.onCloseClick&&e.onCloseClick(...a))})]),t("section",cu,[t("table",hu,[t("tbody",null,[t("tr",null,[pu,t("td",null,[(l(!0),o(T,null,P(e.item.triggers,(a,C)=>(l(),o("div",{key:C,class:"spacerow"},[e.item.triggers[C].type==="command"?(l(),o("div",mu,[t("div",gu,[p(t("input",{class:I(["input is-small",{"has-background-danger-light":!e.item.triggers[C].data.command,"has-text-danger-dark":!e.item.triggers[C].data.command}]),type:"text","onUpdate:modelValue":r=>e.item.triggers[C].data.command=r},null,10,fu),[[y,e.item.triggers[C].data.command]]),yu]),t("div",vu,[t("button",{class:"button is-small",disabled:e.item.triggers.length<=1,onClick:r=>e.rmtrigger(C)},bu,8,$u)])])):c("",!0),e.item.triggers[C].type==="timer"?(l(),o("div",ku,[t("div",wu,[t("button",{class:"button is-small",disabled:e.item.triggers.length<=1,onClick:r=>e.rmtrigger(C)},Su,8,Cu)]),t("div",Uu,[Iu,t("div",Tu,[t("div",Pu,[p(t("input",{class:"input is-small spaceinput","onUpdate:modelValue":r=>e.item.triggers[C].data.minLines=r},null,8,Au),[[y,e.item.triggers[C].data.minLines]]),Mu])])]),t("div",Du,[Eu,t("div",Lu,[t("div",ju,[_(d,{modelValue:e.item.triggers[C].data.minInterval,"onUpdate:modelValue":r=>e.item.triggers[C].data.minInterval=r},null,8,["modelValue","onUpdate:modelValue"]),Ru])])]),Ou])):c("",!0)]))),128)),t("div",Nu,[t("div",Fu,[e.item.action!=="jisho_org_lookup"?(l(),o("div",Ju,[p(t("select",{"onUpdate:modelValue":s[2]||(s[2]=a=>e.newtrigger=a)},qu,512),[[x,e.newtrigger]])])):c("",!0)]),t("button",{class:"button is-small",onClick:s[3]||(s[3]=a=>e.addtrigger())},Ku)])])]),e.item.action==="jisho_org_lookup"?(l(),o("tr",Gu,Qu)):c("",!0),e.item.action==="madochan_createword"?(l(),o("tr",Zu,ec)):c("",!0),e.item.action==="madochan_createword"?(l(),o("tr",sc,[nc,t("td",null,[t("div",lc,[p(t("input",{class:"input is-small spaceinput","onUpdate:modelValue":s[4]||(s[4]=a=>e.item.data.model=a)},null,512),[[y,e.item.data.model]])]),oc])])):c("",!0),e.item.action==="madochan_createword"?(l(),o("tr",ic,[ac,t("td",null,[t("div",dc,[p(t("input",{class:"input is-small spaceinput","onUpdate:modelValue":s[5]||(s[5]=a=>e.item.data.weirdness=a)},null,512),[[y,e.item.data.weirdness]])]),rc])])):c("",!0),e.item.action==="chatters"?(l(),o("tr",uc,pc)):c("",!0),e.item.action==="text"?(l(),o("tr",mc,[gc,t("td",null,[(l(!0),o(T,null,P(e.item.data.text,(a,C)=>(l(),o("div",{key:C,class:"field textarea-holder"},[p(t("textarea",{class:I(["textarea",{"has-background-danger-light":!e.item.data.text[C],"has-text-danger-dark":!e.item.data.text[C]}]),type:"text","onUpdate:modelValue":r=>e.item.data.text[C]=r},null,10,fc),[[y,e.item.data.text[C]]]),t("button",{class:"button is-small",disabled:e.item.data.text.length<=1,onClick:r=>e.rmtxt(C)},$c,8,yc)]))),128)),t("div",_c,[t("button",{class:"button is-small",onClick:s[6]||(s[6]=(...a)=>e.addtxt&&e.addtxt(...a))},wc)]),Cc])])):c("",!0),e.item.action==="media"?(l(),o("tr",Vc,[Sc,t("td",null,[e.item.data.image.file?(l(),j(n,{key:0,src:e.item.data.image.file,title:e.item.data.image.filename,width:"100%",height:"90",style:{display:"block"}},null,8,["src","title"])):c("",!0),e.item.data.image.file?(l(),o("button",{key:1,class:"button is-small",onClick:s[7]||(s[7]=a=>e.item.data.image.file=null)},Tc)):c("",!0),e.item.data.image.file?(l(),o("br",Pc)):c("",!0),_(v,{onUploaded:e.mediaImgUploaded,accept:"image/*",label:"Upload Image",class:I({"mt-1":e.item.data.image.file})},null,8,["onUploaded","class"])])])):c("",!0),e.item.action==="media"?(l(),o("tr",Ac,[Mc,t("td",null,[e.item.data.sound.file?(l(),j(w,{key:0,src:e.item.data.sound.file,name:e.item.data.sound.filename,volume:e.item.data.sound.volume,baseVolume:e.baseVolume,class:"button is-small"},null,8,["src","name","volume","baseVolume"])):c("",!0),e.item.data.sound.file?(l(),j(f,{key:1,modelValue:e.item.data.sound.volume,"onUpdate:modelValue":s[8]||(s[8]=a=>e.item.data.sound.volume=a)},null,8,["modelValue"])):c("",!0),e.item.data.sound.file?(l(),o("button",{key:2,class:"button is-small",onClick:s[9]||(s[9]=a=>e.item.data.sound.file=null)},Lc)):c("",!0),e.item.data.sound.file?(l(),o("br",jc)):c("",!0),_(v,{onUploaded:e.mediaSndUploaded,accept:"audio/*",label:"Upload Sound",class:I({"mt-1":e.item.data.sound.file})},null,8,["onUploaded","class"])])])):c("",!0),e.item.action==="media"?(l(),o("tr",Rc,[Oc,t("td",null,[t("div",Nc,[_(d,{modelValue:e.item.data.minDurationMs,"onUpdate:modelValue":s[10]||(s[10]=a=>e.item.data.minDurationMs=a)},null,8,["modelValue"]),Fc])])])):c("",!0),e.item.action==="countdown"?(l(),o("tr",Jc,[Bc,t("td",null,[_(U,{modelValue:e.item.data,"onUpdate:modelValue":s[11]||(s[11]=a=>e.item.data=a),baseVolume:e.baseVolume},null,8,["modelValue","baseVolume"])])])):c("",!0),t("tr",null,[zc,t("td",null,[e.item.variables.length>0?(l(),o("table",qc,[Wc,t("tbody",null,[(l(!0),o(T,null,P(e.item.variables,(a,C)=>(l(),o("tr",{key:C},[t("td",null,[p(t("input",{type:"text",class:"input is-small","onUpdate:modelValue":r=>a.name=r},null,8,Hc),[[y,a.name]])]),t("td",null,[p(t("input",{type:"text",class:"input is-small","onUpdate:modelValue":r=>a.value=r},null,8,Kc),[[y,a.value]])]),t("td",null,[t("button",{class:"button is-small",onClick:r=>e.rmVariable(C)},Xc,8,Gc)])]))),128))])])):c("",!0),t("span",{class:"button is-small",onClick:s[12]||(s[12]=(...a)=>e.onAddVariable&&e.onAddVariable(...a))},"Add Variable"),Qc])]),t("tr",null,[Zc,t("td",null,[e.item.variableChanges.length>0?(l(),o("table",xc,[th,t("tbody",null,[(l(!0),o(T,null,P(e.item.variableChanges,(a,C)=>(l(),o("tr",{key:C},[t("td",null,[t("div",eh,[t("div",sh,[p(t("input",{type:"text",class:"input is-small","onUpdate:modelValue":r=>a.name=r,onFocus:r=>e.variableChangeFocusIdx=C,onBlur:s[13]||(s[13]=(...r)=>e.onVarChangeInputBlur&&e.onVarChangeInputBlur(...r))},null,40,nh),[[y,a.name]])]),e.variableChangeFocusIdx===C?(l(),o("div",lh,[t("div",oh,[(l(!0),o(T,null,P(e.autocompletableVariables(a.name),(r,z)=>(l(),o("a",{class:"dropdown-item",key:z,onClick:A=>a.name=r.var.name},[h(k(r.var.name)+" ("+k(r.type)+", ",1),t("code",null,k(r.var.value),1),ah],8,ih))),128))])])):c("",!0)])]),t("td",null,[t("div",dh,[p(t("select",{"onUpdate:modelValue":r=>a.change=r},ph,8,rh),[[x,a.change]])])]),t("td",null,[p(t("input",{type:"text",class:"input is-small","onUpdate:modelValue":r=>a.value=r},null,8,mh),[[y,a.value]])]),t("td",null,[t("button",{class:"button is-small",onClick:r=>e.rmVariableChange(C)},yh,8,gh)])]))),128))])])):c("",!0),t("span",{class:"button is-small",onClick:s[14]||(s[14]=(...a)=>e.onAddVariableChange&&e.onAddVariableChange(...a))},"Add Variable Change"),vh])]),t("tr",null,[$h,t("td",null,[t("label",null,[p(t("input",{type:"checkbox","onUpdate:modelValue":s[15]||(s[15]=a=>e.item.restrict_to=a),value:"broadcaster"},null,512),[[L,e.item.restrict_to]]),_h]),t("label",null,[p(t("input",{type:"checkbox","onUpdate:modelValue":s[16]||(s[16]=a=>e.item.restrict_to=a),value:"mod"},null,512),[[L,e.item.restrict_to]]),bh]),t("label",null,[p(t("input",{type:"checkbox","onUpdate:modelValue":s[17]||(s[17]=a=>e.item.restrict_to=a),value:"sub"},null,512),[[L,e.item.restrict_to]]),kh])])])])])]),t("footer",wh,[t("button",{class:"button is-small is-primary",disabled:!e.valid,onClick:s[18]||(s[18]=(...a)=>e.onSaveClick&&e.onSaveClick(...a))}," Save changes ",8,Ch),t("button",{class:"button is-small",onClick:s[19]||(s[19]=(...a)=>e.onCancelClick&&e.onCancelClick(...a))},"Cancel")])])])):c("",!0)}var Sh=S(iu,[["render",Vh],["__scopeId","data-v-1bf0a91c"]]);const Uh=V({name:"countdown-edit",props:{baseVolume:{default:100},modelValue:{type:Object,required:!0}},data:()=>({countdown:{type:"manual",actions:[],steps:3,interval:1e3,intro:"",outro:""}}),methods:{dragEnd(e){this.countdown.actions=F.arrayMove(this.countdown.actions,e.oldIndex,e.newIndex)},onAddDelay(){this.countdown.actions.push({type:"delay",value:"1s"})},onAddText(){this.countdown.actions.push({type:"text",value:K.newText()})},onAddMedia(){this.countdown.actions.push({type:"media",value:K.newMedia()})},rmaction(e){this.countdown.actions=this.countdown.actions.filter((s,i)=>i!==e)},mediaSndUploaded(e,s){this.countdown.actions[e].value.sound.filename=s.originalname,this.countdown.actions[e].value.sound.file=s.filename},mediaImgUploaded(e,s){this.countdown.actions[e].value.image.filename=s.originalname,this.countdown.actions[e].value.image.file=s.filename}},created(){this.countdown.type=this.modelValue.type||"auto",this.countdown.actions=this.modelValue.actions||[],this.countdown.steps=this.modelValue.steps,this.countdown.interval=this.modelValue.interval,this.countdown.intro=this.modelValue.intro,this.countdown.outro=this.modelValue.outro,this.$watch("countdown",()=>{this.$emit("update:modelValue",{type:this.countdown.type,actions:this.countdown.actions,steps:this.countdown.steps,interval:this.countdown.interval,intro:this.countdown.intro,outro:this.countdown.outro})},{deep:!0})}}),Ih={class:"control"},Th={class:"radio"},Ph=h(" Manual "),Ah={class:"radio"},Mh=h(" Auto "),Dh={key:0},Eh={class:"spacerow"},Lh=t("label",{class:"spacelabel"},"Steps ",-1),jh={class:"spacerow"},Rh=t("label",{class:"spacelabel"},"Interval ",-1),Oh={class:"spacerow"},Nh=t("label",{class:"spacelabel"},"Intro ",-1),Fh={class:"spacerow"},Jh=t("label",{class:"spacelabel"},"Outro ",-1),Bh={key:1},zh={class:"field has-addons mr-1"},qh=t("span",{class:"handle p-2"},[t("i",{class:"fa fa-arrows"})],-1),Wh={key:0,class:"control has-icons-left"},Hh=t("span",{class:"icon is-small is-left"},[t("i",{class:"fa fa-hourglass"})],-1),Kh={key:1,class:"control has-icons-left"},Gh=["onUpdate:modelValue"],Yh=t("span",{class:"icon is-small is-left"},[t("i",{class:"fa fa-comments-o"})],-1),Xh={key:2,class:"control has-icons-left"},Qh=t("td",null,"Image:",-1),Zh=["onClick"],xh=t("i",{class:"fa fa-remove mr-1"},null,-1),tp=h(" Remove "),ep=[xh,tp],sp={key:2},np=t("td",null,"Sound:",-1),lp=["onClick"],op=t("i",{class:"fa fa-remove mr-1"},null,-1),ip=h(" Remove "),ap=[op,ip],dp={key:3},rp=t("td",null,"Duration:",-1),up={class:"control has-icons-left"},cp=t("span",{class:"icon is-small is-left"},[t("i",{class:"fa fa-hourglass"})],-1),hp={class:"control"},pp=["onClick"],mp=t("i",{class:"fa fa-remove"},null,-1),gp=[mp],fp=t("i",{class:"fa fa-hourglass mr-1"},null,-1),yp=h(" Add Delay "),vp=[fp,yp],$p=t("i",{class:"fa fa-comments-o mr-1"},null,-1),_p=h(" Add Chat "),bp=[$p,_p],kp=t("i",{class:"fa fa-picture-o mr-1"},null,-1),wp=h(" Add Media "),Cp=[kp,wp];function Vp(e,s,i,g,u,m){const d=$("duration-input"),n=$("responsive-image"),v=$("upload"),w=$("player"),f=$("volume-slider"),U=$("draggable");return l(),o("div",null,[t("div",Ih,[t("label",Th,[p(t("input",{type:"radio",value:"manual","onUpdate:modelValue":s[0]||(s[0]=a=>e.countdown.type=a)},null,512),[[nt,e.countdown.type]]),Ph]),t("label",Ah,[p(t("input",{type:"radio",value:"auto","onUpdate:modelValue":s[1]||(s[1]=a=>e.countdown.type=a)},null,512),[[nt,e.countdown.type]]),Mh])]),e.countdown.type==="auto"?(l(),o("div",Dh,[t("div",Eh,[Lh,p(t("input",{class:"input is-small spaceinput","onUpdate:modelValue":s[2]||(s[2]=a=>e.countdown.steps=a)},null,512),[[y,e.countdown.steps]])]),t("div",jh,[Rh,_(d,{modelValue:e.countdown.interval,"onUpdate:modelValue":s[3]||(s[3]=a=>e.countdown.interval=a)},null,8,["modelValue"])]),t("div",Oh,[Nh,p(t("input",{class:"input is-small spaceinput","onUpdate:modelValue":s[4]||(s[4]=a=>e.countdown.intro=a)},null,512),[[y,e.countdown.intro]])]),t("div",Fh,[Jh,p(t("input",{class:"input is-small spaceinput","onUpdate:modelValue":s[5]||(s[5]=a=>e.countdown.outro=a)},null,512),[[y,e.countdown.outro]])])])):(l(),o("div",Bh,[_(U,{modelValue:e.countdown.actions,onEnd:e.dragEnd,handle:".handle","item-key":"id"},{item:E(({element:a,index:C})=>[t("div",zh,[qh,a.type==="delay"?(l(),o("div",Wh,[_(d,{modelValue:a.value,"onUpdate:modelValue":r=>a.value=r},null,8,["modelValue","onUpdate:modelValue"]),Hh])):a.type==="text"?(l(),o("div",Kh,[p(t("input",{class:"input is-small",type:"text","onUpdate:modelValue":r=>a.value=r},null,8,Gh),[[y,a.value]]),Yh])):a.type==="media"?(l(),o("div",Xh,[t("table",null,[t("tr",null,[Qh,t("td",null,[a.value.image.file?(l(),j(n,{key:0,src:a.value.image.file,title:a.value.image.filename,width:"100%",height:"90",style:{display:"block"}},null,8,["src","title"])):c("",!0),a.value.image.file?(l(),o("button",{key:1,class:"button is-small",onClick:r=>a.value.image.file=null},ep,8,Zh)):c("",!0),a.value.image.file?(l(),o("br",sp)):c("",!0),_(v,{onUploaded:r=>e.mediaImgUploaded(C,r),accept:"image/*",label:"Upload Image",class:I({"mt-1":a.value.image.file})},null,8,["onUploaded","class"])])]),t("tr",null,[np,t("td",null,[a.value.sound.file?(l(),j(w,{key:0,src:a.value.sound.file,name:a.value.sound.filename,volume:a.value.sound.volume,baseVolume:e.baseVolume,class:"button is-small"},null,8,["src","name","volume","baseVolume"])):c("",!0),a.value.sound.file?(l(),j(f,{key:1,modelValue:a.value.sound.volume,"onUpdate:modelValue":r=>a.value.sound.volume=r},null,8,["modelValue","onUpdate:modelValue"])):c("",!0),a.value.sound.file?(l(),o("button",{key:2,class:"button is-small",onClick:r=>a.value.sound.file=null},ap,8,lp)):c("",!0),a.value.sound.file?(l(),o("br",dp)):c("",!0),_(v,{onUploaded:r=>e.mediaSndUploaded(C,r),accept:"audio/*",label:"Upload Sound",class:I({"mt-1":a.value.sound.file})},null,8,["onUploaded","class"])])]),t("tr",null,[rp,t("td",null,[t("div",up,[_(d,{modelValue:a.value.minDurationMs,"onUpdate:modelValue":r=>a.value.minDurationMs=r},null,8,["modelValue","onUpdate:modelValue"]),cp])])])])])):c("",!0),t("div",hp,[t("button",{class:"button is-small",onClick:r=>e.rmaction(C)},gp,8,pp)])])]),_:1},8,["modelValue","onEnd"]),t("button",{class:"button is-small",onClick:s[6]||(s[6]=(...a)=>e.onAddDelay&&e.onAddDelay(...a))},vp),t("button",{class:"button is-small",onClick:s[7]||(s[7]=(...a)=>e.onAddText&&e.onAddText(...a))},bp),t("button",{class:"button is-small",onClick:s[8]||(s[8]=(...a)=>e.onAddMedia&&e.onAddMedia(...a))},Cp)]))])}var Sp=S(Uh,[["render",Vp]]);const Up=V({setup(){}}),Ip={class:"table is-striped"},Tp=t("thead",null,[t("tr",null,[t("th",null,"Chat command"),t("th",null,"Viewer"),t("th",null,"Mod"),t("th",null,"Explanation")])],-1),Pp=t("tbody",null,[t("tr",null,[t("td",null,[t("code",null,"!sr <SEARCH>")]),t("td",{class:"has-text-success"},"\u2714"),t("td",{class:"has-text-success"},"\u2714"),t("td",null,[h(" Search for "),t("code",null,"<SEARCH>"),h(" at youtube (by id or by title) and queue the first result in the playlist (after the first found batch of unplayed songs)."),t("br"),h(" This only executes if "),t("code",null,"<SEARCH>"),h(" does not match one of the commands below. ")])]),t("tr",null,[t("td",null,[t("code",null,"!sr undo")]),t("td",{class:"has-text-success"},"\u2714"),t("td",{class:"has-text-success"},"\u2714"),t("td",null,"Remove the song that was last added by oneself.")]),t("tr",null,[t("td",null,[t("code",null,"!sr current")]),t("td",{class:"has-text-success"},"\u2714"),t("td",{class:"has-text-success"},"\u2714"),t("td",null,"Show what song is currently playing")]),t("tr",null,[t("td",null,[t("code",null,"!sr good")]),t("td",{class:"has-text-success"},"\u2714"),t("td",{class:"has-text-success"},"\u2714"),t("td",null,"Vote the current song up")]),t("tr",null,[t("td",null,[t("code",null,"!sr bad")]),t("td",{class:"has-text-success"},"\u2714"),t("td",{class:"has-text-success"},"\u2714"),t("td",null,"Vote the current song down")]),t("tr",null,[t("td",null,[t("code",null,"!sr stats")]),t("td",{class:"has-text-success"},"\u2714"),t("td",{class:"has-text-success"},"\u2714"),t("td",null,"Show stats about the playlist")]),t("tr",null,[t("td",null,[t("code",null,"!sr stat")]),t("td",{class:"has-text-success"},"\u2714"),t("td",{class:"has-text-success"},"\u2714"),t("td",null,"Alias for stats")]),t("tr",null,[t("td",null,[t("code",null,"!sr rm")]),t("td",{class:"has-text-danger"},"\u2716"),t("td",{class:"has-text-success"},"\u2714"),t("td",null,"Remove the current song from the playlist")]),t("tr",null,[t("td",null,[t("code",null,"!sr next")]),t("td",{class:"has-text-danger"},"\u2716"),t("td",{class:"has-text-success"},"\u2714"),t("td",null,"Skip to the next song")]),t("tr",null,[t("td",null,[t("code",null,"!sr prev")]),t("td",{class:"has-text-danger"},"\u2716"),t("td",{class:"has-text-success"},"\u2714"),t("td",null,"Skip to the previous song")]),t("tr",null,[t("td",null,[t("code",null,"!sr skip")]),t("td",{class:"has-text-danger"},"\u2716"),t("td",{class:"has-text-success"},"\u2714"),t("td",null,"Alias for next")]),t("tr",null,[t("td",null,[t("code",null,"!sr jumptonew")]),t("td",{class:"has-text-danger"},"\u2716"),t("td",{class:"has-text-success"},"\u2714"),t("td",null,"Jump to the next unplayed song")]),t("tr",null,[t("td",null,[t("code",null,"!sr shuffle")]),t("td",{class:"has-text-danger"},"\u2716"),t("td",{class:"has-text-success"},"\u2714"),t("td",null,[h(" Shuffle the playlist (current song unaffected). "),t("br"),h(" Non-played and played songs will be shuffled separately and non-played songs will be put after currently playing song. ")])]),t("tr",null,[t("td",null,[t("code",null,"!sr resetStats")]),t("td",{class:"has-text-danger"},"\u2716"),t("td",{class:"has-text-success"},"\u2714"),t("td",null,"Reset all statistics of all songs")]),t("tr",null,[t("td",null,[t("code",null,"!sr clear")]),t("td",{class:"has-text-danger"},"\u2716"),t("td",{class:"has-text-success"},"\u2714"),t("td",null,"Clear the playlist")]),t("tr",null,[t("td",null,[t("code",null,"!sr pause")]),t("td",{class:"has-text-danger"},"\u2716"),t("td",{class:"has-text-success"},"\u2714"),t("td",null,"Pause currently playing song")]),t("tr",null,[t("td",null,[t("code",null,"!sr unpause")]),t("td",{class:"has-text-danger"},"\u2716"),t("td",{class:"has-text-success"},"\u2714"),t("td",null,"Unpause currently paused song")]),t("tr",null,[t("td",null,[t("code",null,"!sr loop")]),t("td",{class:"has-text-danger"},"\u2716"),t("td",{class:"has-text-success"},"\u2714"),t("td",null,"Loop the current song")]),t("tr",null,[t("td",null,[t("code",null,"!sr noloop")]),t("td",{class:"has-text-danger"},"\u2716"),t("td",{class:"has-text-success"},"\u2714"),t("td",null,"Stop looping the current song")]),t("tr",null,[t("td",null,[t("code",null,"!sr unloop")]),t("td",{class:"has-text-danger"},"\u2716"),t("td",{class:"has-text-success"},"\u2714"),t("td",null,"Alias for noloop")]),t("tr",null,[t("td",null,[t("code",null,"!sr hidevideo")]),t("td",{class:"has-text-danger"},"\u2716"),t("td",{class:"has-text-success"},"\u2714"),t("td",null,"Hide video for current song")]),t("tr",null,[t("td",null,[t("code",null,"!sr showvideo")]),t("td",{class:"has-text-danger"},"\u2716"),t("td",{class:"has-text-success"},"\u2714"),t("td",null,"Show video for current song")]),t("tr",null,[t("td",null,[t("code",null,"!sr tag <TAG>")]),t("td",{class:"has-text-danger"},"\u2716"),t("td",{class:"has-text-success"},"\u2714"),t("td",null,[h("Add tag "),t("code",null,"<TAG>"),h(" to the current song")])]),t("tr",null,[t("td",null,[t("code",null,"!sr rmtag <TAG>")]),t("td",{class:"has-text-danger"},"\u2716"),t("td",{class:"has-text-success"},"\u2714"),t("td",null,[h("Remove tag "),t("code",null,"<TAG>"),h(" from the current song")])]),t("tr",null,[t("td",null,[t("code",null,"!sr filter [<TAG>]")]),t("td",{class:"has-text-danger"},"\u2716"),t("td",{class:"has-text-success"},"\u2714"),t("td",null,[h(" Play only songs with the given tag "),t("code",null,"<TAG>"),h(". If no tag is given, play all songs. ")])])],-1),Ap=[Tp,Pp];function Mp(e,s,i,g,u,m){return l(),o("table",Ip,Ap)}var Dp=S(Up,[["render",Mp]]);const Ep=V({props:{playlist:Array,filter:Object},data:()=>({hideFilteredOut:!0,filterTagInput:"",tagInput:"",tagInputIdx:-1}),methods:{toggleVisibility(e,s){e.hidevideo?this.sendCtrl("videoVisibility",[!0,s]):this.sendCtrl("videoVisibility",[!1,s])},dragEnd(e){this.sendCtrl("move",[e.oldIndex,e.newIndex])},applyFilter(e){this.$emit("filterChange",e)},sendCtrl(e,s){this.$emit("ctrl",[e,s])},isFilteredOut(e){return this.filter.tag!==""&&!e.tags.includes(this.filter.tag)},startAddTag(e){this.tagInputIdx=e,this.$nextTick(()=>{this.$el.querySelector("table .filter-tag-input").focus()})}},computed:{enhancedPlaylist(){return this.playlist.map(e=>(e.filteredOut=this.isFilteredOut(e),e))},firstIndex(){return this.filter.tag===""?0:this.playlist.findIndex(e=>e.tags.includes(this.filter.tag))}},watch:{playlist:function(e,s){e.find(i=>!this.isFilteredOut(i))||this.$emit("stopPlayer")},filter:function(e,s){this.playlist.find(i=>!this.isFilteredOut(i))||this.$emit("stopPlayer")}}}),Lp={class:"filters"},jp={class:"currentfilter"},Rp=t("div",{class:"mr-1 pt-1"},"Filter:",-1),Op=t("i",{class:"fa fa-remove ml-1"},null,-1),Np={key:1,class:"field has-addons mr-1"},Fp={class:"control"},Jp={class:"control"},Bp={class:"pt-1"},zp=h(" Hide filtered out"),qp={key:0,class:"table is-striped"},Wp=t("thead",null,[t("tr",null,[t("th"),t("th"),t("th"),t("th",null,"Title"),t("th",null,"User"),t("th",null,"Plays"),t("th"),t("th"),t("th"),t("th")])],-1),Hp=t("td",{class:"pt-4 handle"},[t("i",{class:"fa fa-arrows"})],-1),Kp=["disabled","onClick"],Gp=t("i",{class:"fa fa-play"},null,-1),Yp=[Gp],Xp=["href"],Qp=t("i",{class:"fa fa-external-link"},null,-1),Zp=["onClick"],xp=t("i",{class:"fa fa-remove ml-1"},null,-1),tm=["onClick"],em=t("i",{class:"fa fa-plus"},null,-1),sm=[em],nm={key:0,class:"field has-addons"},lm={class:"control"},om=["onKeyup"],im={class:"control"},am=["disabled","onClick"],dm=["onClick","title"],rm=["onClick"],um=t("i",{class:"fa fa-thumbs-up mr-1"},null,-1),cm=["onClick"],hm=t("i",{class:"fa fa-thumbs-down mr-1"},null,-1),pm=["onClick"],mm=t("i",{class:"fa fa-trash"},null,-1),gm=[mm],fm={key:1};function ym(e,s,i,g,u,m){const d=$("draggable");return l(),o("div",null,[t("div",Lp,[t("div",jp,[Rp,e.filter.tag?(l(),o("span",{key:0,class:"tag mr-1",onClick:s[0]||(s[0]=n=>e.applyFilter(""))},[h(k(e.filter.tag)+" ",1),Op])):(l(),o("div",Np,[t("div",Fp,[p(t("input",{class:"input is-small filter-tag-input",type:"text","onUpdate:modelValue":s[1]||(s[1]=n=>e.filterTagInput=n),onKeyup:s[2]||(s[2]=N(n=>e.applyFilter(e.filterTagInput),["enter"]))},null,544),[[y,e.filterTagInput]])]),t("div",Jp,[t("span",{class:"button is-small",onClick:s[3]||(s[3]=n=>e.applyFilter(e.filterTagInput))},"Apply filter")])])),t("label",Bp,[p(t("input",{class:"checkbox",type:"checkbox","onUpdate:modelValue":s[4]||(s[4]=n=>e.hideFilteredOut=n)},null,512),[[L,e.hideFilteredOut]]),zp])])]),e.playlist.length>0?(l(),o("table",qp,[Wp,_(d,{modelValue:e.enhancedPlaylist,onEnd:e.dragEnd,tag:"tbody",handle:".handle","item-key":"id"},{item:E(({element:n,index:v})=>[p(t("tr",null,[Hp,t("td",null,k(v+1),1),t("td",null,[v!==e.firstIndex?(l(),o("button",{key:0,class:"button is-small",disabled:n.filteredOut?!0:null,onClick:w=>e.sendCtrl("playIdx",[v]),title:"Play"},Yp,8,Kp)):c("",!0)]),t("td",null,[t("a",{href:"https://www.youtube.com/watch?v="+n.yt,target:"_blank"},[h(k(n.title||n.yt)+" ",1),Qp],8,Xp),t("div",null,[(l(!0),o(T,null,P(n.tags,(w,f)=>(l(),o("span",{key:f,class:"tag",onClick:U=>e.sendCtrl("rmtag",[w,v])},[h(k(w)+" ",1),xp],8,Zp))),128)),t("span",{class:"button is-small",onClick:w=>e.startAddTag(v)},sm,8,tm)]),e.tagInputIdx===v?(l(),o("div",nm,[t("div",lm,[p(t("input",{class:"input is-small filter-tag-input",type:"text","onUpdate:modelValue":s[5]||(s[5]=w=>e.tagInput=w),onKeyup:N(w=>{e.sendCtrl("addtag",[e.tagInput,v]),e.tagInput=""},["enter"])},null,40,om),[[y,e.tagInput]])]),t("div",im,[t("span",{class:"button is-small",disabled:e.tagInput?null:!0,onClick:w=>{e.sendCtrl("addtag",[e.tagInput,v]),e.tagInput=""}},"Add tag",8,am)])])):c("",!0)]),t("td",null,k(n.user),1),t("td",null,k(n.plays)+"x",1),t("td",null,[t("button",{class:"button is-small",onClick:w=>e.toggleVisibility(n,v),title:n.hidevideo?"Video hidden":"Video visible"},[t("i",{class:I(["fa mr-1",{"fa-eye":!n.hidevideo,"fa-eye-slash":n.hidevideo}])},null,2)],8,dm)]),t("td",null,[t("button",{class:"button is-small",onClick:w=>e.sendCtrl("goodIdx",[v])},[um,h(" "+k(n.goods),1)],8,rm)]),t("td",null,[t("button",{class:"button is-small",onClick:w=>e.sendCtrl("badIdx",[v])},[hm,h(" "+k(n.bads),1)],8,cm)]),t("td",null,[t("button",{class:"button is-small",onClick:w=>e.sendCtrl("rmIdx",[v]),title:"Remove"},gm,8,pm)])],512),[[ht,!e.hideFilteredOut||!n.filteredOut]])]),_:1},8,["modelValue","onEnd"])])):(l(),o("div",fm,"Playlist is empty"))])}var vm=S(Ep,[["render",ym]]);const $m=V({props:{modelValue:{type:Object,required:!0}},emits:{"update:modelValue":null},created(){this.settings=this.modelValue},methods:{hideVideoImageRemoved(){this.settings.hideVideoImage={filename:"",file:""},this.sendSettings()},hideVideoImageUploaded(e){this.settings.hideVideoImage={filename:e.originalname,file:e.filename},this.sendSettings()},sendSettings(){this.$emit("update:modelValue",this.settings)}},data:()=>({settings:{volume:100,hideVideoImage:{file:"",filename:""},showProgressBar:!1,customCss:""},css:{classExamples:[{class:".wrapper",desc:"Wrapper for everything"},{class:".player",desc:"The player"},{class:".list",desc:"The playlist"},{class:".item",desc:"A playlist item"},{class:".playing",desc:"Currently playing item"},{class:".not-playing",desc:"Queued items"},{class:".title",desc:"Wrapper for the title of a playlist item"},{class:".title-content",desc:"Title texts"},{class:".title-orig",desc:"Title text displayed by default"},{class:".title-dupl",desc:"Title text duplicated, useful for marquee effect"},{class:".vote",desc:"Vote elements"},{class:".vote-up",desc:"Up vote element"},{class:".vote-down",desc:"Down vote element"},{class:".meta",desc:"Meta info about an item"},{class:".meta-user",desc:"User who requested the song"},{class:".meta-plays",desc:"How many times the song was played"}],codeExamples:[{desc:"Hide Player:",code:".player { position: absolute; }"},{desc:"Change font to external font:",code:`@import url('https://fonts.googleapis.com/css2?family=Shadows+Into+Light');
body { font-family: 'Shadows into Light'; font-size: 30px; }`},{desc:"Change colors of items:",code:`.playing { background: #222; color: #bbb; }
.not-playing { background: #eee; color: #444; }`},{desc:"Display something in front of the currently playing item title:",code:".playing .title:before { content: '\u{1F3B6} Now Playing \u{1F3B6} ' }"},{desc:"Add a margin between the items:",code:".item { margin-bottom: 20px; }"},{desc:"Hide votes and meta:",code:".vote, .meta { display: none; }"},{desc:"Hide down votes:",code:".vote-down { display: none; }"},{desc:"Hite all items starting from the 6th:",code:".item:nth-child(n+6) { display: none; }"},{desc:"Show only titles and marquee the current song:",code:`.playing .title { animation: init 10s linear forwards, back 10s 0s linear infinite; }
.title { margin: 1em 0; white-space: nowrap; }
.not-playing .title { text-overflow: ellipsis; overflow: hidden; }
.meta, .vote { display: none; }
@keyframes back {
    from { transform: translateX(100%); }
    to { transform: translateX(-100%); }
}
@keyframes init {
    to { transform: translateX(-100%); }
}`},{desc:"Show only titles and marquee the current song (better version):",code:`.playing .title { overflow: hidden; white-space: nowrap; height: 20px; line-height: 20px; }
.playing .title-content { position: absolute; padding: 0 10px; min-width: 100%; animation: init 5s linear, back 10s linear 5s infinite; }
.playing .title-content.title-dupl { display: block; animation: back 10s linear 0s infinite; }
.vote, .meta { display: none; }
@keyframes back {
    from { transform: translateX(100%); }
    to { transform: translateX(-100%); }
}
@keyframes init {
    to { transform: translateX(-100%); }
}`}]}})}),O=e=>(W("data-v-0035b3e4"),e=e(),H(),e),_m={key:0,class:"table is-striped",ref:"table"},bm=O(()=>t("td",null,[t("code",null,"settings.volume")],-1)),km=O(()=>t("td",null,"Base volume for all songs played",-1)),wm=O(()=>t("td",null,[t("code",null,"settings.hideVideoImage")],-1)),Cm={key:0,class:"mb-1"},Vm=O(()=>t("br",null,null,-1)),Sm=O(()=>t("i",{class:"fa fa-remove mr-1"},null,-1)),Um=h(" Remove Image "),Im=[Sm,Um],Tm=O(()=>t("td",null,"Image to display when a video is hidden.",-1)),Pm=O(()=>t("td",null,[t("code",null,"settings.showProgressBar")],-1)),Am=O(()=>t("td",null,"Show a progress bar in the bottom part of the video in the widget.",-1)),Mm=O(()=>t("td",null,[t("code",null,"settings.customCss")],-1)),Dm=O(()=>t("p",null,"Classes that can be used for styling:",-1)),Em={class:"table"},Lm=O(()=>t("thead",null,[t("tr",null,[t("th",null,"Class"),t("th",null,"Description")])],-1)),jm=O(()=>t("p",null,[t("b",null,"Examples:")],-1));function Rm(e,s,i,g,u,m){const d=$("volume-slider"),n=$("responsive-image"),v=$("upload"),w=$("codearea");return l(),o("div",null,[e.settings?(l(),o("table",_m,[t("tbody",null,[t("tr",null,[bm,t("td",null,[_(d,{modelValue:e.settings.volume,"onUpdate:modelValue":[s[0]||(s[0]=f=>e.settings.volume=f),e.sendSettings]},null,8,["modelValue","onUpdate:modelValue"])]),km]),t("tr",null,[wm,t("td",null,[e.settings.hideVideoImage.file?(l(),o("div",Cm,[_(n,{src:e.settings.hideVideoImage.file,title:e.settings.hideVideoImage.filename,width:"100px",height:"50px",style:{display:"inline-block"}},null,8,["src","title"]),Vm,t("button",{class:"button is-small",onClick:s[1]||(s[1]=(...f)=>e.hideVideoImageRemoved&&e.hideVideoImageRemoved(...f))},Im)])):c("",!0),_(v,{onUploaded:e.hideVideoImageUploaded,accept:"image/*",label:"Upload Image"},null,8,["onUploaded"])]),Tm]),t("tr",null,[Pm,t("td",null,[p(t("input",{type:"checkbox","onUpdate:modelValue":[s[2]||(s[2]=f=>e.settings.showProgressBar=f),s[3]||(s[3]=(...f)=>e.sendSettings&&e.sendSettings(...f))]},null,512),[[L,e.settings.showProgressBar]])]),Am]),t("tr",null,[Mm,t("td",null,[_(w,{modelValue:e.settings.customCss,"onUpdate:modelValue":[s[4]||(s[4]=f=>e.settings.customCss=f),e.sendSettings]},null,8,["modelValue","onUpdate:modelValue"])]),t("td",null,[Dm,t("table",Em,[Lm,t("tbody",null,[(l(!0),o(T,null,P(e.css.classExamples,(f,U)=>(l(),o("tr",{key:U},[t("td",null,[t("code",null,k(f.class),1)]),t("td",null,k(f.desc),1)]))),128))])]),jm,(l(!0),o(T,null,P(e.css.codeExamples,(f,U)=>(l(),o("p",{key:U},[h(k(f.desc)+" ",1),t("pre",null,[t("code",null,k(f.code),1)])]))),128))])])])],512)):c("",!0)])}var Om=S($m,[["render",Rm],["__scopeId","data-v-0035b3e4"]]);const Nm=V({props:{tags:Array},data:()=>({editTag:"",tagEditIdx:-1}),methods:{onInputFocus(e,s){this.editTag=e.value,this.tagEditIdx=s},updateTag(e,s){this.$emit("updateTag",[e,s])}}}),Fm={class:"table is-striped"},Jm=t("tr",null,[t("th",null,"Tag"),t("th"),t("th")],-1),Bm=["onKeyup"],zm=["value","onFocus"],qm=["disabled","onClick"];function Wm(e,s,i,g,u,m){return l(),o("table",Fm,[Jm,(l(!0),o(T,null,P(e.tags,(d,n)=>(l(),o("tr",{key:n},[t("td",null,[e.tagEditIdx===n?p((l(),o("input",{key:0,type:"text",class:"input is-small","onUpdate:modelValue":s[0]||(s[0]=v=>e.editTag=v),onKeyup:N(v=>e.updateTag(d.value,e.editTag),["enter"])},null,40,Bm)),[[y,e.editTag]]):(l(),o("input",{key:1,type:"text",class:"input is-small",value:d.value,onFocus:v=>e.onInputFocus(d,n)},null,40,zm))]),t("td",null,[e.tagEditIdx===n?(l(),o("span",{key:0,class:"button is-small",disabled:d.value===e.editTag?!0:null,onClick:v=>e.updateTag(d.value,e.editTag)},"Save",8,qm)):c("",!0)]),t("td",null,k(d.count)+"x",1)]))),128))])}var Hm=S(Nm,[["render",Wm]]);const Km=async()=>{const e=pt({history:mt(),routes:[{name:"index",path:"/",component:Pt,meta:{title:"Hyottoko.club",protected:!0}},{name:"login",path:"/login",component:Gt,meta:{title:"Login",protected:!1}},{name:"register",path:"/register",component:Js,meta:{title:"Register",protected:!1}},{name:"password-reset",path:"/password-reset",component:Ed,meta:{title:"Password Reset",protected:!1}},{name:"forgot-password",path:"/forgot-password",component:Yd,meta:{title:"Forgot Password",protected:!1}},{name:"commands",path:"/commands/",component:hi,meta:{title:"Commands",protected:!0}},{name:"variables",path:"/variables/",component:rs,meta:{title:"Variables",protected:!0}},{name:"sr",path:"/sr/",component:zl,meta:{title:"Song Request",protected:!0}},{name:"speech-to-text",path:"/speech-to-text/",component:vd,meta:{title:"Speech to text",protected:!0}},{name:"drawcast",path:"/drawcast/",component:Ke,meta:{title:"Drawcast",protected:!0}},{name:"settings",path:"/settings/",component:En,meta:{title:"Settings",protected:!0}}]}),s=async m=>{const d=await fetch(m);return d.status===200?await d.json():null},i=await s("/api/conf"),g=await s("/api/user/me");e.beforeEach((m,d,n)=>{if(m.meta.protected&&!g){n({name:"login"});return}if(!m.meta.protected&&g){n({name:"index"});return}d.name&&document.documentElement.classList.remove(`view-${String(d.name)}`),document.documentElement.classList.add(`view-${String(m.name)}`),document.title=`${m.meta.title}`,n()});const u=gt(bt);u.config.globalProperties.$conf=i,u.config.globalProperties.$me=g,u.use(e),u.component("codearea",ir),u.component("doubleclick-button",Zr),u.component("draggable",ft),u.component("duration-input",rr),u.component("duration",Gr),u.component("navbar",zr),u.component("player",hr),u.component("responsive-image",Tr),u.component("slider",kr),u.component("upload",nr),u.component("volume-slider",Vr),u.component("youtube",ou),u.component("command-edit",Sh),u.component("countdown-edit",Sp),u.component("playlist-editor",vm),u.component("tags-editor",Hm),u.component("song-request-settings",Om),u.component("help",Dp),u.mount("#app")};Km();
