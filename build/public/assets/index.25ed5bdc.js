var t=Object.defineProperty,e=(e,s,l)=>(((e,s,l)=>{s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[s]=l})(e,"symbol"!=typeof s?s+"":s,l),l);import{d as s,r as l,o as a,c as n,a as i,b as o,F as d,e as r,t as u,f as c,w as m,v as h,g as p,h as g,i as y,j as b,n as f,k as v,p as k,l as w,m as C,q as V,s as x,u as S,x as U,y as _,z as I,A as P,B as T,C as A}from"./vendor.7a817e4a.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const s of t)if("childList"===s.type)for(const t of s.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerpolicy&&(e.referrerPolicy=t.referrerpolicy),"use-credentials"===t.crossorigin?e.credentials="include":"anonymous"===t.crossorigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();var $=(t,e)=>{for(const[s,l]of e)t[s]=l;return t};const M=s({name:"app"}),L={id:"app"};var D=$(M,[["render",function(t,e,s,o,d,r){const u=l("router-view");return a(),n("div",L,[i(u)])}]]);const E=s({data:()=>({widgets:null}),async created(){const t=await fetch("/api/page/index");if(200!==t.status)return void this.$router.push({name:"login"});const e=await t.json();this.widgets=e.widgets}}),j={key:0,id:"app"},R={id:"top",ref:"top"},O={id:"main",ref:"main"},F={class:"table is-striped is-fullwidth"},J=o("thead",null,[o("tr",null,[o("th",null,"Widget"),o("th",null,"Hint")])],-1),N=["href"];var z=$(E,[["render",function(t,e,s,m,h,p){const g=l("navbar");return t.widgets?(a(),n("div",j,[o("div",R,[i(g)],512),o("div",O,[o("table",F,[J,o("tbody",null,[(a(!0),n(d,null,r(t.widgets,((t,e)=>(a(),n("tr",{key:e},[o("td",null,[o("a",{href:t.url,target:"blank"},u(t.title),9,N)]),o("td",null,u(t.hint),1)])))),128))])])],512)])):c("",!0)}]]);const B=s({data:()=>({user:"",pass:"",error:"",success:""}),async mounted(){const t=new URLSearchParams(window.location.search).get("t");if(t){this.success="",this.error="";const e=await fetch("/api/_handle-token",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({token:t})});if(200===e.status){"registration-verified"===(await e.json()).type&&(this.success="Registration complete")}else this.error="Unknown error"}},methods:{async submit(){this.success="",this.error="";const t=await fetch("/api/auth",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({user:this.user,pass:this.pass})});200===t.status?this.$router.push({name:"index"}):401===t.status?this.error=(await t.json()).reason:this.error="Unknown error"}}}),W={class:"center-screen"},q=o("h1",{class:"title is-6"},"Hyottoko.club",-1),H={key:0,class:"field has-background-success-light has-text-success-dark"},K={key:1,class:"field has-background-danger-light has-text-danger-dark"},G={class:"field"},Y={class:"control has-icons-left"},X=o("span",{class:"icon is-small is-left"},[o("i",{class:"fa fa-user"})],-1),Q={class:"field"},Z={class:"control has-icons-left"},tt=o("span",{class:"icon is-small is-left"},[o("i",{class:"fa fa-lock"})],-1),et={class:"field"},st={class:"field"},lt=y("Register an account"),at=y(" | "),nt=y("Forgot password?");var it=$(B,[["render",function(t,e,s,d,r,y){const b=l("router-link");return a(),n("div",W,[q,o("form",null,[t.success?(a(),n("div",H,u(t.success),1)):c("",!0),t.error?(a(),n("div",K,u(t.error),1)):c("",!0),o("div",G,[o("div",Y,[m(o("input",{class:"input is-small",type:"text",placeholder:"User","onUpdate:modelValue":e[0]||(e[0]=e=>t.user=e),onKeyup:e[1]||(e[1]=e=>t.error="")},null,544),[[h,t.user]]),X])]),o("div",Q,[o("div",Z,[m(o("input",{class:"input is-small",type:"password",placeholder:"Password","onUpdate:modelValue":e[2]||(e[2]=e=>t.pass=e),onKeyup:[e[3]||(e[3]=e=>t.error=""),e[4]||(e[4]=p(((...e)=>t.submit&&t.submit(...e)),["enter"]))]},null,544),[[h,t.pass]]),tt])]),o("div",et,[o("span",{class:"button is-small is-primary",onClick:e[5]||(e[5]=(...e)=>t.submit&&t.submit(...e))},"Login")]),o("div",st,[i(b,{to:{name:"register"}},{default:g((()=>[lt])),_:1}),at,i(b,{to:{name:"forgot-password"}},{default:g((()=>[nt])),_:1})])])])}]]);class ot extends class{constructor(t,s){e(this,"handle",null),e(this,"reconnectTimeout",null),e(this,"sendBuffer",[]),this.addr=t,this.protocols=s,this.onopen=()=>{},this.onclose=()=>{},this.onmessage=()=>{}}send(t){this.handle?this.handle.send(t):this.sendBuffer.push(t)}connect(){let t=new WebSocket(this.addr,this.protocols);t.onopen=e=>{for(this.reconnectTimeout&&clearTimeout(this.reconnectTimeout),this.handle=t;this.sendBuffer.length>0;)this.handle.send(this.sendBuffer.shift());this.onopen(e)},t.onmessage=t=>{this.onmessage(t)},t.onclose=t=>{this.handle=null,4e3===t.code||1001===t.code||(this.reconnectTimeout=setTimeout((()=>{this.connect()}),1e3)),this.onclose(t)}}disconnect(){this.handle&&this.handle.close(4e3)}}{constructor(t,e){super(t,e),this._on={},this.onopen=t=>{this._dispatch("socket","open",t)},this.onmessage=t=>{if(this._dispatch("socket","message",t),this._on.message){const e=this._parseMessageData(t.data);e.event&&this._dispatch("message",e.event,e.data)}},this.onclose=t=>{this._dispatch("socket","close",t)}}onSocket(t,e){this.addEventListener("socket",t,e)}onMessage(t,e){this.addEventListener("message",t,e)}addEventListener(t,e,s){const l=Array.isArray(e)?e:[e];this._on[t]=this._on[t]||{};for(const a of l)this._on[t][a]=this._on[t][a]||[],this._on[t][a].push(s)}_parseMessageData(t){try{const e=JSON.parse(t);if(e.event)return{event:e.event,data:e.data||null}}catch{}return{event:null,data:null}}_dispatch(t,e,...s){const l=(this._on[t]||{})[e]||[];if(0!==l.length){((...t)=>{console.log("[WsClient.js]",...t)})(`ws dispatch ${t} ${e}`);for(const t of l)t(...s)}}}const dt=async(t,e,s)=>new Promise(((l,a)=>{const n=new window.XMLHttpRequest;n.open(t,e,!0),n.withCredentials=!0;for(const t in s.headers||{})n.setRequestHeader(t,s.headers[t]);n.addEventListener("load",(function(t){l({status:this.status,text:this.responseText,json:async()=>JSON.parse(this.responseText)})})),n.addEventListener("error",(function(t){a(new Error("xhr error"))})),n.upload&&s.onUploadProgress&&n.upload.addEventListener("progress",(function(t){s.onUploadProgress&&s.onUploadProgress(t)})),n.send(s.body)}));var rt=(t,e)=>dt("get",t,e),ut=(t,e)=>dt("post",t,e);const ct=s({data:()=>({unchangedJson:"{}",changedJson:"{}",settings:null,defaultSettings:null,ws:null,drawUrl:"",favoriteSelection:{hovered:"",items:[],pagination:{page:1,perPage:20}}}),async created(){this.ws=new ot(this.$conf.wsBase+"/drawcast",this.$me.token),this.ws.onMessage("init",(async t=>{this.settings=t.settings,this.defaultSettings=t.defaultSettings,this.unchangedJson=JSON.stringify(t.settings),this.drawUrl=t.drawUrl;const e=await rt("/api/drawcast/all-images/",{});this.favoriteSelection.items=await e.json()})),this.ws.connect()},watch:{settings:{deep:!0,handler(t){this.changedJson=JSON.stringify(t)}}},computed:{changed(){return this.unchangedJson!==this.changedJson},receiveUrl(){return`${location.protocol}//${location.host}/widget/drawcast_receive/${this.$me.widgetToken}/`},favoriteSelectionTotalPages(){return Math.floor(this.favoriteSelection.items.length/this.favoriteSelection.pagination.perPage)+(this.favoriteSelection.items.length%this.favoriteSelection.pagination.perPage==0?0:1)},currentFavoriteSelectionItems(){const t=(this.favoriteSelection.pagination.page-1)*this.favoriteSelection.pagination.perPage;return this.favoriteSelection.items.slice(t,t+this.favoriteSelection.pagination.perPage)}},methods:{toggleFavorite(t){this.settings.favorites.includes(t)?this.settings.favorites=this.settings.favorites.filter((e=>e!==t)):this.settings.favorites.push(t)},soundUploaded(t){this.settings.notificationSound={filename:t.originalname,file:t.filename,volume:100}},sendSave(){this.sendMsg({event:"save",settings:{canvasWidth:parseInt(this.settings.canvasWidth,10)||720,canvasHeight:parseInt(this.settings.canvasHeight,10)||405,submitButtonText:this.settings.submitButtonText,submitConfirm:this.settings.submitConfirm,customDescription:this.settings.customDescription,palette:this.settings.palette,displayDuration:parseInt(this.settings.displayDuration,10)||5e3,displayLatestForever:this.settings.displayLatestForever,displayLatestAutomatically:this.settings.displayLatestAutomatically,notificationSound:this.settings.notificationSound,favorites:this.settings.favorites}})},sendMsg(t){this.ws.send(JSON.stringify(t))}},unmounted(){this.ws&&this.ws.disconnect()}}),mt={id:"app"},ht={id:"top",ref:"top"},pt={id:"actionbar",class:"p-1"},gt=["disabled"],yt=["href"],bt=["href"],ft={id:"main",ref:"main"},vt={key:0,class:"table is-striped",ref:"table"},kt=o("tr",null,[o("td",{colspan:"3"},"General")],-1),wt=o("td",null,[o("code",null,"settings.canvasWidth")],-1),Ct=o("td",null,[y(" Width of the drawing area."),o("br"),y(" Caution: changing this will clear the area for currenty connected users. ")],-1),Vt=o("td",null,[o("code",null,"settings.canvasHeight")],-1),xt=o("td",null,[y(" Height of the drawing area."),o("br"),y(" Caution: changing this will clear the area for currenty connected users. ")],-1),St=o("td",null,[o("code",null,"settings.displayDuration")],-1),Ut=o("td",null," The duration in Milliseconds that each drawing will be shown ",-1),_t=o("td",null,[o("code",null,"settings.displayLatestForever")],-1),It=o("td",null,"If checked, the latest drawing will be shown indefinately.",-1),Pt=o("td",null,[o("code",null,"settings.displayLatestAutomatically")],-1),Tt=o("td",null," If checked, the latest drawing will be shown in widget automatically. ",-1),At=o("td",null,[o("code",null,"settings.submitButtonText")],-1),$t=o("td",null,null,-1),Mt=o("td",null,[o("code",null,"settings.submitConfirm")],-1),Lt=o("td",null," Leave empty if no confirm is required by user before sending. ",-1),Dt=o("td",null,[o("code",null,"settings.customDescription")],-1),Et=o("td",null,"Description text below the drawing panel.",-1),jt=o("td",null,[o("code",null,"settings.palette")],-1),Rt=["onUpdate:modelValue"],Ot=o("br",null,null,-1),Ft=o("br",null,null,-1),Jt=o("td",null,[y(" Default colors appearing on the draw page."),o("br"),y(" Caution: Changing this will change selected color for currenty connected users. ")],-1),Nt=o("td",null,[o("code",null,"settings.notificationSound")],-1),zt={key:0,class:"spacerow media-holder"},Bt=[o("i",{class:"fa fa-remove"},null,-1)],Wt=o("td",null,[y(" Add a sound here that plays when new drawings arrive. "),o("br"),y(" Note: Not played in drawing window, only in widget. ")],-1),qt=o("code",null,"settings.favorites",-1),Ht={class:"preview"},Kt=["src"],Gt=o("div",null,"Currently selected favorites:",-1),Yt={class:"favorites"},Xt=["src","onClick","onMouseover"],Qt=o("div",{class:"mt-2"},"Select favorites:",-1),Zt={class:"favorites-select"},te=["src","onClick","onMouseover"],ee=["disabled"],se=["disabled"],le=o("td",null," The favorites will always be displayed at the beginning of the gallery in the draw widget. ",-1);var ae=$(ct,[["render",function(t,e,s,u,p,g){const y=l("navbar"),k=l("player"),w=l("volume-slider"),C=l("upload");return a(),n("div",mt,[o("div",ht,[i(y),o("div",pt,[o("button",{class:"button is-small is-primary mr-1",disabled:!t.changed,onClick:e[0]||(e[0]=(...e)=>t.sendSave&&t.sendSave(...e))}," Save ",8,gt),o("a",{class:"button is-small mr-1",href:t.receiveUrl,target:"_blank"},"Open widget",8,yt),o("a",{class:"button is-small",href:t.drawUrl,target:"_blank"},"Open draw",8,bt)])],512),o("div",ft,[t.settings?(a(),n("table",vt,[o("tbody",null,[kt,o("tr",null,[wt,o("td",null,[m(o("input",{class:"input is-small",type:"text","onUpdate:modelValue":e[1]||(e[1]=e=>t.settings.canvasWidth=e)},null,512),[[h,t.settings.canvasWidth]])]),Ct]),o("tr",null,[Vt,o("td",null,[m(o("input",{class:"input is-small",type:"text","onUpdate:modelValue":e[2]||(e[2]=e=>t.settings.canvasHeight=e)},null,512),[[h,t.settings.canvasHeight]])]),xt]),o("tr",null,[St,o("td",null,[m(o("input",{class:"input is-small",type:"text","onUpdate:modelValue":e[3]||(e[3]=e=>t.settings.displayDuration=e)},null,512),[[h,t.settings.displayDuration]])]),Ut]),o("tr",null,[_t,o("td",null,[m(o("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=e=>t.settings.displayLatestForever=e)},null,512),[[b,t.settings.displayLatestForever]])]),It]),o("tr",null,[Pt,o("td",null,[m(o("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=e=>t.settings.displayLatestAutomatically=e)},null,512),[[b,t.settings.displayLatestAutomatically]])]),Tt]),o("tr",null,[At,o("td",null,[m(o("input",{class:"input is-small",type:"text","onUpdate:modelValue":e[6]||(e[6]=e=>t.settings.submitButtonText=e)},null,512),[[h,t.settings.submitButtonText]])]),$t]),o("tr",null,[Mt,o("td",null,[m(o("input",{class:"input is-small",type:"text","onUpdate:modelValue":e[7]||(e[7]=e=>t.settings.submitConfirm=e)},null,512),[[h,t.settings.submitConfirm]])]),Lt]),o("tr",null,[Dt,o("td",null,[m(o("textarea",{class:"textarea","onUpdate:modelValue":e[8]||(e[8]=e=>t.settings.customDescription=e)},null,512),[[h,t.settings.customDescription]])]),Et]),o("tr",null,[jt,o("td",null,[(a(!0),n(d,null,r(t.settings.palette,((e,s)=>(a(),n("label",{class:"square",key:s},[m(o("input",{type:"color","onUpdate:modelValue":e=>t.settings.palette[s]=e},null,8,Rt),[[h,t.settings.palette[s]]]),o("span",{class:"square-inner",style:f({backgroundColor:e})},null,4)])))),128)),Ot,Ft,o("button",{class:"button is-small",onClick:e[9]||(e[9]=e=>t.settings.palette=t.defaultSettings.palette)}," Reset to default palette ")]),Jt]),o("tr",null,[Nt,o("td",null,[t.settings.notificationSound?(a(),n("div",zt,[i(k,{src:t.settings.notificationSound.file,name:t.settings.notificationSound.filename,volume:t.settings.notificationSound.volume,class:"button is-small"},null,8,["src","name","volume"]),i(w,{modelValue:t.settings.notificationSound.volume,"onUpdate:modelValue":e[10]||(e[10]=e=>t.settings.notificationSound.volume=e)},null,8,["modelValue"]),o("button",{class:"button is-small",onClick:e[11]||(e[11]=e=>t.settings.notificationSound=null)},Bt)])):c("",!0),i(C,{onUploaded:t.soundUploaded,accept:"audio/*",label:"Upload Audio"},null,8,["onUploaded"])]),Wt]),o("tr",null,[o("td",null,[qt,o("div",Ht,[t.favoriteSelection.hovered?(a(),n("img",{key:0,src:t.favoriteSelection.hovered},null,8,Kt)):c("",!0)])]),o("td",null,[Gt,o("div",Yt,[(a(!0),n(d,null,r(t.settings.favorites,((s,l)=>(a(),n("img",{src:s,key:l,width:"50",height:"50",onClick:e=>t.toggleFavorite(s),onMouseover:e=>t.favoriteSelection.hovered=s,onMouseleave:e[12]||(e[12]=e=>t.favoriteSelection.hovered=""),class:"thumbnail is-favorited mr-1"},null,40,Xt)))),128))]),Qt,o("div",Zt,[(a(!0),n(d,null,r(t.currentFavoriteSelectionItems,((s,l)=>(a(),n("img",{src:s,key:l,width:"50",height:"50",onClick:e=>t.toggleFavorite(s),onMouseover:e=>t.favoriteSelection.hovered=s,onMouseleave:e[13]||(e[13]=e=>t.favoriteSelection.hovered=""),class:v(["thumbnail mr-1",{"is-favorited":t.settings.favorites.includes(s)}])},null,42,te)))),128))]),o("span",{class:"button is-small",onClick:e[14]||(e[14]=e=>t.favoriteSelection.pagination.page=t.favoriteSelection.pagination.page-1),disabled:!(t.favoriteSelection.pagination.page>1)||null},"Prev",8,ee),o("span",{class:"button is-small",onClick:e[15]||(e[15]=e=>t.favoriteSelection.pagination.page=t.favoriteSelection.pagination.page+1),disabled:!(t.favoriteSelection.pagination.page<t.favoriteSelectionTotalPages)||null},"Next",8,se)]),le])])],512)):c("",!0)],512)])}]]);const ne=s({data:()=>({unchangedJson:"[]",changedJson:"[]",variables:[]}),computed:{changed(){return this.unchangedJson!==this.changedJson}},methods:{remove(t){this.variables=this.variables.filter(((e,s)=>s!==t))},onAdd(){this.variables.push({name:"",value:""})},setChanged(){this.changedJson=JSON.stringify({variables:this.variables})},setUnchanged(){this.unchangedJson=JSON.stringify({variables:this.variables}),this.changedJson=this.unchangedJson},async sendSave(){await fetch("/save-variables",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({variables:this.variables})}),this.setUnchanged()}},watch:{variables:{deep:!0,handler(){this.setChanged()}}},async mounted(){const t=await fetch("/api/page/variables");if(200!==t.status)return void this.$router.push({name:"login"});const e=await t.json();this.variables=e.variables,this.setUnchanged()}}),ie={id:"app"},oe={id:"top",ref:"top"},de={id:"actionbar",class:"p-1"},re=["disabled"],ue={id:"main"},ce={class:"mb-4"},me=o("h1",{class:"title mb-2"},"Global Variables",-1),he=o("div",{class:"help"},[y(" Variables can be used from commands with "),o("code",null,"$var(variable_name)"),y(". In addition to the global variables defined here, commands can define their own local variables which have precedence over the global ones. ")],-1),pe={class:"table is-striped"},ge=o("thead",null,[o("tr",null,[o("th",null,"Name"),o("th",null,"Value"),o("th")])],-1),ye=["onUpdate:modelValue"],be=["onUpdate:modelValue"],fe=o("i",{class:"fa fa-trash"},null,-1);var ve=$(ne,[["render",function(t,e,s,u,c,p){const y=l("navbar"),b=l("doubleclick-button");return a(),n("div",ie,[o("div",oe,[i(y),o("div",de,[o("button",{class:"button is-small",onClick:e[0]||(e[0]=(...e)=>t.onAdd&&t.onAdd(...e))},"Add"),o("button",{class:"button is-small is-primary",disabled:!t.changed,onClick:e[1]||(e[1]=(...e)=>t.sendSave&&t.sendSave(...e))}," Save ",8,re)])],512),o("div",ue,[o("div",ce,[me,he,o("table",pe,[ge,o("tbody",null,[(a(!0),n(d,null,r(t.variables,((e,s)=>(a(),n("tr",{key:s},[o("td",null,[m(o("input",{type:"text",class:"input is-small","onUpdate:modelValue":t=>e.name=t},null,8,ye),[[h,e.name]])]),o("td",null,[m(o("input",{type:"text",class:"input is-small","onUpdate:modelValue":t=>e.value=t},null,8,be),[[h,e.value]])]),o("td",null,[i(b,{class:"button is-small mr-1",message:"Are you sure?",timeout:1e3,onDoubleclick:e=>t.remove(s)},{default:g((()=>[fe])),_:2},1032,["onDoubleclick"])])])))),128))])])])])])}]]);const ke=s({data:()=>({user:"",pass:"",email:"",error:"",success:!1}),computed:{canRegister(){return this.user&&this.pass&&this.email&&!this.error}},methods:{async onRequestVerificationEmail(){this.success=!1,this.error="";const t=await fetch("/api/user/_resend_verification_mail",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:this.email})});if(200===t.status)this.success=!0;else try{this.error=(await t.json()).reason}catch(e){this.error="Unknown error"}},async submit(){this.success=!1,this.error="";const t=await fetch("/api/user/_register",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({user:this.user,pass:this.pass,email:this.email})});if(200===t.status)this.success=!0;else try{this.error=(await t.json()).reason}catch(e){this.error="Unknown error"}}}}),we={class:"center-screen"},Ce=o("h1",{class:"title is-6"},"Hyottoko.club",-1),Ve={key:0,class:"field has-background-success-light has-text-success-dark"},xe=y(" Account registered. Please check your mail. Click "),Se=y("here"),Ue=y(" to login. "),_e={key:1},Ie={key:0,class:"field has-background-danger-light has-text-danger-dark"},Pe={key:0},Te=y(" A user with this email is already registered. "),Ae=o("br",null,null,-1),$e=y("Request a password reset."),Me={key:1},Le=y(" A user with this email is already registered. "),De=o("br",null,null,-1),Ee={key:2},je={key:3},Re={key:4},Oe={class:"field"},Fe={class:"control has-icons-left"},Je=o("span",{class:"icon is-small is-left"},[o("i",{class:"fa fa-user"})],-1),Ne={class:"field"},ze={class:"control has-icons-left"},Be=o("span",{class:"icon is-small is-left"},[o("i",{class:"fa fa-envelope"})],-1),We={class:"field"},qe={class:"control has-icons-left"},He=o("span",{class:"icon is-small is-left"},[o("i",{class:"fa fa-lock"})],-1),Ke={class:"field"},Ge=["disabled"];var Ye=$(ke,[["render",function(t,e,s,d,r,y){const b=l("router-link");return a(),n("div",we,[Ce,t.success?(a(),n("div",Ve,[xe,i(b,{to:{name:"login"}},{default:g((()=>[Se])),_:1}),Ue])):(a(),n("div",_e,[t.error?(a(),n("div",Ie,["verified_mail_already_exists"===t.error?(a(),n("div",Pe,[Te,Ae,i(b,{to:{name:"forgot-password"}},{default:g((()=>[$e])),_:1})])):"unverified_mail_already_exists"===t.error?(a(),n("div",Me,[Le,De,o("span",{class:"button is-small",onClick:e[0]||(e[0]=(...e)=>t.onRequestVerificationEmail&&t.onRequestVerificationEmail(...e))},"Resend verification email")])):"verified_name_already_exists"===t.error?(a(),n("div",Ee," A user with this name is already registered. ")):"unverified_name_already_exists"===t.error?(a(),n("div",je," A user with this name is already registered. ")):(a(),n("span",Re,u(t.error),1))])):c("",!0),o("div",Oe,[o("div",Fe,[m(o("input",{class:"input is-small",type:"text",placeholder:"User","onUpdate:modelValue":[e[1]||(e[1]=e=>t.user=e),e[2]||(e[2]=e=>t.error="")]},null,512),[[h,t.user]]),Je])]),o("div",Ne,[o("div",ze,[m(o("input",{class:"input is-small",type:"email",placeholder:"Email","onUpdate:modelValue":[e[3]||(e[3]=e=>t.email=e),e[4]||(e[4]=e=>t.error="")]},null,512),[[h,t.email]]),Be])]),o("div",We,[o("div",qe,[m(o("input",{class:"input is-small",type:"password",placeholder:"Password","onUpdate:modelValue":[e[5]||(e[5]=e=>t.pass=e),e[6]||(e[6]=e=>t.error="")],onKeyup:e[7]||(e[7]=p(((...e)=>t.submit&&t.submit(...e)),["enter"]))},null,544),[[h,t.pass]]),He])]),o("div",Ke,[o("button",{class:"button is-small is-primary",disabled:!t.canRegister||null,onClick:e[8]||(e[8]=(...e)=>t.submit&&t.submit(...e))}," Register ",8,Ge)])]))])}]]);const Xe=s({data:()=>({unchangedJson:"[]",changedJson:"[]",user:{id:0,name:"",email:"",pass:"",groups:[]},twitch_channels:[]}),computed:{isAdmin(){return this.user.groups.includes("admin")},changed(){return this.unchangedJson!==this.changedJson},accessTokenLink(){if(!this.user.tmi_identity_client_id)return;const t=document.location,e=`${t.protocol}//${t.host}/twitch/redirect_uri`;return`https://id.twitch.tv/oauth2/authorize?response_type=token&client_id=${this.user.tmi_identity_client_id}&redirect_uri=${e}&scope=${["analytics:read:extensions","analytics:read:games","bits:read","channel:edit:commercial","channel:manage:broadcast","channel:manage:extensions","channel:manage:redemptions","channel:manage:videos","channel:read:editors","channel:read:hype_train","channel:read:redemptions","channel:read:stream_key","channel:read:subscriptions","clips:edit","moderation:read","user:edit","user:edit:follows","user:read:blocked_users","user:manage:blocked_users","user:read:broadcast","user:read:email"].join("+")}`}},methods:{setChanged(){this.changedJson=JSON.stringify({user:this.user,twitch_channels:this.twitch_channels})},setUnchanged(){this.unchangedJson=JSON.stringify({user:this.user,twitch_channels:this.twitch_channels}),this.changedJson=this.unchangedJson},rmchannel(t){this.twitch_channels=this.twitch_channels.filter(((e,s)=>s!==t))},addchannel(){this.twitch_channels.push({channel_id:"",channel_name:"",access_token:""})},async loadid(t){this.twitch_channels[t].channel_id=await this.getUserIdByName(this.twitch_channels[t].channel_name)},async getUserIdByName(t){const e={name:t,client_id:this.user.tmi_identity_client_id||null,client_secret:this.user.tmi_identity_client_secret||null},s=await fetch("/twitch/user-id-by-name",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)});try{return(await s.json()).id}catch(l){return""}},async sendSave(){await fetch("/api/save-settings",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({user:this.user,twitch_channels:this.twitch_channels})}),this.setUnchanged()}},watch:{user:{deep:!0,handler(){this.setChanged()}},twitch_channels:{deep:!0,handler(){this.setChanged()}}},async mounted(){const t=await fetch("/api/page/settings");if(200!==t.status)return void this.$router.push({name:"login"});const e=await t.json();this.user=e.user,this.twitch_channels=e.twitchChannels,this.setUnchanged()}}),Qe={id:"app"},Ze={id:"top",ref:"top"},ts={id:"actionbar",class:"p-1"},es=["disabled"],ss={id:"main"},ls={class:"mb-4"},as=o("h1",{class:"title mb-2"},"User",-1),ns={class:"table is-striped"},is=o("td",null,"Name:",-1),os=o("td",null,"Email:",-1),ds=o("td",null,"Password:",-1),rs={key:0,class:"mb-4"},us=o("h1",{class:"title mb-2"},"Twitch-Bot",-1),cs=o("p",null,[y(" Please refer to "),o("a",{href:"https://dev.twitch.tv/docs/irc/#building-the-bot",target:"_blank"},"building the bot"),y(". ")],-1),ms={class:"table is-striped"},hs=o("td",null,"Bot name:",-1),ps=o("td",null,"Bot oauth (pass):",-1),gs=o("td",null,"Bot client_id:",-1),ys=o("td",null,"Bot client_secret:",-1),bs={class:"mb-4"},fs=o("h1",{class:"title mb-2"},"Twitch Channels",-1),vs=y(" List of twitch channels where the bot will connect to. "),ks={key:0},ws={key:0,class:"table is-striped"},Cs=o("thead",null,[o("tr",null,[o("td",null,"Channel name"),o("td",null,"Channel id*"),o("td",null,"Access Token*"),o("td")])],-1),Vs=["onUpdate:modelValue"],xs=["onUpdate:modelValue"],Ss=["onClick"],Us=["onUpdate:modelValue"],_s=["onClick"],Is=[o("i",{class:"fa fa-remove"},null,-1)],Ps={key:1,class:"content"},Ts=o("p",null," Channel Id* and Access Token*: You may not need the client id or access token. No public feature currently uses them. ",-1),As={key:0},$s={key:1,class:"list"},Ms=o("li",{class:"list-item"},"Login to twitch as the channel owner",-1),Ls={class:"list-item"},Ds=y(" Click "),Es=["href"],js=y(" to authorize the bot with the channel "),Rs=o("li",{class:"list-item"}," If authorized, you get redirected back to hyottoko.club, and the access token will display ",-1),Os={key:2};var Fs=$(Xe,[["render",function(t,e,s,p,g,y){const b=l("navbar");return a(),n("div",Qe,[o("div",Ze,[i(b),o("div",ts,[o("button",{class:"button is-small is-primary",disabled:!t.changed,onClick:e[0]||(e[0]=(...e)=>t.sendSave&&t.sendSave(...e))}," Save ",8,es)])],512),o("div",ss,[o("div",ls,[as,o("table",ns,[o("tbody",null,[o("tr",null,[is,o("td",null,u(t.user.name),1)]),o("tr",null,[os,o("td",null,[m(o("input",{type:"email","onUpdate:modelValue":e[1]||(e[1]=e=>t.user.email=e)},null,512),[[h,t.user.email]])])]),o("tr",null,[ds,o("td",null,[m(o("input",{type:"password","onUpdate:modelValue":e[2]||(e[2]=e=>t.user.pass=e)},null,512),[[h,t.user.pass]])])])])])]),t.isAdmin?(a(),n("div",rs,[us,cs,o("table",ms,[o("tbody",null,[o("tr",null,[hs,o("td",null,[m(o("input",{class:"input is-small",type:"text","onUpdate:modelValue":e[3]||(e[3]=e=>t.user.tmi_identity_username=e)},null,512),[[h,t.user.tmi_identity_username]])])]),o("tr",null,[ps,o("td",null,[m(o("input",{class:"input is-small",type:"password","onUpdate:modelValue":e[4]||(e[4]=e=>t.user.tmi_identity_password=e)},null,512),[[h,t.user.tmi_identity_password]])])]),o("tr",null,[gs,o("td",null,[m(o("input",{class:"input is-small",type:"text","onUpdate:modelValue":e[5]||(e[5]=e=>t.user.tmi_identity_client_id=e)},null,512),[[h,t.user.tmi_identity_client_id]])])]),o("tr",null,[ys,o("td",null,[m(o("input",{class:"input is-small",type:"password","onUpdate:modelValue":e[6]||(e[6]=e=>t.user.tmi_identity_client_secret=e)},null,512),[[h,t.user.tmi_identity_client_secret]])])])])])])):c("",!0),o("div",bs,[fs,o("p",null,[vs,0===t.twitch_channels.length?(a(),n("span",ks," Currently no channels are configured. ")):c("",!0)]),t.twitch_channels.length>0?(a(),n("table",ws,[Cs,o("tbody",null,[(a(!0),n(d,null,r(t.twitch_channels,((e,s)=>(a(),n("tr",{key:e.channel_name},[o("td",null,[m(o("input",{class:"input is-small",type:"text","onUpdate:modelValue":t=>e.channel_name=t},null,8,Vs),[[h,e.channel_name]])]),o("td",null,[e.channel_id?m((a(),n("input",{key:0,class:"input is-small",type:"text","onUpdate:modelValue":t=>e.channel_id=t},null,8,xs)),[[h,e.channel_id]]):c("",!0),e.channel_id?c("",!0):(a(),n("button",{key:1,class:"button is-small",onClick:e=>t.loadid(s)}," Load id ",8,Ss))]),o("td",null,[m(o("input",{class:"input is-small",type:"password","onUpdate:modelValue":t=>e.access_token=t},null,8,Us),[[h,e.access_token]])]),o("td",null,[o("button",{class:"button is-small",onClick:e=>t.rmchannel(s)},Is,8,_s)])])))),128))])])):c("",!0),o("button",{class:"button is-small",onClick:e[7]||(e[7]=e=>t.addchannel())}," Add channel ")]),t.twitch_channels.length>0?(a(),n("div",Ps,[Ts,t.accessTokenLink?(a(),n("p",As,"To get an access token, do the following:")):c("",!0),t.accessTokenLink?(a(),n("ol",$s,[Ms,o("li",Ls,[Ds,o("a",{href:t.accessTokenLink,target:"_blank"},"here",8,Es),js]),Rs])):t.isAdmin?(a(),n("p",Os,' To configure an access token, please configure the "Bot client_id" above. ')):c("",!0)])):c("",!0)])])}]]);const Js=s({data:()=>({codeExamples:[{desc:"Hide Player:",code:".player { position: absolute; }"},{desc:"Change font to external font:",code:"@import url('https://fonts.googleapis.com/css2?family=Shadows+Into+Light');\nbody { font-family: 'Shadows into Light'; font-size: 30px; }"},{desc:"Change colors of items:",code:".playing { background: #222; color: #bbb; }\n.not-playing { background: #eee; color: #444; }"},{desc:"Display something in front of the currently playing item title:",code:".playing .title:before { content: '🎶 Now Playing 🎶 ' }"},{desc:"Add a margin between the items:",code:".item { margin-bottom: 20px; }"},{desc:"Hide votes and meta:",code:".vote, .meta { display: none; }"},{desc:"Hide down votes:",code:".vote-down { display: none; }"},{desc:"Hite all items starting from the 6th:",code:".item:nth-child(n+6) { display: none; }"},{desc:"Show only titles and marquee the current song:",code:".playing .title { animation: init 10s linear forwards, back 10s 0s linear infinite; }\n.title { margin: 1em 0; white-space: nowrap; }\n.not-playing .title { text-overflow: ellipsis; overflow: hidden; }\n.meta, .vote { display: none; }\n@keyframes back {\n    from { transform: translateX(100%); }\n    to { transform: translateX(-100%); }\n}\n@keyframes init {\n    to { transform: translateX(-100%); }\n}"}],playerVisible:!1,playlist:[],settings:{volume:100,hideVideoImage:{file:"",filename:""}},filter:{tag:""},ws:null,resrinput:"",srinput:"",inited:!1,tab:"playlist",importPlaylist:""}),computed:{tags(){const t=[];return this.playlist.forEach((e=>{e.tags.forEach((e=>{const s=t.findIndex((t=>t.value===e));-1===s?t.push({value:e,count:1}):t[s].count++}))})),t},player(){return this.$refs.youtube||{stop:()=>{},play:()=>{},pause:()=>{},unpause:()=>{},setVolume:()=>{},setLoop:()=>{},playing:()=>{}}},filteredPlaylist(){return""===this.filter.tag?this.playlist:this.playlist.filter((t=>t.tags.includes(this.filter.tag)))},item(){return this.filteredPlaylist[0]},hasItems(){return 0!==this.filteredPlaylist.length},playerstyle(){return this.playerVisible?"":"width:0;height:0;padding:0;margin-bottom:0;"},togglePlayerButtonText(){return this.playerVisible?"Hide Player":"Show Player"},importPlaylistUrl:()=>`${location.protocol}//${location.host}/sr/import`,exportPlaylistUrl:()=>`${location.protocol}//${location.host}/sr/export`,widgetUrl(){return`${location.protocol}//${location.host}/widget/sr/${this.$me.widgetToken}/`}},methods:{sendSettings(){this.sendCtrl("settings",[this.settings])},hideVideoImageRemoved(){this.settings.hideVideoImage={filename:"",file:""},this.sendSettings()},hideVideoImageUploaded(t){this.settings.hideVideoImage={filename:t.originalname,file:t.filename},this.sendSettings()},onTagUpdated(t){this.updateTag(t[0],t[1])},onPlaylistCtrl(t){this.sendCtrl(t[0],t[1])},applyFilter(t){this.sendCtrl("filter",[{tag:t}])},async doImportPlaylist(){200===(await ut(this.importPlaylistUrl,{headers:{Accept:"application/json","Content-Type":"application/json"},body:this.importPlaylist})).status?(this.tab="playlist",this.$toasted.success("Import successful")):this.$toasted.error("Import failed")},togglePlayer(){this.playerVisible=!this.playerVisible,this.playerVisible?this.player.playing()||this.play():this.player.stop()},resr(){""!==this.resrinput&&this.sendCtrl("resr",[this.resrinput])},sr(){""!==this.srinput&&this.sendCtrl("sr",[this.srinput])},sendCtrl(t,e){this.sendMsg({event:"ctrl",ctrl:t,args:e})},ended(){this.sendMsg({event:"ended"})},sendMsg(t){this.ws.send(JSON.stringify(t))},play(){this.adjustVolume(this.settings.volume),this.playerVisible&&this.hasItems&&(this.player.play(this.item.yt),this.sendMsg({event:"play",id:this.item.id}))},unpause(){this.hasItems&&(this.player.unpause(),this.sendMsg({event:"unpause",id:this.item.id}))},pause(){this.playerVisible&&this.hasItems&&(this.player.pause(),this.sendMsg({event:"pause"}))},adjustVolume(t){this.player.setVolume(t)},updateTag(t,e){t!==e&&(this.sendCtrl("updatetag",[t,e]),this.tagEditIdx=-1)}},async mounted(){this.$nextTick((()=>{this.ws=new ot(this.$conf.wsBase+"/sr",this.$me.token),this.ws.onMessage("settings",(t=>{this.settings=t.settings})),this.ws.onMessage(["pause"],(t=>{this.player.playing()&&this.pause()})),this.ws.onMessage(["unpause"],(t=>{this.player.playing()||this.unpause()})),this.ws.onMessage(["loop"],(t=>{this.player.setLoop(!0)})),this.ws.onMessage(["noloop"],(t=>{this.player.setLoop(!1)})),this.ws.onMessage(["onEnded","prev","skip","remove","clear","move"],(t=>{this.settings=t.settings;const e=this.filteredPlaylist.length>0?this.filteredPlaylist[0].id:null;this.filter=t.filter,this.playlist=t.playlist;e!==(this.filteredPlaylist.length>0?this.filteredPlaylist[0].id:null)&&this.play()})),this.ws.onMessage(["filter"],(t=>{this.settings=t.settings;const e=this.filteredPlaylist.length>0?this.filteredPlaylist[0].id:null;this.filter=t.filter,this.playlist=t.playlist,this.filteredPlaylist.find((t=>t.id===e))||this.play()})),this.ws.onMessage(["dislike","like","video","playIdx","resetStats","shuffle","tags"],(t=>{this.settings=t.settings,this.filter=t.filter,this.playlist=t.playlist})),this.ws.onMessage(["add","init"],(t=>{this.settings=t.settings,this.filter=t.filter,this.playlist=t.playlist,this.player.playing()||this.play(),this.inited=!0})),this.ws.connect(),this.play()}))},unmounted(){this.ws&&this.ws.disconnect()}}),Ns=t=>(k("data-v-17e4d5b4"),t=t(),w(),t),zs={id:"app"},Bs={id:"top",ref:"top"},Ws={id:"actionbar",class:"p-1"},qs=["disabled"],Hs=[Ns((()=>o("i",{class:"fa fa-eraser mr-1"},null,-1))),Ns((()=>o("span",{class:"txt"}," Reset stats",-1)))],Ks=["disabled"],Gs=[Ns((()=>o("i",{class:"fa fa-eject mr-1"},null,-1))),Ns((()=>o("span",{class:"txt"}," Clear",-1)))],Ys=["disabled"],Xs=[Ns((()=>o("i",{class:"fa fa-random mr-1"},null,-1))),Ns((()=>o("span",{class:"txt"}," Shuffle",-1)))],Qs=["disabled","title"],Zs=Ns((()=>o("i",{class:"fa fa-tv mr-1"},null,-1))),tl={class:"txt"},el={class:"field has-addons mr-1"},sl={class:"control"},ll=["disabled"],al={class:"control"},nl=["disabled"],il=[Ns((()=>o("i",{class:"fa fa-search mr-1"},null,-1))),y(" from playlist ")],ol={class:"field has-addons mr-1"},dl={class:"control"},rl=["disabled"],ul={class:"control"},cl=["disabled"],ml=[Ns((()=>o("i",{class:"fa fa-plus mr-1"},null,-1))),y(" from YouTube ")],hl=["disabled","href"],pl={id:"main",ref:"main"},gl={style:{width:"640px","max-width":"100%"}},yl={class:"tabs"},bl=[Ns((()=>o("a",null,"Playlist",-1)))],fl=[Ns((()=>o("a",null,"Settings",-1)))],vl=[Ns((()=>o("a",null,"Help",-1)))],kl=[Ns((()=>o("a",null,"Tags",-1)))],wl=[Ns((()=>o("a",null,"Import/Export",-1)))],Cl={key:0},Vl={class:"mb-1"},xl=["href"],Sl=[Ns((()=>o("i",{class:"fa fa-download mr-1"},null,-1))),y(" Export playlist")],Ul=[Ns((()=>o("i",{class:"fa fa-upload mr-1"},null,-1))),y(" Import playlist ")],_l={key:1,id:"help"},Il={key:2,id:"tags"},Pl={key:3,id:"settings"},Tl={key:0,class:"table is-striped",ref:"table"},Al=Ns((()=>o("td",null,[o("code",null,"settings.volume")],-1))),$l=Ns((()=>o("td",null,"Base volume for all songs played",-1))),Ml=Ns((()=>o("td",null,[o("code",null,"settings.hideVideoImage")],-1))),Ll={key:0,class:"mb-1"},Dl=Ns((()=>o("br",null,null,-1))),El=[Ns((()=>o("i",{class:"fa fa-remove mr-1"},null,-1))),y(" Remove Image ")],jl=Ns((()=>o("td",null,"Image to display when a video is hidden.",-1))),Rl=Ns((()=>o("td",null,[o("code",null,"settings.showProgressBar")],-1))),Ol=Ns((()=>o("td",null,"Show a progress bar in the bottom part of the video in the widget.",-1))),Fl=Ns((()=>o("td",null,[o("code",null,"settings.customCss")],-1))),Jl=C("<p data-v-17e4d5b4>Classes that can be used for styling:</p><table data-v-17e4d5b4><thead data-v-17e4d5b4><tr data-v-17e4d5b4><th data-v-17e4d5b4>Class</th><th data-v-17e4d5b4>Description</th></tr></thead><tbody data-v-17e4d5b4><tr data-v-17e4d5b4><td data-v-17e4d5b4><code data-v-17e4d5b4>.wrapper</code></td><td data-v-17e4d5b4>Wrapper for everything</td></tr><tr data-v-17e4d5b4><td data-v-17e4d5b4><code data-v-17e4d5b4>.player</code></td><td data-v-17e4d5b4>The player</td></tr><tr data-v-17e4d5b4><td data-v-17e4d5b4><code data-v-17e4d5b4>.list</code></td><td data-v-17e4d5b4>The playlist</td></tr><tr data-v-17e4d5b4><td data-v-17e4d5b4><code data-v-17e4d5b4>.item</code></td><td data-v-17e4d5b4>A playlist item</td></tr><tr data-v-17e4d5b4><td data-v-17e4d5b4><code data-v-17e4d5b4>.playing</code></td><td data-v-17e4d5b4>Currently playing item</td></tr><tr data-v-17e4d5b4><td data-v-17e4d5b4><code data-v-17e4d5b4>.not-playing</code></td><td data-v-17e4d5b4>Queued items</td></tr><tr data-v-17e4d5b4><td data-v-17e4d5b4><code data-v-17e4d5b4>.title</code></td><td data-v-17e4d5b4>Title of a playlist item</td></tr><tr data-v-17e4d5b4><td data-v-17e4d5b4><code data-v-17e4d5b4>.vote</code></td><td data-v-17e4d5b4>Vote elements</td></tr><tr data-v-17e4d5b4><td data-v-17e4d5b4><code data-v-17e4d5b4>.vote-up</code></td><td data-v-17e4d5b4>Up vote element</td></tr><tr data-v-17e4d5b4><td data-v-17e4d5b4><code data-v-17e4d5b4>.vote-down</code></td><td data-v-17e4d5b4>Down vote element</td></tr><tr data-v-17e4d5b4><td data-v-17e4d5b4><code data-v-17e4d5b4>.meta</code></td><td data-v-17e4d5b4>Meta info about an item</td></tr><tr data-v-17e4d5b4><td data-v-17e4d5b4><code data-v-17e4d5b4>.meta-user</code></td><td data-v-17e4d5b4>User who requested the song</td></tr><tr data-v-17e4d5b4><td data-v-17e4d5b4><code data-v-17e4d5b4>.meta-plays</code></td><td data-v-17e4d5b4>How many times the song was played</td></tr></tbody></table><p data-v-17e4d5b4><b data-v-17e4d5b4>Examples:</b></p>",3),Nl={key:4,id:"playlist",class:"table-container"};var zl=$(Js,[["render",function(t,e,s,g,k,w){const C=l("navbar"),V=l("youtube"),x=l("help"),S=l("tags-editor"),U=l("volume-slider"),_=l("responsive-image"),I=l("upload"),P=l("codearea"),T=l("playlist-editor");return a(),n("div",zs,[o("div",Bs,[i(C),o("div",Ws,[o("button",{class:"button is-small mr-1",disabled:!t.inited||null,onClick:e[0]||(e[0]=e=>t.sendCtrl("resetStats",[])),title:"Reset stats"},Hs,8,qs),o("button",{class:"button is-small mr-1",disabled:!t.inited||null,onClick:e[1]||(e[1]=e=>t.sendCtrl("clear",[])),title:"Clear"},Gs,8,Ks),o("button",{class:"button is-small mr-1",disabled:!t.inited||null,onClick:e[2]||(e[2]=e=>t.sendCtrl("shuffle",[])),title:"Shuffle"},Xs,8,Ys),o("button",{class:"button is-small mr-1",disabled:!t.inited||null,onClick:e[3]||(e[3]=(...e)=>t.togglePlayer&&t.togglePlayer(...e)),title:t.togglePlayerButtonText},[Zs,o("span",tl,u(t.togglePlayerButtonText),1)],8,Qs),o("div",el,[o("div",sl,[m(o("input",{class:"input is-small",disabled:!t.inited||null,"onUpdate:modelValue":e[4]||(e[4]=e=>t.resrinput=e),onKeyup:e[5]||(e[5]=p(((...e)=>t.resr&&t.resr(...e)),["enter"]))},null,40,ll),[[h,t.resrinput]])]),o("div",al,[o("button",{class:"button is-small",disabled:!t.inited||null,onClick:e[6]||(e[6]=(...e)=>t.resr&&t.resr(...e))},il,8,nl)])]),o("div",ol,[o("div",dl,[m(o("input",{class:"input is-small",disabled:!t.inited||null,"onUpdate:modelValue":e[7]||(e[7]=e=>t.srinput=e),onKeyup:e[8]||(e[8]=p(((...e)=>t.sr&&t.sr(...e)),["enter"]))},null,40,rl),[[h,t.srinput]])]),o("div",ul,[o("button",{class:"button is-small",disabled:!t.inited||null,onClick:e[9]||(e[9]=(...e)=>t.sr&&t.sr(...e))},ml,8,cl)])]),o("a",{class:"button is-small mr-1",disabled:!t.inited||null,href:t.widgetUrl,target:"_blank"},"Open SR widget",8,hl)])],512),o("div",pl,[o("div",gl,[o("div",{id:"player",class:"video-16-9",style:f(t.playerstyle)},[i(V,{ref:"youtube",onEnded:t.ended,visible:t.playerVisible},null,8,["onEnded","visible"])],4)]),o("div",yl,[o("ul",null,[o("li",{class:v({"is-active":"playlist"===t.tab}),onClick:e[10]||(e[10]=e=>t.tab="playlist")},bl,2),o("li",{class:v({"is-active":"settings"===t.tab}),onClick:e[11]||(e[11]=e=>t.tab="settings")},fl,2),o("li",{class:v({"is-active":"help"===t.tab}),onClick:e[12]||(e[12]=e=>t.tab="help")},vl,2),o("li",{class:v({"is-active":"tags"===t.tab}),onClick:e[13]||(e[13]=e=>t.tab="tags")},kl,2),o("li",{class:v({"is-active":"import"===t.tab}),onClick:e[14]||(e[14]=e=>t.tab="import")},wl,2)])]),t.inited&&"import"===t.tab?(a(),n("div",Cl,[o("div",Vl,[o("a",{class:"button is-small mr-1",href:t.exportPlaylistUrl,target:"_blank"},Sl,8,xl),o("button",{class:"button is-small",onClick:e[15]||(e[15]=(...e)=>t.doImportPlaylist&&t.doImportPlaylist(...e))},Ul)]),m(o("textarea",{class:"textarea mb-1","onUpdate:modelValue":e[16]||(e[16]=e=>t.importPlaylist=e)},null,512),[[h,t.importPlaylist]])])):c("",!0),t.inited&&"help"===t.tab?(a(),n("div",_l,[i(x)])):c("",!0),t.inited&&"tags"===t.tab?(a(),n("div",Il,[i(S,{tags:t.tags,onUpdateTag:t.onTagUpdated},null,8,["tags","onUpdateTag"])])):c("",!0),t.inited&&"settings"===t.tab?(a(),n("div",Pl,[t.settings?(a(),n("table",Tl,[o("tbody",null,[o("tr",null,[Al,o("td",null,[i(U,{modelValue:t.settings.volume,"onUpdate:modelValue":[e[17]||(e[17]=e=>t.settings.volume=e),t.sendSettings]},null,8,["modelValue","onUpdate:modelValue"])]),$l]),o("tr",null,[Ml,o("td",null,[t.settings.hideVideoImage.file?(a(),n("div",Ll,[i(_,{src:t.settings.hideVideoImage.file,title:t.settings.hideVideoImage.filename,width:"100px",height:"50px",style:{display:"inline-block"}},null,8,["src","title"]),Dl,o("button",{class:"button is-small",onClick:e[18]||(e[18]=(...e)=>t.hideVideoImageRemoved&&t.hideVideoImageRemoved(...e))},El)])):c("",!0),i(I,{onUploaded:t.hideVideoImageUploaded,accept:"image/*",label:"Upload Image"},null,8,["onUploaded"])]),jl]),o("tr",null,[Rl,o("td",null,[m(o("input",{type:"checkbox","onUpdate:modelValue":[e[19]||(e[19]=e=>t.settings.showProgressBar=e),e[20]||(e[20]=(...e)=>t.sendSettings&&t.sendSettings(...e))]},null,512),[[b,t.settings.showProgressBar]])]),Ol]),o("tr",null,[Fl,o("td",null,[i(P,{modelValue:t.settings.customCss,"onUpdate:modelValue":[e[21]||(e[21]=e=>t.settings.customCss=e),t.sendSettings]},null,8,["modelValue","onUpdate:modelValue"])]),o("td",null,[Jl,(a(!0),n(d,null,r(t.codeExamples,((t,e)=>(a(),n("p",{key:e},[y(u(t.desc)+" ",1),o("pre",null,[o("code",null,u(t.code),1)])])))),128))])])])],512)):c("",!0)])):c("",!0),t.inited&&"playlist"===t.tab?(a(),n("div",Nl,[i(T,{playlist:t.playlist,filter:t.filter,onStopPlayer:e[22]||(e[22]=e=>t.player.stop()),onFilterChange:t.applyFilter,onCtrl:t.onPlaylistCtrl},null,8,["playlist","filter","onFilterChange","onCtrl"])])):c("",!0)],512)])}],["__scopeId","data-v-17e4d5b4"]]);const Bl=t=>({type:t,data:{command:"",minInterval:0,minLines:0}}),Wl=()=>"",ql=()=>({sound:{filename:"",file:"",volume:100},image:{filename:"",file:""},minDurationMs:"1s"});var Hl=Bl,Kl=Wl,Gl=ql,Yl=t=>{switch(t){case"text":return{triggers:[Bl("command")],action:"text",restrict_to:[],variables:[],variableChanges:[],data:{text:[""]}};case"media":return{triggers:[Bl("command")],action:"media",restrict_to:[],variables:[],variableChanges:[],data:{sound:{filename:"",file:"",volume:100},image:{filename:"",file:""},minDurationMs:"1s"}};case"countdown":return{triggers:[Bl("command")],action:"countdown",restrict_to:[],variables:[],variableChanges:[],data:{steps:3,interval:"1s",intro:"Starting countdown...",outro:"Done!"}};case"jisho_org_lookup":return{triggers:[Bl("command")],action:"jisho_org_lookup",restrict_to:[],variables:[],variableChanges:[],data:{}};case"madochan_createword":return{triggers:[Bl("command")],action:"madochan_createword",restrict_to:[],variables:[],variableChanges:[],data:{model:"100epochs800lenhashingbidirectional.h5",weirdness:1}};case"chatters":return{triggers:[Bl("command")],action:"chatters",restrict_to:[],variables:[],variableChanges:[],data:{}};default:return null}};const Xl=864e5,Ql=t=>{if(""===t)throw new Error("unable to parse duration");const e=`${t}`.trim();if(!e)throw new Error("unable to parse duration");if(e.match(/^\d+$/))return parseInt(e,10);const s=e.match(/^(?:(\d+)d)?\s?(?:(\d+)h)?\s?(?:(\d+)m)?\s?(?:(\d+)s)?\s?(?:(\d+)ms)?$/);if(!s)throw new Error("unable to parse duration");const l=s[1]?parseInt(s[1],10):0,a=s[2]?parseInt(s[2],10):0,n=s[3]?parseInt(s[3],10):0,i=s[4]?parseInt(s[4],10):0,o=s[5]?parseInt(s[5],10):0;return 1e3*i+6e4*n+36e5*a+l*Xl+o};var Zl={arrayMove:function(t,e,s){if(s>=t.length)for(var l=s-t.length+1;l--;)t.push(void 0);return t.splice(s,0,t.splice(e,1)[0]),t},humanDuration:t=>{let e=t;const s=Math.floor(e/Xl);e%=Xl;const l=Math.floor(e/36e5);e%=36e5;const a=Math.floor(e/6e4);e%=6e4;const n=Math.floor(e/1e3);e%=1e3;const i=["ms","s","m","h","d"],o=[e,n,a,l,s];let d=0;for(;d<o.length&&0===o[d];)d++;let r=o.length-1;for(;r>=0&&0===o[r];)r--;const u=[];for(let c=d;c<=r;c++)u.unshift(`${o[c]}${i[c]}`);return u.join(" ")},parseHumanDuration:t=>{try{return Ql(t)}catch(e){return 0}},mustParseHumanDuration:Ql,doDummyReplacements:(t,e)=>{const s=[{regex:/\$args\(\)/g,replacer:(t,s)=>e},{regex:/\$args\((\d+)\)/g,replacer:(t,s)=>e},{regex:/\$var\(([^)]+)\)/g,replacer:(t,s)=>e},{regex:/\$user\.name/g,replacer:()=>e},{regex:/\$([a-z][a-z0-9]*)(?!\()/g,replacer:(t,e)=>t},{regex:/\$customapi\(([^$\)]*)\)\[\'([A-Za-z0-9_ -]+)\'\]/g,replacer:(t,s,l)=>e},{regex:/\$customapi\(([^$\)]*)\)/g,replacer:(t,s)=>e},{regex:/\$urlencode\(([^$\)]*)\)/g,replacer:(t,s)=>e},{regex:/\$calc\((\d+)([*/+-])(\d+)\)/g,replacer:(t,s,l,a)=>e}];let l,a=t;do{l=a;for(let t of s)a=a.replace(t.regex,t.replacer)}while(l!==a);return a},split:(t,e=",",s=-1)=>{const l=t.split(e);return-1===s||l.length<=s?l:[...l.slice(0,s-1),l.slice(s-1).join(e)]},shuffle:t=>{let e=t.length;for(;e>0;){let s=Math.floor(Math.random()*e);e--;let l=t[e];t[e]=t[s],t[s]=l}return t}};const ta=s({data:()=>({commands:[],settings:{volume:100},globalVariables:[],ws:null,editIdx:null,editCommand:null,inited:!1,tab:"commands"}),computed:{baseVolume(){return this.settings.volume},widgetUrl(){return`${location.protocol}//${location.host}/widget/media/${this.$me.widgetToken}/`}},methods:{permissionsStr(t){if(!t.restrict_to||0===t.restrict_to.length)return"Everyone";const e=[];return t.restrict_to.includes("broadcaster")&&e.push("Broadcaster"),t.restrict_to.includes("mod")&&e.push("Moderators"),t.restrict_to.includes("sub")&&e.push("Subscribers"),e.join(", ")},add(t){const e=Yl(t);e&&(this.editIdx=this.commands.length,this.editCommand=e)},remove(t){this.commands=this.commands.filter(((e,s)=>s!==t)),this.sendSave()},edit(t){this.editIdx=t,this.editCommand=this.commands[t]},duplicate(t){this.editIdx=this.commands.length,this.editCommand=JSON.parse(JSON.stringify(this.commands[t]))},editedCommand(t){this.commands[this.editIdx]=t,this.sendSave(),this.editIdx=null,this.editCommand=null},onVolumeChange(){this.sendSave()},sendSave(){this.sendMsg({event:"save",commands:this.commands,settings:this.settings})},sendMsg(t){this.ws.send(JSON.stringify(t))},dragEnd(t){this.commands=Zl.arrayMove(this.commands,t.oldIndex,t.newIndex),this.sendSave()}},async mounted(){this.ws=new ot(this.$conf.wsBase+"/general",this.$me.token),this.ws.onMessage("init",(t=>{this.commands=t.commands,this.settings=t.settings,this.globalVariables=t.globalVariables,this.inited=!0})),this.ws.connect()},unmounted(){this.ws&&this.ws.disconnect()}}),ea=t=>(k("data-v-781bb45e"),t=t(),w(),t),sa={id:"app"},la={id:"top",ref:"top"},aa={id:"actionbar",class:"p-1"},na=["disabled"],ia=["disabled"],oa=["disabled"],da=["disabled"],ra=["disabled"],ua=["disabled"],ca=["href"],ma={id:"main",ref:"main"},ha={class:"tabs"},pa=[ea((()=>o("a",null,"Commands",-1)))],ga=[ea((()=>o("a",null,"Settings",-1)))],ya={key:1},ba={key:0,class:"table-container"},fa={class:"table is-striped",ref:"table"},va=ea((()=>o("thead",null,[o("tr",null,[o("th"),o("th"),o("th",null,"Trigger"),o("th",null,"Response"),o("th",null,"Type"),o("th",null,"Permissions"),o("th"),o("th")])],-1))),ka=ea((()=>o("td",{class:"pt-4 handle"},[o("i",{class:"fa fa-arrows"})],-1))),wa={class:"pl-0 pr-0"},Ca=["onClick"],Va=[ea((()=>o("i",{class:"fa fa-pencil"},null,-1)))],xa={class:"col-triggers"},Sa={key:0},Ua={key:0},_a=ea((()=>o("span",{class:"is-small"},"Timer: ",-1))),Ia={key:0},Pa={key:1},Ta={key:2},Aa={key:3},$a={key:0},Ma={key:0,class:"spacerow media-holder media-holder-inline"},La={key:1,class:"fa fa-plus is-justify-content-center mr-2 ml-2"},Da={key:2,class:"ml-2"},Ea=y("for at least "),ja={key:3,class:"ml-2"},Ra=y("for "),Oa={key:5},Fa={key:0},Ja=ea((()=>o("span",null,"→",-1))),Na=y(" ✕ "),za=ea((()=>o("span",null,"→",-1))),Ba={key:1},Wa={key:1},qa={key:2},Ha=y(" Media("),Ka={key:0},Ga={key:1},Ya={key:2},Xa=y(") "),Qa={key:3},Za={class:"pl-0 pr-0"},tn=ea((()=>o("i",{class:"fa fa-trash"},null,-1))),en=["onClick"],sn=[ea((()=>o("i",{class:"fa fa-clone"},null,-1)))],ln={key:1},an={key:2},nn={key:0,class:"table is-striped",ref:"table"},on=ea((()=>o("td",null,[o("code",null,"settings.volume")],-1))),dn=ea((()=>o("td",null,"Base volume for all media playing from commands",-1)));var rn=$(ta,[["render",function(t,e,s,m,h,p){const b=l("navbar"),f=l("command-edit"),k=l("duration"),w=l("responsive-image"),C=l("player"),x=l("doubleclick-button"),S=l("draggable"),U=l("volume-slider");return a(),n("div",sa,[o("div",la,[i(b),o("div",aa,[o("button",{class:"button is-small mr-1",disabled:!t.inited||null,onClick:e[0]||(e[0]=e=>t.add("text")),title:"Send a message to chat"}," Add text ",8,na),o("button",{class:"button is-small mr-1",onClick:e[1]||(e[1]=e=>t.add("media")),disabled:!t.inited||null,title:"Display an image and/or play a sound"}," Add media ",8,ia),o("button",{class:"button is-small mr-1",onClick:e[2]||(e[2]=e=>t.add("countdown")),disabled:!t.inited||null,title:"Add a countdown or messages spaced by time intervals"}," Add countdown ",8,oa),o("button",{class:"button is-small mr-1",onClick:e[3]||(e[3]=e=>t.add("jisho_org_lookup")),disabled:!t.inited||null,title:"Lookup a word via jisho.org"}," Add jisho_org_lookup ",8,da),o("button",{class:"button is-small mr-1",onClick:e[4]||(e[4]=e=>t.add("madochan_createword")),disabled:!t.inited||null,title:"Create a word with madochan"}," Add madochan ",8,ra),o("button",{class:"button is-small mr-1",onClick:e[5]||(e[5]=e=>t.add("chatters")),disabled:!t.inited||null,title:"Displays users who chatted during the stream"}," Add chatters ",8,ua),o("a",{class:"button is-small",href:t.widgetUrl,target:"_blank"},"Open Media widget",8,ca)])],512),o("div",ma,[t.editCommand?(a(),V(f,{key:0,globalVariables:t.globalVariables,modelValue:t.editCommand,mode:t.editIdx>=t.commands.length?"create":"edit",baseVolume:t.baseVolume,"onUpdate:modelValue":t.editedCommand,onCancel:e[6]||(e[6]=e=>t.editCommand=null)},null,8,["globalVariables","modelValue","mode","baseVolume","onUpdate:modelValue"])):c("",!0),o("div",ha,[o("ul",null,[o("li",{class:v({"is-active":"commands"===t.tab}),onClick:e[7]||(e[7]=e=>t.tab="commands")},pa,2),o("li",{class:v({"is-active":"settings"===t.tab}),onClick:e[8]||(e[8]=e=>t.tab="settings")},ga,2)])]),t.inited&&"commands"===t.tab?(a(),n("div",ya,[t.commands.length>0?(a(),n("div",ba,[o("table",fa,[va,i(S,{modelValue:t.commands,onEnd:t.dragEnd,tag:"tbody",handle:".handle","item-key":"id"},{item:g((({element:e,index:s})=>[o("tr",null,[ka,o("td",wa,[o("button",{class:"button is-small",onClick:e=>t.edit(s)},Va,8,Ca)]),o("td",xa,[(a(!0),n(d,null,r(e.triggers,((t,s)=>(a(),n("div",{key:s,class:"spacerow"},[o("div",null,["command"===e.triggers[s].type?(a(),n("code",Sa,u(e.triggers[s].data.command),1)):c("",!0)]),"timer"===e.triggers[s].type?(a(),n("div",Ua,[_a,o("code",null,[y(u(e.triggers[s].data.minLines)+" lines, ",1),i(k,{value:e.triggers[s].data.minInterval},null,8,["value"])])])):c("",!0)])))),128))]),o("td",null,["jisho_org_lookup"===e.action?(a(),n("div",Ia," Outputs the translation for the searched word. ")):c("",!0),"madochan_createword"===e.action?(a(),n("div",Pa," Creates a word for a definition. ")):c("",!0),"chatters"===e.action?(a(),n("div",Ta," Outputs the people who chatted during the stream. ")):c("",!0),"text"===e.action?(a(),n("div",Aa,[(a(!0),n(d,null,r(e.data.text,((t,s)=>(a(),n(d,{key:s},[o("code",null,u(e.data.text[s]),1),s<e.data.text.length-1?(a(),n("span",$a,"or")):c("",!0)],64)))),128))])):c("",!0),"media"===e.action?(a(),n("div",{key:4,class:v(e.action)},[e.data.image.file||e.data.sound.file?(a(),n("div",Ma,[e.data.image.file?(a(),V(w,{key:0,src:e.data.image.file,title:e.data.image.filename,width:"100px",height:"50px",style:{display:"inline-block"}},null,8,["src","title"])):c("",!0),e.data.image.file&&e.data.sound.file?(a(),n("i",La)):c("",!0),i(C,{src:e.data.sound.file,name:e.data.sound.filename,volume:e.data.sound.volume,baseVolume:t.baseVolume,class:"button is-small is-justify-content-center"},null,8,["src","name","volume","baseVolume"]),e.data.image.file&&e.data.sound.file?(a(),n("span",Da,[Ea,i(k,{value:e.data.minDurationMs},null,8,["value"])])):e.data.image.file?(a(),n("span",ja,[Ra,i(k,{value:e.data.minDurationMs},null,8,["value"])])):c("",!0)])):c("",!0)],2)):c("",!0),"countdown"===e.action?(a(),n("div",Oa,["auto"===(e.data.type||"auto")?(a(),n("div",Fa,[o("code",null,u(e.data.intro),1),Ja,o("code",null,u(e.data.steps),1),Na,i(k,{value:e.data.interval},null,8,["value"]),za,o("code",null,u(e.data.outro),1)])):(a(),n("div",Ba,[(a(!0),n(d,null,r(e.data.actions,((t,s)=>(a(),n(d,{key:s},["delay"===t.type?(a(),V(k,{key:0,value:t.value},null,8,["value"])):c("",!0),"text"===t.type?(a(),n("code",Wa,u(t.value),1)):c("",!0),"media"===t.type?(a(),n("code",qa,[Ha,t.value.image.file?(a(),n("span",Ka,u(t.value.image.filename),1)):c("",!0),t.value.image.file&&t.value.sound.file?(a(),n("span",Ga,"+")):c("",!0),t.value.sound.file?(a(),n("span",Ya,u(t.value.sound.filename),1)):c("",!0),Xa])):c("",!0),s<e.data.actions.length-1?(a(),n("span",Qa,"→")):c("",!0)],64)))),128))]))])):c("",!0)]),o("td",null,u(e.action),1),o("td",null,u(t.permissionsStr(e)),1),o("td",Za,[i(x,{class:"button is-small mr-1",message:"Are you sure?",timeout:1e3,onDoubleclick:e=>t.remove(s)},{default:g((()=>[tn])),_:2},1032,["onDoubleclick"]),o("button",{class:"button is-small",onClick:e=>t.duplicate(s)},sn,8,en)])])])),_:1},8,["modelValue","onEnd"])],512)])):(a(),n("div",ln,"No commands set up"))])):c("",!0),t.inited&&"settings"===t.tab?(a(),n("div",an,[t.settings?(a(),n("table",nn,[o("tbody",null,[o("tr",null,[on,o("td",null,[i(U,{modelValue:t.settings.volume,"onUpdate:modelValue":[e[9]||(e[9]=e=>t.settings.volume=e),t.onVolumeChange]},null,8,["modelValue","onUpdate:modelValue"])]),dn])])],512)):c("",!0)])):c("",!0)],512)])}],["__scopeId","data-v-781bb45e"]]);const un=s({data:()=>({unchangedJson:"{}",changedJson:"{}",settings:null,defaultSettings:null,ws:null}),watch:{settings:{deep:!0,handler(t){this.changedJson=JSON.stringify(t)}}},computed:{changed(){return this.unchangedJson!==this.changedJson},widgetUrl(){return`${location.protocol}//${location.host}/widget/speech-to-text/${this.$me.widgetToken}/`}},methods:{sendSave(){this.sendMsg({event:"save",settings:this.settings})},sendMsg(t){this.ws.send(JSON.stringify(t))}},async mounted(){this.ws=new ot(this.$conf.wsBase+"/speech-to-text",this.$me.token),this.ws.onMessage("init",(t=>{this.settings=t.settings,this.defaultSettings=t.defaultSettings,this.unchangedJson=JSON.stringify(t.settings)})),this.ws.connect()},unmounted(){this.ws&&this.ws.disconnect()}}),cn={id:"app"},mn={id:"top",ref:"top"},hn={id:"actionbar",class:"p-1"},pn=["disabled"],gn=["href"],yn={id:"main",ref:"main"},bn={key:0,class:"table is-striped",ref:"table"},fn=o("tr",null,[o("td",{colspan:"3"},"General")],-1),vn=o("td",null,[o("code",null,"settings.style.bgColor")],-1),kn=["disabled"],wn=[o("i",{class:"fa fa-remove"},null,-1)],Cn=o("td",null,[o("code",null,"settings.style.vAlign")],-1),Vn={class:"select is-small"},xn=[o("option",{value:"top"},"top",-1),o("option",{value:"bottom"},"bottom",-1)],Sn=["disabled"],Un=[o("i",{class:"fa fa-remove"},null,-1)],_n=o("tr",null,[o("td",{colspan:"3"},"Recognition")],-1),In=o("td",null,[o("code",null,"settings.recognition.lang")],-1),Pn=["disabled"],Tn=[o("i",{class:"fa fa-remove"},null,-1)],An=o("td",null,[o("code",null,"settings.recognition.synthesize")],-1),$n=["disabled"],Mn=[o("i",{class:"fa fa-remove"},null,-1)],Ln=o("td",null,[o("code",null,"settings.recognition.synthesizeLang")],-1),Dn=["disabled"],En=[o("i",{class:"fa fa-remove"},null,-1)],jn=o("td",null,[o("code",null,"settings.recognition.display")],-1),Rn=["disabled"],On=[o("i",{class:"fa fa-remove"},null,-1)],Fn=o("td",null,[o("code",null,"settings.styles.recognition.color")],-1),Jn=["disabled"],Nn=[o("i",{class:"fa fa-remove"},null,-1)],zn=o("td",null,[o("code",null,"settings.styles.recognition.strokeWidth")],-1),Bn=["disabled"],Wn=[o("i",{class:"fa fa-remove"},null,-1)],qn=o("td",null,[o("code",null,"settings.styles.recognition.strokeColor")],-1),Hn=["disabled"],Kn=[o("i",{class:"fa fa-remove"},null,-1)],Gn=o("td",null,[o("code",null,"settings.styles.recognition.fontFamily")],-1),Yn=["disabled"],Xn=[o("i",{class:"fa fa-remove"},null,-1)],Qn=o("td",null,[o("code",null,"settings.styles.recognition.fontSize")],-1),Zn=["disabled"],ti=[o("i",{class:"fa fa-remove"},null,-1)],ei=o("td",null,[o("code",null,"settings.styles.recognition.fontWeight")],-1),si=["disabled"],li=[o("i",{class:"fa fa-remove"},null,-1)],ai=o("tr",null,[o("td",{colspan:"3"},"Translation")],-1),ni=o("td",null,[o("code",null,"settings.translation.enabled")],-1),ii=["disabled"],oi=[o("i",{class:"fa fa-remove"},null,-1)],di=o("td",null,[o("code",null,"settings.translation.synthesize")],-1),ri=["disabled"],ui=[o("i",{class:"fa fa-remove"},null,-1)],ci=o("td",null,[o("code",null,"settings.translation.synthesizeLang")],-1),mi=["disabled"],hi=[o("i",{class:"fa fa-remove"},null,-1)],pi=o("td",null,[o("code",null,"settings.translation.langSrc")],-1),gi=["disabled"],yi=[o("i",{class:"fa fa-remove"},null,-1)],bi=o("td",null,[o("code",null,"settings.translation.langDst")],-1),fi=["disabled"],vi=[o("i",{class:"fa fa-remove"},null,-1)],ki=o("td",null,[o("code",null,"settings.styles.translation.color")],-1),wi=["disabled"],Ci=[o("i",{class:"fa fa-remove"},null,-1)],Vi=o("td",null,[o("code",null,"settings.styles.translation.strokeWidth")],-1),xi=["disabled"],Si=[o("i",{class:"fa fa-remove"},null,-1)],Ui=o("td",null,[o("code",null,"settings.styles.translation.strokeColor")],-1),_i=["disabled"],Ii=[o("i",{class:"fa fa-remove"},null,-1)],Pi=o("td",null,[o("code",null,"settings.styles.translation.fontFamily")],-1),Ti=["disabled"],Ai=[o("i",{class:"fa fa-remove"},null,-1)],$i=o("td",null,[o("code",null,"settings.styles.translation.fontSize")],-1),Mi=["disabled"],Li=[o("i",{class:"fa fa-remove"},null,-1)],Di=o("td",null,[o("code",null,"settings.styles.translation.fontWeight")],-1),Ei=["disabled"],ji=[o("i",{class:"fa fa-remove"},null,-1)],Ri=o("tr",null,[o("td",{colspan:"3"},"Debug")],-1),Oi=o("td",null,[o("code",null,"settings.status.enabled")],-1),Fi=["disabled"],Ji=[o("i",{class:"fa fa-remove"},null,-1)];var Ni=$(un,[["render",function(t,e,s,d,r,u){const p=l("navbar");return a(),n("div",cn,[o("div",mn,[i(p),o("div",hn,[o("button",{class:"button is-small is-primary mr-1",disabled:!t.changed,onClick:e[0]||(e[0]=(...e)=>t.sendSave&&t.sendSave(...e))}," Save ",8,pn),o("a",{class:"button is-small",href:t.widgetUrl,target:"_blank"},"Open widget",8,gn)])],512),o("div",yn,[t.settings?(a(),n("table",bn,[o("tbody",null,[fn,o("tr",null,[vn,o("td",null,[m(o("input",{class:"input is-small",type:"color","onUpdate:modelValue":e[1]||(e[1]=e=>t.settings.styles.bgColor=e)},null,512),[[h,t.settings.styles.bgColor]])]),o("td",null,[o("button",{class:"button is-small",disabled:t.settings.styles.bgColor===t.defaultSettings.styles.bgColor,onClick:e[2]||(e[2]=e=>t.settings.styles.bgColor=t.defaultSettings.styles.bgColor)},wn,8,kn)])]),o("tr",null,[Cn,o("td",null,[o("div",Vn,[m(o("select",{"onUpdate:modelValue":e[3]||(e[3]=e=>t.settings.styles.vAlign=e)},xn,512),[[x,t.settings.styles.vAlign]])])]),o("td",null,[o("button",{class:"button is-small",disabled:t.settings.styles.vAlign===t.defaultSettings.styles.vAlign,onClick:e[4]||(e[4]=e=>t.settings.styles.vAlign=t.defaultSettings.styles.vAlign)},Un,8,Sn)])]),_n,o("tr",null,[In,o("td",null,[m(o("input",{class:"input is-small",type:"text","onUpdate:modelValue":e[5]||(e[5]=e=>t.settings.recognition.lang=e)},null,512),[[h,t.settings.recognition.lang]])]),o("td",null,[o("button",{class:"button is-small",disabled:t.settings.recognition.lang===t.defaultSettings.recognition.lang,onClick:e[6]||(e[6]=e=>t.settings.recognition.lang=t.defaultSettings.recognition.lang)},Tn,8,Pn)])]),o("tr",null,[An,o("td",null,[m(o("input",{class:"is-small",type:"checkbox","onUpdate:modelValue":e[7]||(e[7]=e=>t.settings.recognition.synthesize=e)},null,512),[[b,t.settings.recognition.synthesize]])]),o("td",null,[o("button",{class:"button is-small",disabled:t.settings.recognition.synthesize===t.defaultSettings.recognition.synthesize,onClick:e[8]||(e[8]=e=>t.settings.translation.enabled=t.defaultSettings.translation.enabled)},Mn,8,$n)])]),o("tr",null,[Ln,o("td",null,[m(o("input",{class:"input is-small",type:"text","onUpdate:modelValue":e[9]||(e[9]=e=>t.settings.recognition.synthesizeLang=e)},null,512),[[h,t.settings.recognition.synthesizeLang]])]),o("td",null,[o("button",{class:"button is-small",disabled:t.settings.recognition.synthesizeLang===t.defaultSettings.recognition.synthesizeLang,onClick:e[10]||(e[10]=e=>t.settings.recognition.synthesizeLang=t.defaultSettings.recognition.synthesizeLang)},En,8,Dn)])]),o("tr",null,[jn,o("td",null,[m(o("input",{class:"is-small",type:"checkbox","onUpdate:modelValue":e[11]||(e[11]=e=>t.settings.recognition.display=e)},null,512),[[b,t.settings.recognition.display]])]),o("td",null,[o("button",{class:"button is-small",disabled:t.settings.recognition.display===t.defaultSettings.recognition.display,onClick:e[12]||(e[12]=e=>t.settings.recognition.display=t.defaultSettings.recognition.display)},On,8,Rn)])]),o("tr",null,[Fn,o("td",null,[m(o("input",{class:"input is-small",type:"color","onUpdate:modelValue":e[13]||(e[13]=e=>t.settings.styles.recognition.color=e)},null,512),[[h,t.settings.styles.recognition.color]])]),o("td",null,[o("button",{class:"button is-small",disabled:t.settings.styles.recognition.color===t.defaultSettings.styles.recognition.color,onClick:e[14]||(e[14]=e=>t.settings.styles.recognition.color=t.defaultSettings.styles.recognition.color)},Nn,8,Jn)])]),o("tr",null,[zn,o("td",null,[m(o("input",{class:"input is-small",type:"text","onUpdate:modelValue":e[15]||(e[15]=e=>t.settings.styles.recognition.strokeWidth=e)},null,512),[[h,t.settings.styles.recognition.strokeWidth]])]),o("td",null,[o("button",{class:"button is-small",disabled:t.settings.styles.recognition.strokeWidth===t.defaultSettings.styles.recognition.strokeWidth,onClick:e[16]||(e[16]=e=>t.settings.styles.recognition.strokeWidth=t.defaultSettings.styles.recognition.strokeWidth)},Wn,8,Bn)])]),o("tr",null,[qn,o("td",null,[m(o("input",{class:"input is-small",type:"color","onUpdate:modelValue":e[17]||(e[17]=e=>t.settings.styles.recognition.strokeColor=e)},null,512),[[h,t.settings.styles.recognition.strokeColor]])]),o("td",null,[o("button",{class:"button is-small",disabled:t.settings.styles.recognition.strokeColor===t.defaultSettings.styles.recognition.strokeColor,onClick:e[18]||(e[18]=e=>t.settings.styles.recognition.strokeColor=t.defaultSettings.styles.recognition.strokeColor)},Kn,8,Hn)])]),o("tr",null,[Gn,o("td",null,[m(o("input",{class:"input is-small",type:"text","onUpdate:modelValue":e[19]||(e[19]=e=>t.settings.styles.recognition.fontFamily=e)},null,512),[[h,t.settings.styles.recognition.fontFamily]])]),o("td",null,[o("button",{class:"button is-small",disabled:t.settings.styles.recognition.fontFamily===t.defaultSettings.styles.recognition.fontFamily,onClick:e[20]||(e[20]=e=>t.settings.styles.recognition.fontFamily=t.defaultSettings.styles.recognition.fontFamily)},Xn,8,Yn)])]),o("tr",null,[Qn,o("td",null,[m(o("input",{class:"input is-small",type:"text","onUpdate:modelValue":e[21]||(e[21]=e=>t.settings.styles.recognition.fontSize=e)},null,512),[[h,t.settings.styles.recognition.fontSize]])]),o("td",null,[o("button",{class:"button is-small",disabled:t.settings.styles.recognition.fontSize===t.defaultSettings.styles.recognition.fontSize,onClick:e[22]||(e[22]=e=>t.settings.styles.recognition.fontSize=t.defaultSettings.styles.recognition.fontSize)},ti,8,Zn)])]),o("tr",null,[ei,o("td",null,[m(o("input",{class:"input is-small",type:"text","onUpdate:modelValue":e[23]||(e[23]=e=>t.settings.styles.recognition.fontWeight=e)},null,512),[[h,t.settings.styles.recognition.fontWeight]])]),o("td",null,[o("button",{class:"button is-small",disabled:t.settings.styles.recognition.fontWeight===t.defaultSettings.styles.recognition.fontWeight,onClick:e[24]||(e[24]=e=>t.settings.styles.weight=t.defaultSettings.styles.weight)},li,8,si)])]),ai,o("tr",null,[ni,o("td",null,[m(o("input",{class:"is-small",type:"checkbox","onUpdate:modelValue":e[25]||(e[25]=e=>t.settings.translation.enabled=e)},null,512),[[b,t.settings.translation.enabled]])]),o("td",null,[o("button",{class:"button is-small",disabled:t.settings.translation.enabled===t.defaultSettings.translation.enabled,onClick:e[26]||(e[26]=e=>t.settings.translation.enabled=t.defaultSettings.translation.enabled)},oi,8,ii)])]),o("tr",null,[di,o("td",null,[m(o("input",{class:"is-small",type:"checkbox","onUpdate:modelValue":e[27]||(e[27]=e=>t.settings.translation.synthesize=e)},null,512),[[b,t.settings.translation.synthesize]])]),o("td",null,[o("button",{class:"button is-small",disabled:t.settings.translation.synthesize===t.defaultSettings.translation.synthesize,onClick:e[28]||(e[28]=e=>t.settings.translation.synthesize=t.defaultSettings.translation.synthesize)},ui,8,ri)])]),o("tr",null,[ci,o("td",null,[m(o("input",{class:"input is-small",type:"text","onUpdate:modelValue":e[29]||(e[29]=e=>t.settings.translation.synthesizeLang=e)},null,512),[[h,t.settings.translation.synthesizeLang]])]),o("td",null,[o("button",{class:"button is-small",disabled:t.settings.translation.synthesizeLang===t.defaultSettings.translation.synthesizeLang,onClick:e[30]||(e[30]=e=>t.settings.translation.synthesizeLang=t.defaultSettings.translation.synthesizeLang)},hi,8,mi)])]),o("tr",null,[pi,o("td",null,[m(o("input",{class:"input is-small",type:"text","onUpdate:modelValue":e[31]||(e[31]=e=>t.settings.translation.langSrc=e)},null,512),[[h,t.settings.translation.langSrc]])]),o("td",null,[o("button",{class:"button is-small",disabled:t.settings.translation.langSrc===t.defaultSettings.translation.langSrc,onClick:e[32]||(e[32]=e=>t.settings.translation.langSrc=t.defaultSettings.translation.langSrc)},yi,8,gi)])]),o("tr",null,[bi,o("td",null,[m(o("input",{class:"input is-small",type:"text","onUpdate:modelValue":e[33]||(e[33]=e=>t.settings.translation.langDst=e)},null,512),[[h,t.settings.translation.langDst]])]),o("td",null,[o("button",{class:"button is-small",disabled:t.settings.translation.langDst===t.defaultSettings.translation.langDst,onClick:e[34]||(e[34]=e=>t.settings.translation.langDst=t.defaultSettings.translation.langDst)},vi,8,fi)])]),o("tr",null,[ki,o("td",null,[m(o("input",{class:"input is-small",type:"color","onUpdate:modelValue":e[35]||(e[35]=e=>t.settings.styles.translation.color=e)},null,512),[[h,t.settings.styles.translation.color]])]),o("td",null,[o("button",{class:"button is-small",disabled:t.settings.styles.translation.color===t.defaultSettings.styles.translation.color,onClick:e[36]||(e[36]=e=>t.settings.styles.translation.color=t.defaultSettings.styles.translation.color)},Ci,8,wi)])]),o("tr",null,[Vi,o("td",null,[m(o("input",{class:"input is-small",type:"text","onUpdate:modelValue":e[37]||(e[37]=e=>t.settings.styles.translation.strokeWidth=e)},null,512),[[h,t.settings.styles.translation.strokeWidth]])]),o("td",null,[o("button",{class:"button is-small",disabled:t.settings.styles.translation.strokeWidth===t.defaultSettings.styles.translation.strokeWidth,onClick:e[38]||(e[38]=e=>t.settings.styles.translation.strokeWidth=t.defaultSettings.styles.translation.strokeWidth)},Si,8,xi)])]),o("tr",null,[Ui,o("td",null,[m(o("input",{class:"input is-small",type:"color","onUpdate:modelValue":e[39]||(e[39]=e=>t.settings.styles.translation.strokeColor=e)},null,512),[[h,t.settings.styles.translation.strokeColor]])]),o("td",null,[o("button",{class:"button is-small",disabled:t.settings.styles.translation.strokeColor===t.defaultSettings.styles.translation.strokeColor,onClick:e[40]||(e[40]=e=>t.settings.styles.translation.strokeColor=t.defaultSettings.styles.translation.strokeColor)},Ii,8,_i)])]),o("tr",null,[Pi,o("td",null,[m(o("input",{class:"input is-small",type:"text","onUpdate:modelValue":e[41]||(e[41]=e=>t.settings.styles.translation.fontFamily=e)},null,512),[[h,t.settings.styles.translation.fontFamily]])]),o("td",null,[o("button",{class:"button is-small",disabled:t.settings.styles.translation.fontFamily===t.defaultSettings.styles.translation.fontFamily,onClick:e[42]||(e[42]=e=>t.settings.styles.translation.fontFamily=t.defaultSettings.styles.translation.fontFamily)},Ai,8,Ti)])]),o("tr",null,[$i,o("td",null,[m(o("input",{class:"input is-small",type:"text","onUpdate:modelValue":e[43]||(e[43]=e=>t.settings.styles.translation.fontSize=e)},null,512),[[h,t.settings.styles.translation.fontSize]])]),o("td",null,[o("button",{class:"button is-small",disabled:t.settings.styles.translation.fontSize===t.defaultSettings.styles.translation.fontSize,onClick:e[44]||(e[44]=e=>t.settings.styles.translation.fontSize=t.defaultSettings.styles.translation.fontSize)},Li,8,Mi)])]),o("tr",null,[Di,o("td",null,[m(o("input",{class:"input is-small",type:"text","onUpdate:modelValue":e[45]||(e[45]=e=>t.settings.styles.translation.fontWeight=e)},null,512),[[h,t.settings.styles.translation.fontWeight]])]),o("td",null,[o("button",{class:"button is-small",disabled:t.settings.styles.translation.fontWeight===t.defaultSettings.styles.translation.fontWeight,onClick:e[46]||(e[46]=e=>t.settings.styles.weight=t.defaultSettings.styles.weight)},ji,8,Ei)])]),Ri,o("tr",null,[Oi,o("td",null,[m(o("input",{class:"is-small",type:"checkbox","onUpdate:modelValue":e[47]||(e[47]=e=>t.settings.status.enabled=e)},null,512),[[b,t.settings.status.enabled]])]),o("td",null,[o("button",{class:"button is-small",disabled:t.settings.status.enabled===t.defaultSettings.status.enabled,onClick:e[48]||(e[48]=e=>t.settings.status.enabled=t.defaultSettings.status.enabled)},Ji,8,Fi)])])])],512)):c("",!0)],512)])}]]);const zi=s({data:()=>({pass:"",error:"",success:!1}),computed:{canSubmit(){return this.pass&&!this.error}},methods:{async submit(){const t=new URLSearchParams(window.location.search).get("t");this.success=!1,this.error="";const e=await fetch("/api/user/_reset_password",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({pass:this.pass,token:t})});if(200===e.status)this.success=!0;else try{this.error=(await e.json()).reason}catch(s){this.error="Unknown error"}}}}),Bi={class:"center-screen"},Wi=o("h1",{class:"title is-6"},"Hyottoko.club",-1),qi={key:0,class:"field has-background-success-light has-text-success-dark"},Hi=y(" Password successfully set. Click "),Ki=y("here"),Gi=y(" to login. "),Yi={key:1},Xi={key:0,class:"field has-background-danger-light has-text-danger-dark"},Qi={class:"field"},Zi={class:"control has-icons-left"},to=o("span",{class:"icon is-small is-left"},[o("i",{class:"fa fa-lock"})],-1),eo={class:"field"},so=["disabled"];var lo=$(zi,[["render",function(t,e,s,d,r,y){const b=l("router-link");return a(),n("div",Bi,[Wi,t.success?(a(),n("div",qi,[Hi,i(b,{to:{name:"login"}},{default:g((()=>[Ki])),_:1}),Gi])):(a(),n("div",Yi,[t.error?(a(),n("div",Xi,u(t.error),1)):c("",!0),o("div",Qi,[o("div",Zi,[m(o("input",{class:"input is-small",type:"password",placeholder:"New Password","onUpdate:modelValue":e[0]||(e[0]=e=>t.pass=e),onKeyup:[e[1]||(e[1]=e=>t.error=""),e[2]||(e[2]=p(((...e)=>t.submit&&t.submit(...e)),["enter"]))]},null,544),[[h,t.pass]]),to])]),o("div",eo,[o("button",{class:"button is-small is-primary",disabled:!t.canSubmit||null,onClick:e[3]||(e[3]=(...e)=>t.submit&&t.submit(...e))}," Save Password ",8,so)])]))])}]]);const ao=s({data:()=>({email:"",error:"",success:!1}),methods:{async submit(){this.success=!1,this.error="";const t=await fetch("/api/user/_request_password_reset",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:this.email})});if(200===t.status)this.success=!0;else try{this.error=(await t.json()).reason}catch(e){this.error="Unknown error"}}}}),no={class:"center-screen"},io=o("h1",{class:"title is-6"},"Hyottoko.club",-1),oo={key:0,class:"field has-background-success-light has-text-success-dark"},ro=y(" Password-reset mail sent. Click "),uo=y("here"),co=y(" to login. "),mo={key:1},ho={key:0,class:"field has-background-danger-light has-text-danger-dark"},po={class:"field"},go={class:"control has-icons-left"},yo=o("span",{class:"icon is-small is-left"},[o("i",{class:"fa fa-envelope"})],-1),bo={class:"field"};var fo=$(ao,[["render",function(t,e,s,d,r,p){const y=l("router-link");return a(),n("div",no,[io,t.success?(a(),n("div",oo,[ro,i(y,{to:{name:"login"}},{default:g((()=>[uo])),_:1}),co])):(a(),n("form",mo,[t.error?(a(),n("div",ho,u(t.error),1)):c("",!0),o("div",po,[o("div",go,[m(o("input",{class:"input is-small",type:"email",placeholder:"Email","onUpdate:modelValue":e[0]||(e[0]=e=>t.email=e),onKeyup:e[1]||(e[1]=e=>t.error="")},null,544),[[h,t.email]]),yo])]),o("div",bo,[o("span",{class:"button is-small is-primary",onClick:e[2]||(e[2]=(...e)=>t.submit&&t.submit(...e))},"Request Password Reset")])]))])}]]);const vo=s({name:"upload",props:{accept:String,label:String},data:()=>({uploading:!1,progress:0}),computed:{uploadPercent(){return Math.round(100*this.progress)},buttonText(){return this.uploading?`Uploading (${this.uploadPercent}%)`:this.label||"Upload File"},progressStyle(){if(!this.uploading)return{};const t=this.uploadPercent,e="rgba(0,255,0, .5)";return{background:`linear-gradient(90deg, ${e} 0%, ${e} ${t}%, transparent ${t}%)`}}},methods:{async upload(t){const e=t.target.files[0];if(!e)return;this.uploading=!0;const s=new FormData;s.append("file",e,e.name);const l=await ut("/api/upload",{body:s,onUploadProgress:t=>{this.progress=t.loaded/t.total}});this.uploading=!1;const a=await l.json();this.$emit("uploaded",a)}}}),ko={class:"upload"},wo=["disabled","accept"],Co={class:"button is-small"},Vo=(t=>(k("data-v-951232f6"),t=t(),w(),t))((()=>o("i",{class:"fa fa-upload mr-1"},null,-1)));var xo=$(vo,[["render",function(t,e,s,l,i,d){return a(),n("label",ko,[o("input",{type:"file",disabled:t.uploading,style:{display:"none"},onChange:e[0]||(e[0]=(...e)=>t.upload&&t.upload(...e)),accept:t.accept},null,40,wo),o("span",Co,[Vo,y(" "+u(t.buttonText),1)]),o("span",{class:"progress",style:f(t.progressStyle)},null,4)])}],["__scopeId","data-v-951232f6"]]);var So=$(s({props:{modelValue:{type:String,required:!0}},data:()=>({value:""}),methods:{valChange(){this.$emit("update:modelValue",this.value)}},created(){this.value=this.modelValue}}),[["render",function(t,e,s,l,i,o){return m((a(),n("textarea",{class:"textarea","onUpdate:modelValue":[e[0]||(e[0]=e=>t.value=e),e[1]||(e[1]=(...e)=>t.valChange&&t.valChange(...e))]},null,512)),[[h,t.value]])}]]);var Uo=$(s({props:{modelValue:{required:!0}},emits:["update:modelValue"],data:()=>({v:"",valid:!0}),computed:{classes(){return this.valid?[]:["has-background-danger-light","has-text-danger-dark"]}},mounted(){this.v=`${this.modelValue}`},watch:{v:{handler(t){try{const e=Zl.doDummyReplacements(t,"0");Zl.mustParseHumanDuration(e),this.valid=!0}catch(e){this.valid=!1}this.$emit("update:modelValue",t)}},modelValue:{handler(t){this.v=`${t}`}}}}),[["render",function(t,e,s,l,i,o){return m((a(),n("input",{class:v(["input is-small spaceinput",t.classes]),"onUpdate:modelValue":e[0]||(e[0]=e=>t.v=e)},null,2)),[[h,t.v]])}]]);var _o=$(s({name:"player",props:{src:String,name:String,volume:{required:!0},baseVolume:{default:100}},data:()=>({audio:null,playing:!1}),created:function(){this.load(),this.$watch("src",(()=>{this.load()}))},computed:{cls(){return this.playing?"fa-stop":"fa-play"}},methods:{toggle(){if(this.playing)this.audio.pause(),this.audio.currentTime=0;else{const t=parseInt(`${this.baseVolume}`,10)/100,e=parseInt(`${this.volume}`,10)/100;this.audio.volume=t*e,this.audio.play()}this.playing=!this.playing},load(){this.audio&&(this.audio.pause(),this.audio=null),this.audio=new Audio("/uploads/"+this.src),this.audio.addEventListener("ended",(()=>{this.playing=!1})),this.playing=!1}}}),[["render",function(t,e,s,l,i,d){return t.src?(a(),n("span",{key:0,class:"player",onClick:e[0]||(e[0]=(...e)=>t.toggle&&t.toggle(...e))},[y(u(t.name)+" ",1),o("i",{class:v(["fa ml-1",t.cls])},null,2)])):c("",!0)}]]);const Io=s({name:"slider",props:{modelValue:{type:Number,required:!0},iconLeft:String,iconRight:String,min:{type:Number,default:0},max:{type:Number,default:100}},data:()=>({curVal:100}),methods:{valChange(){this.$emit("update:modelValue",parseInt(`${this.curVal}`,10))}},created(){this.curVal=this.modelValue}}),Po={class:"columns"},To={class:"column is-four-fifth"},Ao={class:"control has-icons-left has-icons-right range slider"},$o=["min","max"],Mo={class:"icon is-small is-left"},Lo={class:"icon is-small is-right"},Do={class:"column is-one-fifth"};var Eo=$(Io,[["render",function(t,e,s,l,i,d){return a(),n("div",Po,[o("div",To,[o("div",Ao,[m(o("input",{type:"range",class:"input is-small",min:t.min,max:t.max,"onUpdate:modelValue":[e[0]||(e[0]=e=>t.curVal=e),e[1]||(e[1]=(...e)=>t.valChange&&t.valChange(...e))]},null,8,$o),[[h,t.curVal]]),o("span",Mo,[o("i",{class:v(["fa",t.iconLeft])},null,2)]),o("span",Lo,[o("i",{class:v(["fa",t.iconRight])},null,2)])])]),o("div",Do,[m(o("input",{type:"number",class:"input is-small","onUpdate:modelValue":[e[2]||(e[2]=e=>t.curVal=e),e[3]||(e[3]=(...e)=>t.valChange&&t.valChange(...e))]},null,512),[[h,t.curVal]])])])}],["__scopeId","data-v-0799d56c"]]);var jo=$(s({name:"volume-slider",props:{modelValue:{required:!0}},data:()=>({volume:100}),methods:{valChange(){this.$emit("update:modelValue",this.volume)}},created(){this.volume=parseInt(this.modelValue,10)}}),[["render",function(t,e,s,n,i,o){const d=l("slider");return a(),V(d,{class:"volume-slider",iconLeft:"fa-volume-down",iconRight:"fa-volume-up",min:0,max:100,modelValue:t.volume,"onUpdate:modelValue":[e[0]||(e[0]=e=>t.volume=e),t.valChange]},null,8,["modelValue","onUpdate:modelValue"])}]]);const Ro=s({name:"responsive-image",props:{src:String,title:String,height:{type:String,default:"100%"},width:{type:String,default:"100%"}},computed:{style(){return{display:"inline-block",verticalAlign:"text-bottom",backgroundImage:`url(/uploads/${encodeURIComponent(this.src)})`,backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"center",width:this.width,height:this.height}}}}),Oo=["title"];var Fo=$(Ro,[["render",function(t,e,s,l,i,o){return a(),n("div",{class:"responsive-image",style:f(t.style),title:t.title},null,12,Oo)}]]);const Jo=s({name:"navbar",computed:{user(){var t,e;return(null==(e=null==(t=this.$me)?void 0:t.user)?void 0:e.name)||""}},data:()=>({linksStart:[{to:{name:"index"},text:"Widgets"},{to:{name:"commands"},text:"Commands"},{to:{name:"variables"},text:"Variables"},{to:{name:"sr"},text:"Song Request"},{to:{name:"speech-to-text"},text:"Speech-To-Text"},{to:{name:"drawcast"},text:"Drawcast"},{to:{name:"settings"},text:"Settings"}],burgerActive:!1}),methods:{toggleBurgerMenu(){this.burgerActive=!this.burgerActive},async onLogoutClick(){const t=await fetch("/api/logout",{method:"POST"});if(!(await t.json()).success)throw new Error("[2021-09-25 18:36]");this.$router.push({name:"login"})}}}),No={class:"navbar",role:"navigation","aria-label":"main navigation"},zo={class:"navbar-brand"},Bo=o("img",{src:"/assets/hyottoko.30d2bcb9.png",width:"32",height:"32",alt:"hyottoko.club",class:"flip-horizontal mr-1"},null,-1),Wo={class:"greeting"},qo=[o("span",{"aria-hidden":"true"},null,-1),o("span",{"aria-hidden":"true"},null,-1),o("span",{"aria-hidden":"true"},null,-1)],Ho={class:"navbar-start"},Ko={class:"navbar-end"};var Go=$(Jo,[["render",function(t,e,s,c,m,h){const p=l("router-link");return a(),n("nav",No,[o("div",zo,[i(p,{class:"navbar-item",to:{name:"index"}},{default:g((()=>[Bo,o("span",Wo,"Welcome back, "+u(t.user),1)])),_:1}),o("a",{role:"button",class:v(["navbar-burger",{"is-active":t.burgerActive}]),"aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample",onClick:e[0]||(e[0]=(...e)=>t.toggleBurgerMenu&&t.toggleBurgerMenu(...e))},qo,2)]),o("div",{id:"navbarBasicExample",class:v(["navbar-menu",{"is-active":t.burgerActive}])},[o("div",Ho,[(a(!0),n(d,null,r(t.linksStart,((t,e)=>(a(),V(p,{class:"navbar-item",key:e,to:t.to},{default:g((()=>[y(u(t.text),1)])),_:2},1032,["to"])))),128))]),o("div",Ko,[o("a",{class:"navbar-item",onClick:e[1]||(e[1]=(...e)=>t.onLogoutClick&&t.onLogoutClick(...e))},"Logout")])],2)])}]]);const Yo=s({props:{value:{required:!0}},computed:{tag(){try{return Zl.mustParseHumanDuration(this.value),"span"}catch(t){return"code"}},humanReadable(){try{return Zl.humanDuration(Zl.mustParseHumanDuration(this.value))}catch(t){return this.value}}}}),Xo={key:0},Qo={key:1};var Zo=$(Yo,[["render",function(t,e,s,l,i,o){return"span"===t.tag?(a(),n("span",Xo,u(t.humanReadable),1)):(a(),n("code",Qo,u(t.humanReadable),1))}]]);const td=s({emits:["click","doubleclick"],props:{message:{type:String,required:!0},timeout:{type:Number,required:!0}},data:()=>({time:null,timer:null}),computed:{indicatorStyle(){return null===this.timer?{}:{width:this.time/this.timeout*100+"%"}}},methods:{onClick(t){null===this.timer?(this.$emit("click"),this.time=this.timeout,this.timer=setInterval((()=>{this.time-=10,this.time<=0&&(clearInterval(this.timer),this.timer=null,this.time=null)}),10)):(this.$emit("doubleclick"),this.timer&&(clearInterval(this.timer),this.timer=null,this.time=null))}}}),ed={key:0,class:"doubleclick-button-message mr-2 p-1 has-text-danger"};var sd=$(td,[["render",function(t,e,s,l,i,d){return a(),n("button",{class:"doubleclick-button",onClick:e[0]||(e[0]=(...e)=>t.onClick&&t.onClick(...e))},[S(t.$slots,"default",{},void 0,!0),t.timer?(a(),n("span",ed,[y(u(t.message)+" ",1),o("span",{class:"doubleclick-button-timout-indicator",style:f(t.indicatorStyle)},null,4)])):c("",!0)])}],["__scopeId","data-v-72e9e0bd"]]);const ld=(...t)=>console.log("[youtube.js]",...t);let ad=!1;async function nd(t){return await(ad?(ld("ytapi ALREADY ready"),Promise.resolve()):new Promise((t=>{const e=document.createElement("script");e.src="https://www.youtube.com/iframe_api",document.head.append(e),window.onYouTubeIframeAPIReady=()=>{ad=!0,ld("ytapi ready"),t()}}))),await function(t){return new Promise((e=>{ld("create player on "+t);const s=new YT.Player(t,{playerVars:{iv_load_policy:3,modestbranding:1},events:{onReady:()=>{ld("player ready"),e(s)}}})}))}(t)}const id=s({name:"youtube",props:{visible:{type:Boolean,default:!0}},data:()=>({id:"",yt:null,toplay:null,tovolume:null,tryPlayInterval:null}),created(){this.id=`yt-${Math.floor(99*Math.random()+1)}-${(new Date).getTime()}`},methods:{getDuration(){return this.yt?this.yt.getDuration():0},getCurrentTime(){return this.yt?this.yt.getCurrentTime():0},getProgress(){const t=this.getDuration(),e=this.getCurrentTime();return t?e/t:0},stop(){this.yt&&this.yt.stopVideo()},stopTryPlayInterval(){this.tryPlayInterval&&(clearInterval(this.tryPlayInterval),this.tryPlayInterval=null)},tryPlay(){if(this.stopTryPlayInterval(),!this.visible)return;this.yt.playVideo();let t=20;this.tryPlayInterval=setInterval((()=>{if(ld("playing",this.playing(),"triesRemaining",t),--t,this.playing()||t<0)return ld("stopping interval"),void this.stopTryPlayInterval();this.yt.playVideo()}),250)},play(t){this.yt?(this.yt.cueVideoById(t),this.tryPlay()):this.toplay=t},pause(){this.yt&&this.yt.pauseVideo()},unpause(){this.yt&&this.tryPlay()},setVolume(t){this.yt?this.yt.setVolume(t):this.tovolume=t},setLoop(t){this.loop=t},playing(){return this.yt&&1===this.yt.getPlayerState()}},async mounted(){this.yt=await nd(this.id),null!==this.tovolume&&this.yt.setVolume(this.tovolume),null!==this.toplay&&(ld("trying to play.."),this.play(this.toplay)),this.yt.addEventListener("onStateChange",(t=>{t.data===YT.PlayerState.CUED?this.tryPlay():t.data===YT.PlayerState.ENDED&&(this.loop?this.tryPlay():this.$emit("ended"))}))}}),od=["id"];var dd=$(id,[["render",function(t,e,s,l,i,o){return a(),n("div",{id:t.id},null,8,od)}]]);const rd=s({props:{modelValue:{type:Object,required:!0},mode:{type:String,required:!0},globalVariables:{type:Array,required:!0},baseVolume:{default:100}},emits:["update:modelValue","cancel"],data:()=>({item:null,newtrigger:"command",variableChangeFocusIdx:-1}),mounted(){this.item=JSON.parse(JSON.stringify(this.modelValue)),this.$nextTick((()=>{this.$el.querySelector('input[type="text"]').focus()}))},watch:{modelValue:{handler(t){this.item=JSON.parse(JSON.stringify(t))}}},methods:{addtxt(){this.item.data.text.push(Kl())},addtrigger(){this.item.triggers.push(Hl(this.newtrigger))},onAddVariableChange(){this.item.variableChanges.push({name:"",change:"set",value:""})},rmVariableChange(t){this.item.variableChanges=this.item.variableChanges.filter(((e,s)=>s!==t))},onAddVariable(){this.item.variables.push({name:"",value:""})},rmVariable(t){this.item.variables=this.item.variables.filter(((e,s)=>s!==t))},onSaveClick(){this.$emit("update:modelValue",this.item)},onCancelClick(){this.$emit("cancel")},onCloseClick(){this.$emit("cancel")},onOverlayClick(){this.$emit("cancel")},mediaSndUploaded(t){this.item.data.sound.filename=t.originalname,this.item.data.sound.file=t.filename},mediaImgUploaded(t){this.item.data.image.filename=t.originalname,this.item.data.image.file=t.filename},rmtxt(t){this.item.data.text=this.item.data.text.filter(((e,s)=>s!==t))},rmtrigger(t){this.item.triggers=this.item.triggers.filter(((e,s)=>s!==t))},autocompletableVariables(t){const e=this.item.variables.slice().map((t=>({var:t,type:"local"})));return this.globalVariables.forEach((t=>{e.find((e=>e.var.name===t.name))||e.push({var:t,type:"global"})})),e.filter((e=>e.var.name.startsWith(t))).slice(0,10)},onVarChangeInputBlur(){setTimeout((()=>{this.variableChangeFocusIdx=-1}),50)}},computed:{valid(){for(const e of this.item.triggers)if("command"===e.type){if(!e.data.command)return!1}else if("timer"===e.type){try{Zl.mustParseHumanDuration(e.data.minInterval)}catch(t){return!1}const s=parseInt(e.data.minLines,10);if(isNaN(s))return!1}if("text"===this.item.action)for(const e of this.item.data.text)if(""===e)return!1;return!0},title(){return`${{create:"Create new ",edit:"Edit "}[this.mode]}${{jisho_org_lookup:"jisho.org lookup",madochan_createword:"madochan",chatters:"chatters command",media:"media command",countdown:"countdown",text:"command"}[this.item.action]}`}}}),ud=t=>(k("data-v-1bf0a91c"),t=t(),w(),t),cd={key:0,class:"modal is-active"},md={class:"modal-card"},hd={class:"modal-card-head"},pd={class:"modal-card-title"},gd={class:"modal-card-body"},yd={class:"table is-striped"},bd=ud((()=>o("td",null,"Triggers:",-1))),fd={key:0,class:"field has-addons"},vd={class:"control has-icons-left"},kd=["onUpdate:modelValue"],wd=ud((()=>o("span",{class:"icon is-small is-left"},[o("i",{class:"fa fa-comments-o"})],-1))),Cd={class:"control"},Vd=["disabled","onClick"],xd=[ud((()=>o("i",{class:"fa fa-remove"},null,-1)))],Sd={key:1,class:"timer-trigger"},Ud={class:"control"},_d=["disabled","onClick"],Id=[ud((()=>o("i",{class:"fa fa-remove"},null,-1)))],Pd={class:"columns"},Td=ud((()=>o("div",{class:"column is-one-third"},[o("label",null,"Min. Lines")],-1))),Ad={class:"column is-two-third"},$d={class:"control has-icons-left"},Md=["onUpdate:modelValue"],Ld=ud((()=>o("span",{class:"icon is-small is-left"},[o("i",{class:"fa fa-comments-o"})],-1))),Dd={class:"columns"},Ed=ud((()=>o("div",{class:"column is-one-third"},[o("label",null,"Min. Interval")],-1))),jd={class:"column is-two-third"},Rd={class:"control has-icons-left has-icons-right"},Od=ud((()=>o("span",{class:"icon is-small is-left"},[o("i",{class:"fa fa-hourglass"})],-1))),Fd=ud((()=>o("p",{class:"help"}," Command will be triggered when at least min. lines chat messages arrived AND time interval have passed. ",-1))),Jd={class:"field has-addons mr-1"},Nd={class:"control has-icons-left"},zd={key:0,class:"select is-small"},Bd=[ud((()=>o("option",{value:"command"},"Command",-1))),ud((()=>o("option",{value:"timer"},"Timer",-1)))],Wd=[ud((()=>o("i",{class:"fa fa-plus mr-1"},null,-1))),y(" Add ")],qd={key:0},Hd=[ud((()=>o("td",null,"Response:",-1))),ud((()=>o("td",null,"Outputs the translation for the searched word.",-1)))],Kd={key:1},Gd=[ud((()=>o("td",null,"Response:",-1))),ud((()=>o("td",null,"Creates a word for a definition.",-1)))],Yd={key:2},Xd=ud((()=>o("td",null,"Model:",-1))),Qd={class:"control"},Zd=ud((()=>o("div",{class:"help"},[y(" For possible values refer to "),o("a",{href:"https://madochan.hyottoko.club/",target:"_blank"},"madochan")],-1))),tr={key:3},er=ud((()=>o("td",null,"Weirdness:",-1))),sr={class:"control"},lr=ud((()=>o("div",{class:"help"},[y(" For possible values refer to "),o("a",{href:"https://madochan.hyottoko.club/",target:"_blank"},"madochan")],-1))),ar={key:4},nr=[ud((()=>o("td",null,"Response:",-1))),ud((()=>o("td",null,"Outputs the people who chatted during the stream.",-1)))],ir={key:5},or=ud((()=>o("td",null,"Response:",-1))),dr=["onUpdate:modelValue"],rr=["disabled","onClick"],ur=[ud((()=>o("i",{class:"fa fa-remove"},null,-1)))],cr={class:"field"},mr=[ud((()=>o("i",{class:"fa fa-plus mr-1"},null,-1))),y(" Add response ")],hr=ud((()=>o("div",null,[o("p",{class:"help"}," If multiple responses exist, a random one will be used when the command is triggered. ")],-1))),pr={key:6},gr=ud((()=>o("td",null,"Image:",-1))),yr=[ud((()=>o("i",{class:"fa fa-remove mr-1"},null,-1))),y(" Remove ")],br={key:2},fr={key:7},vr=ud((()=>o("td",null,"Sound:",-1))),kr=[ud((()=>o("i",{class:"fa fa-remove mr-1"},null,-1))),y(" Remove ")],wr={key:3},Cr={key:8},Vr=ud((()=>o("td",null,"Duration:",-1))),xr={class:"control has-icons-left"},Sr=ud((()=>o("span",{class:"icon is-small is-left"},[o("i",{class:"fa fa-hourglass"})],-1))),Ur={key:9},_r=ud((()=>o("td",null,"Settings",-1))),Ir=ud((()=>o("td",null,"Variables:",-1))),Pr={key:0},Tr=ud((()=>o("thead",null,[o("tr",null,[o("td",null,"Name"),o("td",null,"Value")])],-1))),Ar=["onUpdate:modelValue"],$r=["onUpdate:modelValue"],Mr=["onClick"],Lr=[ud((()=>o("i",{class:"fa fa-remove"},null,-1)))],Dr=ud((()=>o("div",{class:"help"},[y(" Variables can be used from the command with "),o("code",null,"$var(variable_name)"),y(". If the referenced variable is not defined here, "),o("a",{href:"/variables/",target:"_blank"},"global variables"),y(" are used. ")],-1))),Er=ud((()=>o("td",null,"Variable changes:",-1))),jr={key:0},Rr=ud((()=>o("thead",null,[o("tr",null,[o("td",null,"Name"),o("td",null,"Change"),o("td",null,"Value"),o("td")])],-1))),Or={class:"dropdown is-active is-up"},Fr={class:"dropdown-trigger"},Jr=["onUpdate:modelValue","onFocus"],Nr={key:0,class:"dropdown-menu",id:"dropdown-menu",role:"menu"},zr={class:"dropdown-content"},Br=["onClick"],Wr=y(") "),qr={class:"select is-small"},Hr=["onUpdate:modelValue"],Kr=[ud((()=>o("option",{value:"set"},"set",-1))),ud((()=>o("option",{value:"increase_by"},"increase by",-1))),ud((()=>o("option",{value:"decrease_by"},"decrease by",-1)))],Gr=["onUpdate:modelValue"],Yr=["onClick"],Xr=[ud((()=>o("i",{class:"fa fa-remove"},null,-1)))],Qr=ud((()=>o("div",{class:"help"}," Variable changes are performed when the command is executed, before anything else. ",-1))),Zr=ud((()=>o("td",null,"Permissions:",-1))),tu=y(" Broadcaster "),eu=y(" Moderators "),su=y(" Subscribers "),lu={class:"modal-card-foot"},au=["disabled"];var nu=$(rd,[["render",function(t,e,s,p,g,f){const k=l("duration-input"),w=l("responsive-image"),C=l("upload"),S=l("player"),U=l("volume-slider"),_=l("countdown-edit");return t.item?(a(),n("div",cd,[o("div",{class:"modal-background",onClick:e[0]||(e[0]=(...e)=>t.onOverlayClick&&t.onOverlayClick(...e))}),o("div",md,[o("header",hd,[o("p",pd,u(t.title),1),o("button",{class:"delete","aria-label":"close",onClick:e[1]||(e[1]=(...e)=>t.onCloseClick&&t.onCloseClick(...e))})]),o("section",gd,[o("table",yd,[o("tbody",null,[o("tr",null,[bd,o("td",null,[(a(!0),n(d,null,r(t.item.triggers,((e,s)=>(a(),n("div",{key:s,class:"spacerow"},["command"===t.item.triggers[s].type?(a(),n("div",fd,[o("div",vd,[m(o("input",{class:v(["input is-small",{"has-background-danger-light":!t.item.triggers[s].data.command,"has-text-danger-dark":!t.item.triggers[s].data.command}]),type:"text","onUpdate:modelValue":e=>t.item.triggers[s].data.command=e},null,10,kd),[[h,t.item.triggers[s].data.command]]),wd]),o("div",Cd,[o("button",{class:"button is-small",disabled:t.item.triggers.length<=1,onClick:e=>t.rmtrigger(s)},xd,8,Vd)])])):c("",!0),"timer"===t.item.triggers[s].type?(a(),n("div",Sd,[o("div",Ud,[o("button",{class:"button is-small",disabled:t.item.triggers.length<=1,onClick:e=>t.rmtrigger(s)},Id,8,_d)]),o("div",Pd,[Td,o("div",Ad,[o("div",$d,[m(o("input",{class:"input is-small spaceinput","onUpdate:modelValue":e=>t.item.triggers[s].data.minLines=e},null,8,Md),[[h,t.item.triggers[s].data.minLines]]),Ld])])]),o("div",Dd,[Ed,o("div",jd,[o("div",Rd,[i(k,{modelValue:t.item.triggers[s].data.minInterval,"onUpdate:modelValue":e=>t.item.triggers[s].data.minInterval=e},null,8,["modelValue","onUpdate:modelValue"]),Od])])]),Fd])):c("",!0)])))),128)),o("div",Jd,[o("div",Nd,["jisho_org_lookup"!==t.item.action?(a(),n("div",zd,[m(o("select",{"onUpdate:modelValue":e[2]||(e[2]=e=>t.newtrigger=e)},Bd,512),[[x,t.newtrigger]])])):c("",!0)]),o("button",{class:"button is-small",onClick:e[3]||(e[3]=e=>t.addtrigger())},Wd)])])]),"jisho_org_lookup"===t.item.action?(a(),n("tr",qd,Hd)):c("",!0),"madochan_createword"===t.item.action?(a(),n("tr",Kd,Gd)):c("",!0),"madochan_createword"===t.item.action?(a(),n("tr",Yd,[Xd,o("td",null,[o("div",Qd,[m(o("input",{class:"input is-small spaceinput","onUpdate:modelValue":e[4]||(e[4]=e=>t.item.data.model=e)},null,512),[[h,t.item.data.model]])]),Zd])])):c("",!0),"madochan_createword"===t.item.action?(a(),n("tr",tr,[er,o("td",null,[o("div",sr,[m(o("input",{class:"input is-small spaceinput","onUpdate:modelValue":e[5]||(e[5]=e=>t.item.data.weirdness=e)},null,512),[[h,t.item.data.weirdness]])]),lr])])):c("",!0),"chatters"===t.item.action?(a(),n("tr",ar,nr)):c("",!0),"text"===t.item.action?(a(),n("tr",ir,[or,o("td",null,[(a(!0),n(d,null,r(t.item.data.text,((e,s)=>(a(),n("div",{key:s,class:"field textarea-holder"},[m(o("textarea",{class:v(["textarea",{"has-background-danger-light":!t.item.data.text[s],"has-text-danger-dark":!t.item.data.text[s]}]),type:"text","onUpdate:modelValue":e=>t.item.data.text[s]=e},null,10,dr),[[h,t.item.data.text[s]]]),o("button",{class:"button is-small",disabled:t.item.data.text.length<=1,onClick:e=>t.rmtxt(s)},ur,8,rr)])))),128)),o("div",cr,[o("button",{class:"button is-small",onClick:e[6]||(e[6]=(...e)=>t.addtxt&&t.addtxt(...e))},mr)]),hr])])):c("",!0),"media"===t.item.action?(a(),n("tr",pr,[gr,o("td",null,[t.item.data.image.file?(a(),V(w,{key:0,src:t.item.data.image.file,title:t.item.data.image.filename,width:"100%",height:"90",style:{display:"block"}},null,8,["src","title"])):c("",!0),t.item.data.image.file?(a(),n("button",{key:1,class:"button is-small",onClick:e[7]||(e[7]=e=>t.item.data.image.file=null)},yr)):c("",!0),t.item.data.image.file?(a(),n("br",br)):c("",!0),i(C,{onUploaded:t.mediaImgUploaded,accept:"image/*",label:"Upload Image",class:v({"mt-1":t.item.data.image.file})},null,8,["onUploaded","class"])])])):c("",!0),"media"===t.item.action?(a(),n("tr",fr,[vr,o("td",null,[t.item.data.sound.file?(a(),V(S,{key:0,src:t.item.data.sound.file,name:t.item.data.sound.filename,volume:t.item.data.sound.volume,baseVolume:t.baseVolume,class:"button is-small"},null,8,["src","name","volume","baseVolume"])):c("",!0),t.item.data.sound.file?(a(),V(U,{key:1,modelValue:t.item.data.sound.volume,"onUpdate:modelValue":e[8]||(e[8]=e=>t.item.data.sound.volume=e)},null,8,["modelValue"])):c("",!0),t.item.data.sound.file?(a(),n("button",{key:2,class:"button is-small",onClick:e[9]||(e[9]=e=>t.item.data.sound.file=null)},kr)):c("",!0),t.item.data.sound.file?(a(),n("br",wr)):c("",!0),i(C,{onUploaded:t.mediaSndUploaded,accept:"audio/*",label:"Upload Sound",class:v({"mt-1":t.item.data.sound.file})},null,8,["onUploaded","class"])])])):c("",!0),"media"===t.item.action?(a(),n("tr",Cr,[Vr,o("td",null,[o("div",xr,[i(k,{modelValue:t.item.data.minDurationMs,"onUpdate:modelValue":e[10]||(e[10]=e=>t.item.data.minDurationMs=e)},null,8,["modelValue"]),Sr])])])):c("",!0),"countdown"===t.item.action?(a(),n("tr",Ur,[_r,o("td",null,[i(_,{modelValue:t.item.data,"onUpdate:modelValue":e[11]||(e[11]=e=>t.item.data=e),baseVolume:t.baseVolume},null,8,["modelValue","baseVolume"])])])):c("",!0),o("tr",null,[Ir,o("td",null,[t.item.variables.length>0?(a(),n("table",Pr,[Tr,o("tbody",null,[(a(!0),n(d,null,r(t.item.variables,((e,s)=>(a(),n("tr",{key:s},[o("td",null,[m(o("input",{type:"text",class:"input is-small","onUpdate:modelValue":t=>e.name=t},null,8,Ar),[[h,e.name]])]),o("td",null,[m(o("input",{type:"text",class:"input is-small","onUpdate:modelValue":t=>e.value=t},null,8,$r),[[h,e.value]])]),o("td",null,[o("button",{class:"button is-small",onClick:e=>t.rmVariable(s)},Lr,8,Mr)])])))),128))])])):c("",!0),o("span",{class:"button is-small",onClick:e[12]||(e[12]=(...e)=>t.onAddVariable&&t.onAddVariable(...e))},"Add Variable"),Dr])]),o("tr",null,[Er,o("td",null,[t.item.variableChanges.length>0?(a(),n("table",jr,[Rr,o("tbody",null,[(a(!0),n(d,null,r(t.item.variableChanges,((s,l)=>(a(),n("tr",{key:l},[o("td",null,[o("div",Or,[o("div",Fr,[m(o("input",{type:"text",class:"input is-small","onUpdate:modelValue":t=>s.name=t,onFocus:e=>t.variableChangeFocusIdx=l,onBlur:e[13]||(e[13]=(...e)=>t.onVarChangeInputBlur&&t.onVarChangeInputBlur(...e))},null,40,Jr),[[h,s.name]])]),t.variableChangeFocusIdx===l?(a(),n("div",Nr,[o("div",zr,[(a(!0),n(d,null,r(t.autocompletableVariables(s.name),((t,e)=>(a(),n("a",{class:"dropdown-item",key:e,onClick:e=>s.name=t.var.name},[y(u(t.var.name)+" ("+u(t.type)+", ",1),o("code",null,u(t.var.value),1),Wr],8,Br)))),128))])])):c("",!0)])]),o("td",null,[o("div",qr,[m(o("select",{"onUpdate:modelValue":t=>s.change=t},Kr,8,Hr),[[x,s.change]])])]),o("td",null,[m(o("input",{type:"text",class:"input is-small","onUpdate:modelValue":t=>s.value=t},null,8,Gr),[[h,s.value]])]),o("td",null,[o("button",{class:"button is-small",onClick:e=>t.rmVariableChange(l)},Xr,8,Yr)])])))),128))])])):c("",!0),o("span",{class:"button is-small",onClick:e[14]||(e[14]=(...e)=>t.onAddVariableChange&&t.onAddVariableChange(...e))},"Add Variable Change"),Qr])]),o("tr",null,[Zr,o("td",null,[o("label",null,[m(o("input",{type:"checkbox","onUpdate:modelValue":e[15]||(e[15]=e=>t.item.restrict_to=e),value:"broadcaster"},null,512),[[b,t.item.restrict_to]]),tu]),o("label",null,[m(o("input",{type:"checkbox","onUpdate:modelValue":e[16]||(e[16]=e=>t.item.restrict_to=e),value:"mod"},null,512),[[b,t.item.restrict_to]]),eu]),o("label",null,[m(o("input",{type:"checkbox","onUpdate:modelValue":e[17]||(e[17]=e=>t.item.restrict_to=e),value:"sub"},null,512),[[b,t.item.restrict_to]]),su])])])])])]),o("footer",lu,[o("button",{class:"button is-small is-primary",disabled:!t.valid,onClick:e[18]||(e[18]=(...e)=>t.onSaveClick&&t.onSaveClick(...e))}," Save changes ",8,au),o("button",{class:"button is-small",onClick:e[19]||(e[19]=(...e)=>t.onCancelClick&&t.onCancelClick(...e))},"Cancel")])])])):c("",!0)}],["__scopeId","data-v-1bf0a91c"]]);const iu=s({name:"countdown-edit",props:{baseVolume:{default:100},modelValue:{type:Object,required:!0}},data:()=>({countdown:{type:"manual",actions:[],steps:3,interval:1e3,intro:"",outro:""}}),methods:{dragEnd(t){this.countdown.actions=Zl.arrayMove(this.countdown.actions,t.oldIndex,t.newIndex)},onAddDelay(){this.countdown.actions.push({type:"delay",value:"1s"})},onAddText(){this.countdown.actions.push({type:"text",value:Kl()})},onAddMedia(){this.countdown.actions.push({type:"media",value:Gl()})},rmaction(t){this.countdown.actions=this.countdown.actions.filter(((e,s)=>s!==t))},mediaSndUploaded(t,e){this.countdown.actions[t].value.sound.filename=e.originalname,this.countdown.actions[t].value.sound.file=e.filename},mediaImgUploaded(t,e){this.countdown.actions[t].value.image.filename=e.originalname,this.countdown.actions[t].value.image.file=e.filename}},created(){this.countdown.type=this.modelValue.type||"auto",this.countdown.actions=this.modelValue.actions||[],this.countdown.steps=this.modelValue.steps,this.countdown.interval=this.modelValue.interval,this.countdown.intro=this.modelValue.intro,this.countdown.outro=this.modelValue.outro,this.$watch("countdown",(()=>{this.$emit("update:modelValue",{type:this.countdown.type,actions:this.countdown.actions,steps:this.countdown.steps,interval:this.countdown.interval,intro:this.countdown.intro,outro:this.countdown.outro})}),{deep:!0})}}),ou={class:"control"},du={class:"radio"},ru=y(" Manual "),uu={class:"radio"},cu=y(" Auto "),mu={key:0},hu={class:"spacerow"},pu=o("label",{class:"spacelabel"},"Steps ",-1),gu={class:"spacerow"},yu=o("label",{class:"spacelabel"},"Interval ",-1),bu={class:"spacerow"},fu=o("label",{class:"spacelabel"},"Intro ",-1),vu={class:"spacerow"},ku=o("label",{class:"spacelabel"},"Outro ",-1),wu={key:1},Cu={class:"field has-addons mr-1"},Vu=o("span",{class:"handle p-2"},[o("i",{class:"fa fa-arrows"})],-1),xu={key:0,class:"control has-icons-left"},Su=o("span",{class:"icon is-small is-left"},[o("i",{class:"fa fa-hourglass"})],-1),Uu={key:1,class:"control has-icons-left"},_u=["onUpdate:modelValue"],Iu=o("span",{class:"icon is-small is-left"},[o("i",{class:"fa fa-comments-o"})],-1),Pu={key:2,class:"control has-icons-left"},Tu=o("td",null,"Image:",-1),Au=["onClick"],$u=[o("i",{class:"fa fa-remove mr-1"},null,-1),y(" Remove ")],Mu={key:2},Lu=o("td",null,"Sound:",-1),Du=["onClick"],Eu=[o("i",{class:"fa fa-remove mr-1"},null,-1),y(" Remove ")],ju={key:3},Ru=o("td",null,"Duration:",-1),Ou={class:"control has-icons-left"},Fu=o("span",{class:"icon is-small is-left"},[o("i",{class:"fa fa-hourglass"})],-1),Ju={class:"control"},Nu=["onClick"],zu=[o("i",{class:"fa fa-remove"},null,-1)],Bu=[o("i",{class:"fa fa-hourglass mr-1"},null,-1),y(" Add Delay ")],Wu=[o("i",{class:"fa fa-comments-o mr-1"},null,-1),y(" Add Chat ")],qu=[o("i",{class:"fa fa-picture-o mr-1"},null,-1),y(" Add Media ")];var Hu=$(iu,[["render",function(t,e,s,d,r,u){const p=l("duration-input"),y=l("responsive-image"),b=l("upload"),f=l("player"),k=l("volume-slider"),w=l("draggable");return a(),n("div",null,[o("div",ou,[o("label",du,[m(o("input",{type:"radio",value:"manual","onUpdate:modelValue":e[0]||(e[0]=e=>t.countdown.type=e)},null,512),[[U,t.countdown.type]]),ru]),o("label",uu,[m(o("input",{type:"radio",value:"auto","onUpdate:modelValue":e[1]||(e[1]=e=>t.countdown.type=e)},null,512),[[U,t.countdown.type]]),cu])]),"auto"===t.countdown.type?(a(),n("div",mu,[o("div",hu,[pu,m(o("input",{class:"input is-small spaceinput","onUpdate:modelValue":e[2]||(e[2]=e=>t.countdown.steps=e)},null,512),[[h,t.countdown.steps]])]),o("div",gu,[yu,i(p,{modelValue:t.countdown.interval,"onUpdate:modelValue":e[3]||(e[3]=e=>t.countdown.interval=e)},null,8,["modelValue"])]),o("div",bu,[fu,m(o("input",{class:"input is-small spaceinput","onUpdate:modelValue":e[4]||(e[4]=e=>t.countdown.intro=e)},null,512),[[h,t.countdown.intro]])]),o("div",vu,[ku,m(o("input",{class:"input is-small spaceinput","onUpdate:modelValue":e[5]||(e[5]=e=>t.countdown.outro=e)},null,512),[[h,t.countdown.outro]])])])):(a(),n("div",wu,[i(w,{modelValue:t.countdown.actions,onEnd:t.dragEnd,handle:".handle","item-key":"id"},{item:g((({element:e,index:s})=>[o("div",Cu,[Vu,"delay"===e.type?(a(),n("div",xu,[i(p,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t},null,8,["modelValue","onUpdate:modelValue"]),Su])):"text"===e.type?(a(),n("div",Uu,[m(o("input",{class:"input is-small",type:"text","onUpdate:modelValue":t=>e.value=t},null,8,_u),[[h,e.value]]),Iu])):"media"===e.type?(a(),n("div",Pu,[o("table",null,[o("tr",null,[Tu,o("td",null,[e.value.image.file?(a(),V(y,{key:0,src:e.value.image.file,title:e.value.image.filename,width:"100%",height:"90",style:{display:"block"}},null,8,["src","title"])):c("",!0),e.value.image.file?(a(),n("button",{key:1,class:"button is-small",onClick:t=>e.value.image.file=null},$u,8,Au)):c("",!0),e.value.image.file?(a(),n("br",Mu)):c("",!0),i(b,{onUploaded:e=>t.mediaImgUploaded(s,e),accept:"image/*",label:"Upload Image",class:v({"mt-1":e.value.image.file})},null,8,["onUploaded","class"])])]),o("tr",null,[Lu,o("td",null,[e.value.sound.file?(a(),V(f,{key:0,src:e.value.sound.file,name:e.value.sound.filename,volume:e.value.sound.volume,baseVolume:t.baseVolume,class:"button is-small"},null,8,["src","name","volume","baseVolume"])):c("",!0),e.value.sound.file?(a(),V(k,{key:1,modelValue:e.value.sound.volume,"onUpdate:modelValue":t=>e.value.sound.volume=t},null,8,["modelValue","onUpdate:modelValue"])):c("",!0),e.value.sound.file?(a(),n("button",{key:2,class:"button is-small",onClick:t=>e.value.sound.file=null},Eu,8,Du)):c("",!0),e.value.sound.file?(a(),n("br",ju)):c("",!0),i(b,{onUploaded:e=>t.mediaSndUploaded(s,e),accept:"audio/*",label:"Upload Sound",class:v({"mt-1":e.value.sound.file})},null,8,["onUploaded","class"])])]),o("tr",null,[Ru,o("td",null,[o("div",Ou,[i(p,{modelValue:e.value.minDurationMs,"onUpdate:modelValue":t=>e.value.minDurationMs=t},null,8,["modelValue","onUpdate:modelValue"]),Fu])])])])])):c("",!0),o("div",Ju,[o("button",{class:"button is-small",onClick:e=>t.rmaction(s)},zu,8,Nu)])])])),_:1},8,["modelValue","onEnd"]),o("button",{class:"button is-small",onClick:e[6]||(e[6]=(...e)=>t.onAddDelay&&t.onAddDelay(...e))},Bu),o("button",{class:"button is-small",onClick:e[7]||(e[7]=(...e)=>t.onAddText&&t.onAddText(...e))},Wu),o("button",{class:"button is-small",onClick:e[8]||(e[8]=(...e)=>t.onAddMedia&&t.onAddMedia(...e))},qu)]))])}]]);const Ku=s({props:{playlist:Array,filter:Object},data:()=>({hideFilteredOut:!0,filterTagInput:"",tagInput:"",tagInputIdx:-1}),methods:{toggleVisibility(t,e){t.hidevideo?this.sendCtrl("videoVisibility",[!0,e]):this.sendCtrl("videoVisibility",[!1,e])},dragEnd(t){this.sendCtrl("move",[t.oldIndex,t.newIndex])},applyFilter(t){this.$emit("filterChange",t)},sendCtrl(t,e){this.$emit("ctrl",[t,e])},isFilteredOut(t){return""!==this.filter.tag&&!t.tags.includes(this.filter.tag)},startAddTag(t){this.tagInputIdx=t,this.$nextTick((()=>{this.$el.querySelector("table .filter-tag-input").focus()}))}},computed:{enhancedPlaylist(){return this.playlist.map((t=>(t.filteredOut=this.isFilteredOut(t),t)))},firstIndex(){return""===this.filter.tag?0:this.playlist.findIndex((t=>t.tags.includes(this.filter.tag)))}},watch:{playlist:function(t,e){t.find((t=>!this.isFilteredOut(t)))||this.$emit("stopPlayer")},filter:function(t,e){this.playlist.find((t=>!this.isFilteredOut(t)))||this.$emit("stopPlayer")}}}),Gu={class:"filters"},Yu={class:"currentfilter"},Xu=o("div",{class:"mr-1 pt-1"},"Filter:",-1),Qu=o("i",{class:"fa fa-remove ml-1"},null,-1),Zu={key:1,class:"field has-addons mr-1"},tc={class:"control"},ec={class:"control"},sc={class:"pt-1"},lc=y(" Hide filtered out"),ac={key:0,class:"table is-striped"},nc=o("thead",null,[o("tr",null,[o("th"),o("th"),o("th"),o("th",null,"Title"),o("th",null,"User"),o("th",null,"Plays"),o("th"),o("th"),o("th"),o("th")])],-1),ic=o("td",{class:"pt-4 handle"},[o("i",{class:"fa fa-arrows"})],-1),oc=["disabled","onClick"],dc=[o("i",{class:"fa fa-play"},null,-1)],rc=["href"],uc=o("i",{class:"fa fa-external-link"},null,-1),cc=["onClick"],mc=o("i",{class:"fa fa-remove ml-1"},null,-1),hc=["onClick"],pc=[o("i",{class:"fa fa-plus"},null,-1)],gc={key:0,class:"field has-addons"},yc={class:"control"},bc=["onKeyup"],fc={class:"control"},vc=["disabled","onClick"],kc=["onClick","title"],wc=["onClick"],Cc=o("i",{class:"fa fa-thumbs-up mr-1"},null,-1),Vc=["onClick"],xc=o("i",{class:"fa fa-thumbs-down mr-1"},null,-1),Sc=["onClick"],Uc=[o("i",{class:"fa fa-trash"},null,-1)],_c={key:1};var Ic=$(Ku,[["render",function(t,e,s,f,k,w){const C=l("draggable");return a(),n("div",null,[o("div",Gu,[o("div",Yu,[Xu,t.filter.tag?(a(),n("span",{key:0,class:"tag mr-1",onClick:e[0]||(e[0]=e=>t.applyFilter(""))},[y(u(t.filter.tag)+" ",1),Qu])):(a(),n("div",Zu,[o("div",tc,[m(o("input",{class:"input is-small filter-tag-input",type:"text","onUpdate:modelValue":e[1]||(e[1]=e=>t.filterTagInput=e),onKeyup:e[2]||(e[2]=p((e=>t.applyFilter(t.filterTagInput)),["enter"]))},null,544),[[h,t.filterTagInput]])]),o("div",ec,[o("span",{class:"button is-small",onClick:e[3]||(e[3]=e=>t.applyFilter(t.filterTagInput))},"Apply filter")])])),o("label",sc,[m(o("input",{class:"checkbox",type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=e=>t.hideFilteredOut=e)},null,512),[[b,t.hideFilteredOut]]),lc])])]),t.playlist.length>0?(a(),n("table",ac,[nc,i(C,{modelValue:t.enhancedPlaylist,onEnd:t.dragEnd,tag:"tbody",handle:".handle","item-key":"id"},{item:g((({element:s,index:l})=>[m(o("tr",null,[ic,o("td",null,u(l+1),1),o("td",null,[l!==t.firstIndex?(a(),n("button",{key:0,class:"button is-small",disabled:!!s.filteredOut||null,onClick:e=>t.sendCtrl("playIdx",[l]),title:"Play"},dc,8,oc)):c("",!0)]),o("td",null,[o("a",{href:"https://www.youtube.com/watch?v="+s.yt,target:"_blank"},[y(u(s.title||s.yt)+" ",1),uc],8,rc),o("div",null,[(a(!0),n(d,null,r(s.tags,((e,s)=>(a(),n("span",{key:s,class:"tag",onClick:s=>t.sendCtrl("rmtag",[e,l])},[y(u(e)+" ",1),mc],8,cc)))),128)),o("span",{class:"button is-small",onClick:e=>t.startAddTag(l)},pc,8,hc)]),t.tagInputIdx===l?(a(),n("div",gc,[o("div",yc,[m(o("input",{class:"input is-small filter-tag-input",type:"text","onUpdate:modelValue":e[5]||(e[5]=e=>t.tagInput=e),onKeyup:p((e=>{t.sendCtrl("addtag",[t.tagInput,l]),t.tagInput=""}),["enter"])},null,40,bc),[[h,t.tagInput]])]),o("div",fc,[o("span",{class:"button is-small",disabled:!t.tagInput||null,onClick:e=>{t.sendCtrl("addtag",[t.tagInput,l]),t.tagInput=""}},"Add tag",8,vc)])])):c("",!0)]),o("td",null,u(s.user),1),o("td",null,u(s.plays)+"x",1),o("td",null,[o("button",{class:"button is-small",onClick:e=>t.toggleVisibility(s,l),title:s.hidevideo?"Video hidden":"Video visible"},[o("i",{class:v(["fa mr-1",{"fa-eye":!s.hidevideo,"fa-eye-slash":s.hidevideo}])},null,2)],8,kc)]),o("td",null,[o("button",{class:"button is-small",onClick:e=>t.sendCtrl("goodIdx",[l])},[Cc,y(" "+u(s.goods),1)],8,wc)]),o("td",null,[o("button",{class:"button is-small",onClick:e=>t.sendCtrl("badIdx",[l])},[xc,y(" "+u(s.bads),1)],8,Vc)]),o("td",null,[o("button",{class:"button is-small",onClick:e=>t.sendCtrl("rmIdx",[l]),title:"Remove"},Uc,8,Sc)])],512),[[_,!t.hideFilteredOut||!s.filteredOut]])])),_:1},8,["modelValue","onEnd"])])):(a(),n("div",_c,"Playlist is empty"))])}]]);const Pc=s({props:{tags:Array},data:()=>({editTag:"",tagEditIdx:-1}),methods:{onInputFocus(t,e){this.editTag=t.value,this.tagEditIdx=e},updateTag(t,e){this.$emit("updateTag",[t,e])}}}),Tc={class:"table is-striped"},Ac=o("tr",null,[o("th",null,"Tag"),o("th"),o("th")],-1),$c=["onKeyup"],Mc=["value","onFocus"],Lc=["disabled","onClick"];var Dc=$(Pc,[["render",function(t,e,s,l,i,g){return a(),n("table",Tc,[Ac,(a(!0),n(d,null,r(t.tags,((s,l)=>(a(),n("tr",{key:l},[o("td",null,[t.tagEditIdx===l?m((a(),n("input",{key:0,type:"text",class:"input is-small","onUpdate:modelValue":e[0]||(e[0]=e=>t.editTag=e),onKeyup:p((e=>t.updateTag(s.value,t.editTag)),["enter"])},null,40,$c)),[[h,t.editTag]]):(a(),n("input",{key:1,type:"text",class:"input is-small",value:s.value,onFocus:e=>t.onInputFocus(s,l)},null,40,Mc))]),o("td",null,[t.tagEditIdx===l?(a(),n("span",{key:0,class:"button is-small",disabled:s.value===t.editTag||null,onClick:e=>t.updateTag(s.value,t.editTag)},"Save",8,Lc)):c("",!0)]),o("td",null,u(s.count)+"x",1)])))),128))])}]]);const Ec=s({setup(){}}),jc={class:"table is-striped"},Rc=[o("thead",null,[o("tr",null,[o("th",null,"Chat command"),o("th",null,"Viewer"),o("th",null,"Mod"),o("th",null,"Explanation")])],-1),o("tbody",null,[o("tr",null,[o("td",null,[o("code",null,"!sr <SEARCH>")]),o("td",{class:"has-text-success"},"✔"),o("td",{class:"has-text-success"},"✔"),o("td",null,[y(" Search for "),o("code",null,"<SEARCH>"),y(" at youtube (by id or by title) and queue the first result in the playlist (after the first found batch of unplayed songs)."),o("br"),y(" This only executes if "),o("code",null,"<SEARCH>"),y(" does not match one of the commands below. ")])]),o("tr",null,[o("td",null,[o("code",null,"!sr undo")]),o("td",{class:"has-text-success"},"✔"),o("td",{class:"has-text-success"},"✔"),o("td",null,"Remove the song that was last added by oneself.")]),o("tr",null,[o("td",null,[o("code",null,"!sr current")]),o("td",{class:"has-text-success"},"✔"),o("td",{class:"has-text-success"},"✔"),o("td",null,"Show what song is currently playing")]),o("tr",null,[o("td",null,[o("code",null,"!sr good")]),o("td",{class:"has-text-success"},"✔"),o("td",{class:"has-text-success"},"✔"),o("td",null,"Vote the current song up")]),o("tr",null,[o("td",null,[o("code",null,"!sr bad")]),o("td",{class:"has-text-success"},"✔"),o("td",{class:"has-text-success"},"✔"),o("td",null,"Vote the current song down")]),o("tr",null,[o("td",null,[o("code",null,"!sr stats")]),o("td",{class:"has-text-success"},"✔"),o("td",{class:"has-text-success"},"✔"),o("td",null,"Show stats about the playlist")]),o("tr",null,[o("td",null,[o("code",null,"!sr stat")]),o("td",{class:"has-text-success"},"✔"),o("td",{class:"has-text-success"},"✔"),o("td",null,"Alias for stats")]),o("tr",null,[o("td",null,[o("code",null,"!sr rm")]),o("td",{class:"has-text-danger"},"✖"),o("td",{class:"has-text-success"},"✔"),o("td",null,"Remove the current song from the playlist")]),o("tr",null,[o("td",null,[o("code",null,"!sr next")]),o("td",{class:"has-text-danger"},"✖"),o("td",{class:"has-text-success"},"✔"),o("td",null,"Skip to the next song")]),o("tr",null,[o("td",null,[o("code",null,"!sr prev")]),o("td",{class:"has-text-danger"},"✖"),o("td",{class:"has-text-success"},"✔"),o("td",null,"Skip to the previous song")]),o("tr",null,[o("td",null,[o("code",null,"!sr skip")]),o("td",{class:"has-text-danger"},"✖"),o("td",{class:"has-text-success"},"✔"),o("td",null,"Alias for next")]),o("tr",null,[o("td",null,[o("code",null,"!sr jumptonew")]),o("td",{class:"has-text-danger"},"✖"),o("td",{class:"has-text-success"},"✔"),o("td",null,"Jump to the next unplayed song")]),o("tr",null,[o("td",null,[o("code",null,"!sr shuffle")]),o("td",{class:"has-text-danger"},"✖"),o("td",{class:"has-text-success"},"✔"),o("td",null,[y(" Shuffle the playlist (current song unaffected). "),o("br"),y(" Non-played and played songs will be shuffled separately and non-played songs will be put after currently playing song. ")])]),o("tr",null,[o("td",null,[o("code",null,"!sr resetStats")]),o("td",{class:"has-text-danger"},"✖"),o("td",{class:"has-text-success"},"✔"),o("td",null,"Reset all statistics of all songs")]),o("tr",null,[o("td",null,[o("code",null,"!sr clear")]),o("td",{class:"has-text-danger"},"✖"),o("td",{class:"has-text-success"},"✔"),o("td",null,"Clear the playlist")]),o("tr",null,[o("td",null,[o("code",null,"!sr pause")]),o("td",{class:"has-text-danger"},"✖"),o("td",{class:"has-text-success"},"✔"),o("td",null,"Pause currently playing song")]),o("tr",null,[o("td",null,[o("code",null,"!sr unpause")]),o("td",{class:"has-text-danger"},"✖"),o("td",{class:"has-text-success"},"✔"),o("td",null,"Unpause currently paused song")]),o("tr",null,[o("td",null,[o("code",null,"!sr loop")]),o("td",{class:"has-text-danger"},"✖"),o("td",{class:"has-text-success"},"✔"),o("td",null,"Loop the current song")]),o("tr",null,[o("td",null,[o("code",null,"!sr noloop")]),o("td",{class:"has-text-danger"},"✖"),o("td",{class:"has-text-success"},"✔"),o("td",null,"Stop looping the current song")]),o("tr",null,[o("td",null,[o("code",null,"!sr unloop")]),o("td",{class:"has-text-danger"},"✖"),o("td",{class:"has-text-success"},"✔"),o("td",null,"Alias for noloop")]),o("tr",null,[o("td",null,[o("code",null,"!sr hidevideo")]),o("td",{class:"has-text-danger"},"✖"),o("td",{class:"has-text-success"},"✔"),o("td",null,"Hide video for current song")]),o("tr",null,[o("td",null,[o("code",null,"!sr showvideo")]),o("td",{class:"has-text-danger"},"✖"),o("td",{class:"has-text-success"},"✔"),o("td",null,"Show video for current song")]),o("tr",null,[o("td",null,[o("code",null,"!sr tag <TAG>")]),o("td",{class:"has-text-danger"},"✖"),o("td",{class:"has-text-success"},"✔"),o("td",null,[y("Add tag "),o("code",null,"<TAG>"),y(" to the current song")])]),o("tr",null,[o("td",null,[o("code",null,"!sr rmtag <TAG>")]),o("td",{class:"has-text-danger"},"✖"),o("td",{class:"has-text-success"},"✔"),o("td",null,[y("Remove tag "),o("code",null,"<TAG>"),y(" from the current song")])]),o("tr",null,[o("td",null,[o("code",null,"!sr filter [<TAG>]")]),o("td",{class:"has-text-danger"},"✖"),o("td",{class:"has-text-success"},"✔"),o("td",null,[y(" Play only songs with the given tag "),o("code",null,"<TAG>"),y(". If no tag is given, play all songs. ")])])],-1)];var Oc=$(Ec,[["render",function(t,e,s,l,i,o){return a(),n("table",jc,Rc)}]]);(async()=>{const t=I({history:P(),routes:[{name:"index",path:"/",component:z,meta:{title:"Hyottoko.club",protected:!0}},{name:"login",path:"/login",component:it,meta:{title:"Login",protected:!1}},{name:"register",path:"/register",component:Ye,meta:{title:"Register",protected:!1}},{name:"password-reset",path:"/password-reset",component:lo,meta:{title:"Password Reset",protected:!1}},{name:"forgot-password",path:"/forgot-password",component:fo,meta:{title:"Forgot Password",protected:!1}},{name:"commands",path:"/commands/",component:rn,meta:{title:"Commands",protected:!0}},{name:"variables",path:"/variables/",component:ve,meta:{title:"Variables",protected:!0}},{name:"sr",path:"/sr/",component:zl,meta:{title:"Song Request",protected:!0}},{name:"speech-to-text",path:"/speech-to-text/",component:Ni,meta:{title:"Speech to text",protected:!0}},{name:"drawcast",path:"/drawcast/",component:ae,meta:{title:"Drawcast",protected:!0}},{name:"settings",path:"/settings/",component:Fs,meta:{title:"Settings",protected:!0}}]}),e=async t=>{const e=await fetch(t);return 200===e.status?await e.json():null},s=await e("/api/conf"),l=await e("/api/user/me");t.beforeEach(((t,e,s)=>{!t.meta.protected||l?t.meta.protected||!l?(e.name&&document.documentElement.classList.remove(`view-${String(e.name)}`),document.documentElement.classList.add(`view-${String(t.name)}`),document.title=`${t.meta.title}`,s()):s({name:"index"}):s({name:"login"})}));const a=T(D);a.config.globalProperties.$conf=s,a.config.globalProperties.$me=l,a.use(t),a.component("codearea",So),a.component("doubleclick-button",sd),a.component("draggable",A),a.component("duration-input",Uo),a.component("duration",Zo),a.component("navbar",Go),a.component("player",_o),a.component("responsive-image",Fo),a.component("slider",Eo),a.component("upload",xo),a.component("volume-slider",jo),a.component("youtube",dd),a.component("command-edit",nu),a.component("countdown-edit",Hu),a.component("playlist-editor",Ic),a.component("tags-editor",Dc),a.component("help",Oc),a.mount("#app")})();
